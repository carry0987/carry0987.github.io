import{w as b,a as d,p as r}from"./chunk-FGUA77HG-BxeL2Wrr.js";import{S as C,F as L,P as I,G as k,W as A,B as R,a as O,b as j,c as H,d as N,M as x,e as w,I as z,T as P,f as F,O as G,A as u,C as D,g,h as M,i as y}from"./three.module-BciEV48b.js";const v=6e3,Y=30,U=.008,_=5e3,W=50,h=[{name:"CYBERPUNK",bg:328976,fog:328976,main:65535,sec:16711935,grid:1118515},{name:"MATRIX",bg:1280,fog:1280,main:65280,sec:34816,grid:4352},{name:"VAPORWAVE",bg:1048592,fog:1048592,main:16711850,sec:56814,grid:2228258},{name:"GOLDEN",bg:328448,fog:328448,main:16755200,sec:16768341,grid:2232576},{name:"ICE",bg:1288,fog:1288,main:11197951,sec:16777215,grid:4386}],S=["我就廢","薪水呢?","不想努力了","404 ERROR","人生好難","吃飽沒?","週一症候群","快逃啊","SYSTEM FAIL","腦袋過載","我是誰我在哪","歸剛欸","躺平模式","貓咪在哪","錢包已空","?????","BUG DETECTED","想回家了","不要問","心好累","人類太可惡","午餐吃啥","好想睡覺","這專案會爆","可以下班了嗎","意義不明"],E=["啪!","醒醒!","摸魚?","還敢混啊","吃我一拳","振作點!","看哪裡!","是在哈囉"];class K{scene;camera;cameraHolder;renderer;starField;gridMesh;objects=[];textSprites=[];currentThemeIdx=0;speed=.05;targetSpeed=.05;mouseX=0;mouseY=0;shakeIntensity=0;animationId=null;systemMessageInterval=null;eventListenersAttached=!1;logCallback;themeCallback;handleMouseMove;handleMouseDown;handleKeyDown;handleKeyUp;handleResize;handleVisibilityChange;constructor(){this.scene=new C,this.scene.fog=new L(0,.008),this.camera=new I(60,window.innerWidth/window.innerHeight,.1,2e3),this.camera.position.set(0,0,0),this.cameraHolder=new k,this.cameraHolder.position.set(0,2,10),this.cameraHolder.add(this.camera),this.scene.add(this.cameraHolder),this.renderer=new A({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.starField=this.createStarField(),this.gridMesh=this.createGrid(),this.createFloatingObjects(),this.applyTheme(0),this.startSystemMessages()}createStarField(){const e=new R,t=new Float32Array(v*3);for(let n=0;n<v*3;n+=3)t[n]=(Math.random()-.5)*800,t[n+1]=(Math.random()-.5)*800,t[n+2]=-Math.random()*1e3;e.setAttribute("position",new O(t,3));const s=new j({color:16777215,size:.5,transparent:!0}),i=new H(e,s);return this.scene.add(i),i}createGrid(){const e=new N(1e3,1e3,50,50),t=new x({color:1118515,wireframe:!0,transparent:!0,opacity:.3}),s=new w(e,t);return s.rotation.x=-Math.PI/2,s.position.y=-10,this.scene.add(s),s}createFloatingObjects(){const e=[new z(1,0),new P(3,.2,8,50),new F(1,10,1),new G(2)],t=new x({color:65535,wireframe:!0,transparent:!0,opacity:.5,blending:u});for(let s=0;s<Y;s++){const i=new w(e[Math.floor(Math.random()*e.length)],t.clone());this.resetObject(i),this.scene.add(i),this.objects.push(i)}}resetObject(e){e.position.z=-500-Math.random()*200,e.position.x=(Math.random()-.5)*150,e.position.y=(Math.random()-.5)*80;const t=1+Math.random()*5;e.scale.set(t,t,t),e.rotation.set(Math.random(),Math.random(),Math.random())}createTextTexture(e,t,s){const i=document.createElement("canvas"),n=i.getContext("2d");i.width=1536,i.height=384;const a=s?"900":"bold";return n.font=`${a} 60px Consolas, monospace`,n.textAlign="center",n.textBaseline="middle",n.fillStyle=t,n.shadowColor=t,n.shadowBlur=s?30:20,n.fillText(e,i.width/2,i.height/2),new D(i)}spawnTrashTalk(){const e=S[Math.floor(Math.random()*S.length)],t=h[this.currentThemeIdx],s=Math.random()>.3?new g(t.sec).getStyle():"#ffffff",i=this.createTextTexture(e,s,!1),n=new M({map:i,transparent:!0,opacity:.9,blending:u}),a=new y(n);a.scale.set(25,6,1),a.position.z=-300,a.position.x=(Math.random()-.5)*50,a.position.y=(Math.random()-.5)*20,a.isSlap=!1,this.scene.add(a),this.textSprites.push(a)}spawnSlapText(){const e=E[Math.floor(Math.random()*E.length)],t=h[this.currentThemeIdx],s=new g(t.main).getStyle(),i=this.createTextTexture(e,s,!0),n=new M({map:i,transparent:!0,opacity:1,blending:u}),a=new y(n);a.scale.set(50,12,1),a.position.z=-20,a.position.x=0,a.position.y=0,a.isSlap=!0,this.scene.add(a),this.textSprites.push(a)}applyTheme(e){const t=h[e];this.scene.background=new g(t.bg),this.scene.fog.color.setHex(t.fog),this.objects.forEach(s=>{s.material.color.setHex(Math.random()>.5?t.main:t.sec)}),this.starField.material.color.setHex(t.sec),this.gridMesh.material.color.setHex(t.grid),this.themeCallback&&this.themeCallback(t.name)}setupEventListeners(){if(this.eventListenersAttached)return;const e=this.renderer.domElement;this.handleMouseMove=t=>{this.mouseX=(t.clientX-window.innerWidth/2)*.001,this.mouseY=(t.clientY-window.innerHeight/2)*.001},this.handleMouseDown=()=>{this.spawnSlapText(),this.shakeIntensity=1.5,this.logCallback&&this.logCallback("ACTION: SLAP!")},this.handleKeyDown=t=>{t.code==="Space"&&(this.targetSpeed=.8),t.code==="KeyC"&&(this.currentThemeIdx=(this.currentThemeIdx+1)%h.length,this.applyTheme(this.currentThemeIdx),this.logCallback&&this.logCallback(`THEME: ${h[this.currentThemeIdx].name}`))},this.handleKeyUp=t=>{t.code==="Space"&&(this.targetSpeed=.05)},this.handleResize=()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},this.handleVisibilityChange=()=>{document.visibilityState==="visible"?this.animationId||this.animate():this.stop()},e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("resize",this.handleResize),this.eventListenersAttached=!0}removeEventListeners(){if(!this.eventListenersAttached)return;const e=this.renderer.domElement;e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize),this.eventListenersAttached=!1}startSystemMessages(){this.systemMessageInterval=window.setInterval(()=>{const e=["CPU: CHILLING","GPU: RELAXED","SPEED: SLOW","MOOD: LAZY"];Math.random()>.7&&this.logCallback&&this.logCallback(e[Math.floor(Math.random()*e.length)])},_)}animate=()=>{this.animationId=requestAnimationFrame(this.animate),this.speed+=(this.targetSpeed-this.speed)*.05,this.cameraHolder.position.x+=(this.mouseX*30-this.cameraHolder.position.x)*.02,this.cameraHolder.position.y+=(-this.mouseY*15+2-this.cameraHolder.position.y)*.02,this.cameraHolder.rotation.z=-this.mouseX*.15,this.cameraHolder.rotation.x=this.mouseY*.1,this.shakeIntensity>0?(this.camera.position.x=(Math.random()-.5)*this.shakeIntensity,this.camera.position.y=(Math.random()-.5)*this.shakeIntensity,this.shakeIntensity-=.1):this.camera.position.set(0,0,0);const e=5,t=this.starField.geometry.attributes.position.array;for(let s=2;s<t.length;s+=3)t[s]+=this.speed*e,t[s]>10&&(t[s]=-1e3);this.starField.geometry.attributes.position.needsUpdate=!0,this.gridMesh.position.z+=this.speed*e,this.gridMesh.position.z>20&&(this.gridMesh.position.z=0),this.objects.forEach(s=>{s.position.z+=this.speed*e,s.rotation.x+=.005,s.rotation.y+=.005,s.position.z>10&&this.resetObject(s)}),Math.random()<U&&this.textSprites.length<W&&this.spawnTrashTalk();for(let s=this.textSprites.length-1;s>=0;s--){const i=this.textSprites[s];if(i.position.z+=this.speed*e,i.isSlap)i.material.opacity-=.01,i.scale.x+=.5,i.scale.y+=.12;else if(i.position.z>-10){const n=5-i.position.z;i.material.opacity=Math.max(0,n/15)}(i.position.z>10||i.material.opacity<=0)&&(i.material.map&&i.material.map.dispose(),i.material.dispose(),this.scene.remove(i),this.textSprites.splice(s,1))}this.renderer.render(this.scene,this.camera)};setLogCallback(e){this.logCallback=e}setThemeCallback(e){this.themeCallback=e}getCanvas(){return this.renderer.domElement}getCurrentTheme(){return h[this.currentThemeIdx]}getThemeList(){return h}start(){this.animationId||(this.setupEventListeners(),this.animate())}stop(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}dispose(){this.stop(),this.systemMessageInterval!==null&&(clearInterval(this.systemMessageInterval),this.systemMessageInterval=null),this.removeEventListeners(),this.objects.forEach(e=>{e.geometry.dispose(),e.material.dispose()}),this.textSprites.forEach(e=>{e.material.map&&e.material.map.dispose(),e.material.dispose(),this.scene.remove(e)}),this.textSprites=[],this.starField.geometry.dispose(),this.starField.material.dispose(),this.gridMesh.geometry.dispose(),this.gridMesh.material.dispose(),this.renderer.dispose()}}function X(){return[{title:"ZenVoid: Slap Edition"},{property:"og:title",content:"ZenVoid: Slap Edition"},{name:"description",content:"ZenVoid - A relaxing slap game set in a cyberpunk universe."}]}const Z={fullscreen:!0},$=b(function(){const e=d.useRef(null),t=d.useRef(null),[s,i]=d.useState(["SYSTEM: SLOW_MOTION","SLAP_MODULE: READY"]),[n,a]=d.useState("THEME: CYBERPUNK"),[l,f]=d.useState("#00ffff");return d.useEffect(()=>{if(!e.current)return;const o=new K;t.current=o,o.setLogCallback(m=>{i(p=>[m,...p].slice(0,6))}),o.setThemeCallback(m=>{a(`THEME: ${m}`);const p=o.getCurrentTheme();f(`#${p.main.toString(16).padStart(6,"0")}`)});const c=o.getCurrentTheme();return f(`#${c.main.toString(16).padStart(6,"0")}`),e.current.appendChild(o.getCanvas()),requestAnimationFrame(()=>{o.start()}),()=>{t.current&&(t.current.dispose(),t.current=null)}},[]),r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:e,style:{width:"100%",height:"100vh"}}),r.jsxs("div",{id:"ui-layer",style:{color:l},children:[r.jsxs("div",{id:"log-console",className:"tech-text",children:[r.jsx("div",{children:"SYSTEM: SLOW_MOTION"}),r.jsx("div",{children:"SLAP_MODULE: READY"}),r.jsx("div",{id:"dynamic-log",children:s.map((o,c)=>r.jsxs("div",{children:["> ",o]},c))})]}),r.jsxs("div",{id:"status-bar",className:"tech-text",children:[r.jsx("div",{children:"ENERGY"}),r.jsx("div",{className:"bar-box",children:r.jsx("div",{className:"bar-fill",style:{boxShadow:`0 0 10px ${l}`,background:l}})}),r.jsx("div",{id:"theme-name",children:n})]}),r.jsxs("div",{id:"controls-hint",className:"tech-text",children:[r.jsx("span",{className:"key",children:"滑鼠"})," 慵懶轉向 •"," ",r.jsx("span",{className:"key",style:{color:l},children:"左鍵"})," ","巨型巴掌 • ",r.jsx("span",{className:"key",children:"C"})," 換色 • ",r.jsx("span",{className:"key",children:"Space"})," 稍微快一點"]})]})]})});export{$ as default,Z as handle,X as meta};
