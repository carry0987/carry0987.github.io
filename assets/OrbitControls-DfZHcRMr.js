import{u as n,O as F,a as M,_ as R}from"./OrbitControls-CtPoMHnp.js";import{r as s}from"./chunk-WWGJGFF6-BuW-gJ52.js";const q=s.forwardRef(({makeDefault:m,camera:b,regress:d,domElement:L,enableDamping:g=!0,keyEvents:o=!1,onChange:c,onStart:a,onEnd:i,...x},C)=>{const f=n(e=>e.invalidate),O=n(e=>e.camera),w=n(e=>e.gl),_=n(e=>e.events),h=n(e=>e.setEvents),u=n(e=>e.set),j=n(e=>e.get),D=n(e=>e.performance),v=b||O,l=L||_.connected||w.domElement,t=s.useMemo(()=>new F(v),[v]);return M(()=>{t.enabled&&t.update()},-1),s.useEffect(()=>(o&&t.connect(o===!0?l:o),t.connect(l),()=>{t.dispose()}),[o,l,d,t,f]),s.useEffect(()=>{const e=r=>{f(),d&&D.regress(),c&&c(r)},p=r=>{a&&a(r)},E=r=>{i&&i(r)};return t.addEventListener("change",e),t.addEventListener("start",p),t.addEventListener("end",E),()=>{t.removeEventListener("start",p),t.removeEventListener("end",E),t.removeEventListener("change",e)}},[c,a,i,t,f,h]),s.useEffect(()=>{if(m){const e=j().controls;return u({controls:t}),()=>u({controls:e})}},[m,t]),s.createElement("primitive",R({ref:C,object:t,enableDamping:g},x))});export{q as O};
