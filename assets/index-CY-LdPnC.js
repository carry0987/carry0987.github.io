import{r as wc,z as Ff,R as Wl,a as D,p as x,w as wp}from"./chunk-FGUA77HG-BxeL2Wrr.js";import{W as If,R as Pf,j as zi,P as Tu,S as Gc,k as cc,V as Gp,l as Yp,m as qp,n as Zp,L as zu,o as Yc,N as Lp,p as Xp,q as mf,g as Bn,r as Kl,U as Au,s as qt,t as Ie,u as Vp,v as Qp,w as Wf,a as Kp,e as wu,I as Jp,x as Gu,D as kf,y as Un,z as Hn,E as pf,Q as hf,H as Fp,J as Ip,K as $f,X as ra,Y as Va,Z as Xl,_ as Ma,$ as Pp,a0 as Wp,a1 as kp,a2 as Cu,a3 as $p,a4 as e0,a5 as t0,a6 as qc,a7 as a0,a8 as gu,a9 as wn,d as Zc,aa as Ou,ab as n0,ac as Vl,M as l0,ad as i0,ae as u0,af as r0,ag as c0,ah as s0,ai as o0,aj as vf,ak as xu,al as f0,am as d0,an as m0,ao as p0,ap as h0,f as v0,aq as y0,ar as g0,as as S0,at as Sa,au as ed,av as td}from"./three.module-DZE8JPHH.js";var _e=(u=>(u.None="None",u.Road="Road",u.Residential="Residential",u.Commercial="Commercial",u.Industrial="Industrial",u.Park="Park",u))(_e||{});const ca=15,E0=2e3,b0=1e3,Oi={[_e.None]:{type:_e.None,cost:0,name:"Bulldoze",description:"Clear a tile",color:"#ef4444",popGen:0,incomeGen:0},[_e.Road]:{type:_e.Road,cost:10,name:"Road",description:"Connects buildings.",color:"#374151",popGen:0,incomeGen:0},[_e.Residential]:{type:_e.Residential,cost:100,name:"House",description:"+5 Pop/day",color:"#f87171",popGen:5,incomeGen:0},[_e.Commercial]:{type:_e.Commercial,cost:200,name:"Shop",description:"+$15/day",color:"#60a5fa",popGen:0,incomeGen:15},[_e.Industrial]:{type:_e.Industrial,cost:400,name:"Factory",description:"+$40/day",color:"#facc15",popGen:0,incomeGen:40},[_e.Park]:{type:_e.Park,cost:50,name:"Park",description:"Looks nice.",color:"#4ade80",popGen:1,incomeGen:0}};var sc={exports:{}},cn={};var yf;function _0(){return yf||(yf=1,cn.ConcurrentRoot=1,cn.ContinuousEventPriority=8,cn.DefaultEventPriority=32,cn.DiscreteEventPriority=2,cn.IdleEventPriority=268435456,cn.LegacyRoot=0,cn.NoEventPriority=0),cn}var gf;function M0(){return gf||(gf=1,sc.exports=_0()),sc.exports}var Nu=M0(),oc={exports:{}},fc={},dc={exports:{}},mc={};var Sf;function T0(){if(Sf)return mc;Sf=1;var u=wc();function l(S,M){return S===M&&(S!==0||1/S===1/M)||S!==S&&M!==M}var c=typeof Object.is=="function"?Object.is:l,r=u.useState,o=u.useEffect,d=u.useLayoutEffect,y=u.useDebugValue;function v(S,M){var N=M(),H=r({inst:{value:N,getSnapshot:M}}),Z=H[0].inst,w=H[1];return d(function(){Z.value=N,Z.getSnapshot=M,h(Z)&&w({inst:Z})},[S,N,M]),o(function(){return h(Z)&&w({inst:Z}),S(function(){h(Z)&&w({inst:Z})})},[S]),y(N),N}function h(S){var M=S.getSnapshot;S=S.value;try{var N=M();return!c(S,N)}catch{return!0}}function g(S,M){return M()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:v;return mc.useSyncExternalStore=u.useSyncExternalStore!==void 0?u.useSyncExternalStore:E,mc}var Ef;function x0(){return Ef||(Ef=1,dc.exports=T0()),dc.exports}var bf;function N0(){if(bf)return fc;bf=1;var u=wc(),l=x0();function c(g,E){return g===E&&(g!==0||1/g===1/E)||g!==g&&E!==E}var r=typeof Object.is=="function"?Object.is:c,o=l.useSyncExternalStore,d=u.useRef,y=u.useEffect,v=u.useMemo,h=u.useDebugValue;return fc.useSyncExternalStoreWithSelector=function(g,E,S,M,N){var H=d(null);if(H.current===null){var Z={hasValue:!1,value:null};H.current=Z}else Z=H.current;H=v(function(){function R(V){if(!T){if(T=!0,L=V,V=M(V),N!==void 0&&Z.hasValue){var ce=Z.value;if(N(ce,V))return I=ce}return I=V}if(ce=I,r(L,V))return ce;var Y=M(V);return N!==void 0&&N(ce,Y)?(L=V,ce):(L=V,I=Y)}var T=!1,L,I,q=S===void 0?null:S;return[function(){return R(E())},q===null?void 0:function(){return R(q())}]},[E,S,M,N]);var w=o(g,H[0],H[1]);return y(function(){Z.hasValue=!0,Z.value=w},[w]),h(w),w},fc}var _f;function R0(){return _f||(_f=1,oc.exports=N0()),oc.exports}var z0=R0();const A0=Ff(z0),Mf=u=>{let l;const c=new Set,r=(g,E)=>{const S=typeof g=="function"?g(l):g;if(!Object.is(S,l)){const M=l;l=E??(typeof S!="object"||S===null)?S:Object.assign({},l,S),c.forEach(N=>N(l,M))}},o=()=>l,v={setState:r,getState:o,getInitialState:()=>h,subscribe:g=>(c.add(g),()=>c.delete(g))},h=l=u(r,o,v);return v},C0=(u=>u?Mf(u):Mf),{useSyncExternalStoreWithSelector:O0}=A0,j0=u=>u;function D0(u,l=j0,c){const r=O0(u.subscribe,u.getState,u.getInitialState,l,c);return Wl.useDebugValue(r),r}const Tf=(u,l)=>{const c=C0(u),r=(o,d=l)=>D0(c,o,d);return Object.assign(r,c),r},ad=((u,l)=>u?Tf(u,l):Tf),U0=u=>typeof u=="object"&&typeof u.then=="function",sl=[];function nd(u,l,c=(r,o)=>r===o){if(u===l)return!0;if(!u||!l)return!1;const r=u.length;if(l.length!==r)return!1;for(let o=0;o<r;o++)if(!c(u[o],l[o]))return!1;return!0}function ld(u,l=null,c=!1,r={}){l===null&&(l=[u]);for(const d of sl)if(nd(l,d.keys,d.equal)){if(c)return;if(Object.prototype.hasOwnProperty.call(d,"error"))throw d.error;if(Object.prototype.hasOwnProperty.call(d,"response"))return r.lifespan&&r.lifespan>0&&(d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(d.remove,r.lifespan)),d.response;if(!c)throw d.promise}const o={keys:l,equal:r.equal,remove:()=>{const d=sl.indexOf(o);d!==-1&&sl.splice(d,1)},promise:(U0(u)?u:u(...l)).then(d=>{o.response=d,r.lifespan&&r.lifespan>0&&(o.timeout=setTimeout(o.remove,r.lifespan))}).catch(d=>o.error=d)};if(sl.push(o),!c)throw o.promise}const H0=(u,l,c)=>ld(u,l,!1,c),B0=(u,l,c)=>void ld(u,l,!0,c),w0=u=>{if(u===void 0||u.length===0)sl.splice(0,sl.length);else{const l=sl.find(c=>nd(u,c.keys,c.equal));l&&l.remove()}};var pc={exports:{}},hc={exports:{}},vc={exports:{}},yc={};var xf;function G0(){return xf||(xf=1,(function(u){function l(Q,fe){var pe=Q.length;Q.push(fe);e:for(;0<pe;){var ve=pe-1>>>1,he=Q[ve];if(0<o(he,fe))Q[ve]=fe,Q[pe]=he,pe=ve;else break e}}function c(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var fe=Q[0],pe=Q.pop();if(pe!==fe){Q[0]=pe;e:for(var ve=0,he=Q.length,Me=he>>>1;ve<Me;){var ye=2*(ve+1)-1,je=Q[ye],Ae=ye+1,ut=Q[Ae];if(0>o(je,pe))Ae<he&&0>o(ut,je)?(Q[ve]=ut,Q[Ae]=pe,ve=Ae):(Q[ve]=je,Q[ye]=pe,ve=ye);else if(Ae<he&&0>o(ut,pe))Q[ve]=ut,Q[Ae]=pe,ve=Ae;else break e}}return fe}function o(Q,fe){var pe=Q.sortIndex-fe.sortIndex;return pe!==0?pe:Q.id-fe.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;u.unstable_now=function(){return d.now()}}else{var y=Date,v=y.now();u.unstable_now=function(){return y.now()-v}}var h=[],g=[],E=1,S=null,M=3,N=!1,H=!1,Z=!1,w=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function L(Q){for(var fe=c(g);fe!==null;){if(fe.callback===null)r(g);else if(fe.startTime<=Q)r(g),fe.sortIndex=fe.expirationTime,l(h,fe);else break;fe=c(g)}}function I(Q){if(Z=!1,L(Q),!H)if(c(h)!==null)H=!0,re();else{var fe=c(g);fe!==null&&xe(I,fe.startTime-Q)}}var q=!1,V=-1,ce=5,Y=-1;function K(){return!(u.unstable_now()-Y<ce)}function J(){if(q){var Q=u.unstable_now();Y=Q;var fe=!0;try{e:{H=!1,Z&&(Z=!1,R(V),V=-1),N=!0;var pe=M;try{t:{for(L(Q),S=c(h);S!==null&&!(S.expirationTime>Q&&K());){var ve=S.callback;if(typeof ve=="function"){S.callback=null,M=S.priorityLevel;var he=ve(S.expirationTime<=Q);if(Q=u.unstable_now(),typeof he=="function"){S.callback=he,L(Q),fe=!0;break t}S===c(h)&&r(h),L(Q)}else r(h);S=c(h)}if(S!==null)fe=!0;else{var Me=c(g);Me!==null&&xe(I,Me.startTime-Q),fe=!1}}break e}finally{S=null,M=pe,N=!1}fe=void 0}}finally{fe?te():q=!1}}}var te;if(typeof T=="function")te=function(){T(J)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ue=be.port2;be.port1.onmessage=J,te=function(){ue.postMessage(null)}}else te=function(){w(J,0)};function re(){q||(q=!0,te())}function xe(Q,fe){V=w(function(){Q(u.unstable_now())},fe)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(Q){Q.callback=null},u.unstable_continueExecution=function(){H||N||(H=!0,re())},u.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<Q?Math.floor(1e3/Q):5},u.unstable_getCurrentPriorityLevel=function(){return M},u.unstable_getFirstCallbackNode=function(){return c(h)},u.unstable_next=function(Q){switch(M){case 1:case 2:case 3:var fe=3;break;default:fe=M}var pe=M;M=fe;try{return Q()}finally{M=pe}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(Q,fe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=M;M=Q;try{return fe()}finally{M=pe}},u.unstable_scheduleCallback=function(Q,fe,pe){var ve=u.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ve+pe:ve):pe=ve,Q){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=pe+he,Q={id:E++,callback:fe,priorityLevel:Q,startTime:pe,expirationTime:he,sortIndex:-1},pe>ve?(Q.sortIndex=pe,l(g,Q),c(h)===null&&Q===c(g)&&(Z?(R(V),V=-1):Z=!0,xe(I,pe-ve))):(Q.sortIndex=he,l(h,Q),H||N||(H=!0,re())),Q},u.unstable_shouldYield=K,u.unstable_wrapCallback=function(Q){var fe=M;return function(){var pe=M;M=fe;try{return Q.apply(this,arguments)}finally{M=pe}}}})(yc)),yc}var Nf;function id(){return Nf||(Nf=1,vc.exports=G0()),vc.exports}var Rf;function Y0(){return Rf||(Rf=1,(function(u){u.exports=function(l){function c(e,t,a,n){return new em(e,t,a,n)}function r(){}function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return e===null||typeof e!="object"?null:(e=jo&&e[jo]||e["@@iterator"],typeof e=="function"?e:null)}function y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===um?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case El:return"Fragment";case Sl:return"Portal";case Ar:return"Profiler";case Ao:return"StrictMode";case Or:return"Suspense";case jr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _n:return(e.displayName||"Context")+".Provider";case Co:return(e._context.displayName||"Context")+".Consumer";case Cr:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dr:return t=e.displayName||null,t!==null?t:y(e.type)||"Memo";case Mn:t=e._payload,e=e._init;try{return y(e(t))}catch{}}return null}function v(e){if(Ur===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ur=t&&t[1]||"",Do=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ur+e+Do}function h(e,t){if(!e||Hr)return"";Hr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Oe){var oe=Oe}Reflect.construct(e,[],se)}else{try{se.call()}catch(Oe){oe=Oe}e.call(se.prototype)}}else{try{throw Error()}catch(Oe){oe=Oe}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Oe){if(Oe&&oe&&typeof Oe.stack=="string")return[Oe.stack,oe.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),m=s[0],b=s[1];if(m&&b){var C=m.split(`
`),X=b.split(`
`);for(i=n=0;n<C.length&&!C[n].includes("DetermineComponentFrameRoot");)n++;for(;i<X.length&&!X[i].includes("DetermineComponentFrameRoot");)i++;if(n===C.length||i===X.length)for(n=C.length-1,i=X.length-1;1<=n&&0<=i&&C[n]!==X[i];)i--;for(;1<=n&&0<=i;n--,i--)if(C[n]!==X[i]){if(n!==1||i!==1)do if(n--,i--,0>i||C[n]!==X[i]){var ne=`
`+C[n].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=n&&0<=i);break}}}finally{Hr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?v(a):""}function g(e){switch(e.tag){case 26:case 27:case 5:return v(e.type);case 16:return v("Lazy");case 13:return v("Suspense");case 19:return v("SuspenseList");case 0:case 15:return e=h(e.type,!1),e;case 11:return e=h(e.type.render,!1),e;case 1:return e=h(e.type,!0),e;default:return""}}function E(e){try{var t="";do t+=g(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function S(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function M(e){if(S(e)!==e)throw Error(o(188))}function N(e){var t=e.alternate;if(!t){if(t=S(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===a)return M(i),e;if(s===n)return M(i),t;s=s.sibling}throw Error(o(188))}if(a.return!==n.return)a=i,n=s;else{for(var m=!1,b=i.child;b;){if(b===a){m=!0,a=i,n=s;break}if(b===n){m=!0,n=i,a=s;break}b=b.sibling}if(!m){for(b=s.child;b;){if(b===a){m=!0,a=s,n=i;break}if(b===n){m=!0,n=s,a=i;break}b=b.sibling}if(!m)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function H(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=H(e),t!==null)return t;e=e.sibling}return null}function Z(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=Z(e),t!==null))return t;e=e.sibling}return null}function w(e){return{current:e}}function R(e){0>_l||(e.current=Zr[_l],Zr[_l]=null,_l--)}function T(e,t){_l++,Zr[_l]=e.current,e.current=t}function L(e){return e>>>=0,e===0?32:31-(bp(e)/_p|0)|0}function I(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function q(e,t){var a=e.pendingLanes;if(a===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,m=e.warmLanes;e=e.finishedLanes!==0;var b=a&134217727;return b!==0?(a=b&~i,a!==0?n=I(a):(s&=b,s!==0?n=I(s):e||(m=b&~m,m!==0&&(n=I(m))))):(b=a&~i,b!==0?n=I(b):s!==0?n=I(s):e||(m=a&~m,m!==0&&(n=I(m)))),n===0?0:t!==0&&t!==n&&(t&i)===0&&(i=n&-n,m=t&-t,i>=m||i===32&&(m&4194176)!==0)?t:n}function V(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ce(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y(){var e=ki;return ki<<=1,(ki&4194176)===0&&(ki=128),e}function K(){var e=$i;return $i<<=1,($i&62914560)===0&&($i=4194304),e}function J(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function te(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function be(e,t,a,n,i,s){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,C=e.expirationTimes,X=e.hiddenUpdates;for(a=m&~a;0<a;){var ne=31-aa(a),se=1<<ne;b[ne]=0,C[ne]=-1;var oe=X[ne];if(oe!==null)for(X[ne]=null,ne=0;ne<oe.length;ne++){var Oe=oe[ne];Oe!==null&&(Oe.lane&=-536870913)}a&=~se}n!==0&&ue(e,n,0),s!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=s&~(m&~t))}function ue(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-aa(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194218}function re(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-aa(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function xe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Q(e){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(mi,e,void 0,(e.current.flags&128)===128)}catch{}}function fe(e){if(typeof Rp=="function"&&zp(e),na&&typeof na.setStrictMode=="function")try{na.setStrictMode(mi,e)}catch{}}function pe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function ve(e,t){if(typeof e=="object"&&e!==null){var a=uf.get(e);return a!==void 0?a:(t={value:e,source:t,stack:E(t)},uf.set(e,t),t)}return{value:e,source:t,stack:E(t)}}function he(e,t){Tl[xl++]=au,Tl[xl++]=tu,tu=e,au=t}function Me(e,t,a){ma[pa++]=tn,ma[pa++]=an,ma[pa++]=$n,$n=e;var n=tn;e=an;var i=32-aa(n)-1;n&=~(1<<i),a+=1;var s=32-aa(t)+i;if(30<s){var m=i-i%5;s=(n&(1<<m)-1).toString(32),n>>=m,i-=m,tn=1<<32-aa(t)+i|a<<i|n,an=s+e}else tn=1<<s|a<<i|n,an=e}function ye(e){e.return!==null&&(he(e,1),Me(e,1,0))}function je(e){for(;e===tu;)tu=Tl[--xl],Tl[xl]=null,au=Tl[--xl],Tl[xl]=null;for(;e===$n;)$n=ma[--pa],ma[pa]=null,an=ma[--pa],ma[pa]=null,tn=ma[--pa],ma[pa]=null}function Ae(e,t){T(xn,t),T(pi,e),T(Rt,null),e=sm(t),R(Rt),T(Rt,e)}function ut(){R(Rt),R(pi),R(xn)}function Ue(e){e.memoizedState!==null&&T(nu,e);var t=Rt.current,a=om(t,e.type);t!==a&&(T(pi,e),T(Rt,a))}function zt(e){pi.current===e&&(R(Rt),R(pi)),nu.current===e&&(R(nu),en?kn._currentValue=bl:kn._currentValue2=bl)}function Et(e){var t=Error(o(418,""));throw Ta(ve(t,e)),Vr}function fl(e,t){if(!fa)throw Error(o(175));np(e.stateNode,e.type,e.memoizedProps,t,e)||Et(e)}function dl(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 3:case 27:qa=!0;return;case 5:case 13:qa=!1;return;default:Yt=Yt.return}}function Oa(e){if(!fa||e!==Yt)return!1;if(!qe)return dl(e),qe=!0,!1;var t=!1;if(Ut?e.tag!==3&&e.tag!==27&&(e.tag!==5||Fo(e.type)&&!Wi(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||Fo(e.type)&&!Wi(e.type,e.memoizedProps))&&(t=!0),t&&Ht&&Et(e),dl(e),e.tag===13){if(!fa)throw Error(o(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ht=up(e)}else Ht=Yt?Ko(e.stateNode):null;return!0}function ja(){fa&&(Ht=Yt=null,qe=!1)}function Ta(e){za===null?za=[e]:za.push(e)}function Da(){for(var e=Nl,t=Qr=Nl=0;t<e;){var a=ha[t];ha[t++]=null;var n=ha[t];ha[t++]=null;var i=ha[t];ha[t++]=null;var s=ha[t];if(ha[t++]=null,n!==null&&i!==null){var m=n.pending;m===null?i.next=i:(i.next=m.next,m.next=i),n.pending=i}s!==0&&qn(a,i,s)}}function Qa(e,t,a,n){ha[Nl++]=e,ha[Nl++]=t,ha[Nl++]=a,ha[Nl++]=n,Qr|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Yn(e,t,a,n){return Qa(e,t,a,n),Ka(e)}function Jt(e,t){return Qa(e,null,null,t),Ka(e)}function qn(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,s=e.return;s!==null;)s.childLanes|=a,n=s.alternate,n!==null&&(n.childLanes|=a),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(i=!0)),e=s,s=s.return;i&&t!==null&&e.tag===3&&(s=e.stateNode,i=31-aa(a),s=s.hiddenUpdates,e=s[i],e===null?s[i]=[t]:e.push(t),t.lane=a|536870912)}function Ka(e){if(50<Mi)throw Mi=0,rc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function Lt(e){e!==Rl&&e.next===null&&(Rl===null?lu=Rl=e:Rl=Rl.next=e),iu=!0,Kr||(Kr=!0,$l(ml))}function Ua(e,t){if(!Jr&&iu){Jr=!0;do for(var a=!1,n=lu;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var s=0;else{var m=n.suspendedLanes,b=n.pingedLanes;s=(1<<31-aa(42|e)+1)-1,s&=i&~(m&~b),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(a=!0,on(n,s))}else s=Ge,s=q(n,n===tt?s:0),(s&3)===0||V(n,s)||(a=!0,on(n,s));n=n.next}while(a);Jr=!1}}function ml(){iu=Kr=!1;var e=0;zl!==0&&(gm()&&(e=zl),zl=0);for(var t=Ra(),a=null,n=lu;n!==null;){var i=n.next,s=Ja(n,t);s===0?(n.next=null,a===null?lu=i:a.next=i,i===null&&(Rl=a)):(a=n,(e!==0||(s&3)!==0)&&(iu=!0)),n=i}Ua(e)}function Ja(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var m=31-aa(s),b=1<<m,C=i[m];C===-1?((b&a)===0||(b&n)!==0)&&(i[m]=ce(b,t)):C<=t&&(e.expiredLanes|=b),s&=~b}if(t=tt,a=Ge,a=q(e,e===t?a:0),n=e.callbackNode,a===0||e===t&&at===2||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Lr(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||V(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Lr(n),xe(a)){case 2:case 8:a=xp;break;case 32:a=Xr;break;case 268435456:a=Np;break;default:a=Xr}return n=Ha.bind(null,e),a=eu(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Lr(n),e.callbackPriority=2,e.callbackNode=null,2}function Ha(e,t){var a=e.callbackNode;if(In()&&e.callbackNode!==a)return null;var n=Ge;return n=q(e,e===tt?n:0),n===0?null:(ro(e,n,t),Ja(e,Ra()),e.callbackNode!=null&&e.callbackNode===a?Ha.bind(null,e):null)}function on(e,t){if(In())return null;ro(e,t,!0)}function $l(e){Tm?xm(function(){(We&6)!==0?eu(lf,e):e()}):eu(lf,e)}function fn(){return zl===0&&(zl=Y()),zl}function dn(e,t){if(hi===null){var a=hi=[];Fr=0,Al=fn(),Cl={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Fr++,t.then(Fa,Fa),t}function Fa(){if(--Fr===0&&hi!==null){Cl!==null&&(Cl.status="fulfilled");var e=hi;hi=null,Al=0,Cl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ei(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}function mn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function At(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function et(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(We&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=Ka(e),qn(e,null,a),t}return Qa(e,n,t,a),Ka(e)}function sa(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194176)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,re(e,a)}}function z(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,s=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};s===null?i=s=m:s=s.next=m,a=a.next}while(a!==null);s===null?i=s=t:s=s.next=t}else i=s=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function W(){if(Ir){var e=Cl;if(e!==null)throw e}}function de(e,t,a,n){Ir=!1;var i=e.updateQueue;Nn=!1;var s=i.firstBaseUpdate,m=i.lastBaseUpdate,b=i.shared.pending;if(b!==null){i.shared.pending=null;var C=b,X=C.next;C.next=null,m===null?s=X:m.next=X,m=C;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==m&&(b===null?ne.firstBaseUpdate=X:b.next=X,ne.lastBaseUpdate=C))}if(s!==null){var se=i.baseState;m=0,ne=X=C=null,b=s;do{var oe=b.lane&-536870913,Oe=oe!==b.lane;if(Oe?(Ge&oe)===oe:(n&oe)===oe){oe!==0&&oe===Al&&(Ir=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ga=e,Ti=b;oe=t;var cl=a;switch(Ti.tag){case 1:if(ga=Ti.payload,typeof ga=="function"){se=ga.call(cl,se,oe);break e}se=ga;break e;case 3:ga.flags=ga.flags&-65537|128;case 0:if(ga=Ti.payload,oe=typeof ga=="function"?ga.call(cl,se,oe):ga,oe==null)break e;se=zr({},se,oe);break e;case 2:Nn=!0}}oe=b.callback,oe!==null&&(e.flags|=64,Oe&&(e.flags|=8192),Oe=i.callbacks,Oe===null?i.callbacks=[oe]:Oe.push(oe))}else Oe={lane:oe,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(X=ne=Oe,C=se):ne=ne.next=Oe,m|=oe;if(b=b.next,b===null){if(b=i.shared.pending,b===null)break;Oe=b,b=Oe.next,Oe.next=null,i.lastBaseUpdate=Oe,i.shared.pending=null}}while(!0);ne===null&&(C=se),i.baseState=C,i.firstBaseUpdate=X,i.lastBaseUpdate=ne,s===null&&(i.shared.lanes=0),An|=m,e.lanes=m,e.memoizedState=se}}function we(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ae(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)we(a[e],t)}function ht(e,t){if(la(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!Ap.call(t,i)||!la(e[i],t[i]))return!1}return!0}function Ft(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ln(){}function Xn(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ln,Ln),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===vi?Error(o(483)):e;default:if(typeof t.status=="string")t.then(Ln,Ln);else{if(e=tt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===vi?Error(o(483)):e}throw Ol=t,vi}}function Xt(){if(Ol===null)throw Error(o(459));var e=Ol;return Ol=null,e}function Ct(e){var t=yi;return yi+=1,jl===null&&(jl=[]),Xn(jl,e,t)}function It(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function oa(e,t){throw t.$$typeof===nm?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ba(e){var t=e._init;return t(e._payload)}function Ia(e){function t(O,A){if(e){var U=O.deletions;U===null?(O.deletions=[A],O.flags|=16):U.push(A)}}function a(O,A){if(!e)return null;for(;A!==null;)t(O,A),A=A.sibling;return null}function n(O){for(var A=new Map;O!==null;)O.key!==null?A.set(O.key,O):A.set(O.index,O),O=O.sibling;return A}function i(O,A){return O=bn(O,A),O.index=0,O.sibling=null,O}function s(O,A,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<A?(O.flags|=33554434,A):U):(O.flags|=33554434,A)):(O.flags|=1048576,A)}function m(O){return e&&O.alternate===null&&(O.flags|=33554434),O}function b(O,A,U,$){return A===null||A.tag!==6?(A=xr(U,O.mode,$),A.return=O,A):(A=i(A,U),A.return=O,A)}function C(O,A,U,$){var Se=U.type;return Se===El?ne(O,A,U.props.children,$,U.key):A!==null&&(A.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Mn&&Ba(Se)===A.type)?(A=i(A,U.props),It(A,U),A.return=O,A):(A=Fi(U.type,U.key,U.props,null,O.mode,$),It(A,U),A.return=O,A)}function X(O,A,U,$){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=Nr(U,O.mode,$),A.return=O,A):(A=i(A,U.children||[]),A.return=O,A)}function ne(O,A,U,$,Se){return A===null||A.tag!==7?(A=Pn(U,O.mode,$,Se),A.return=O,A):(A=i(A,U),A.return=O,A)}function se(O,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=xr(""+A,O.mode,U),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ii:return U=Fi(A.type,A.key,A.props,null,O.mode,U),It(U,A),U.return=O,U;case Sl:return A=Nr(A,O.mode,U),A.return=O,A;case Mn:var $=A._init;return A=$(A._payload),se(O,A,U)}if(Pi(A)||d(A))return A=Pn(A,O.mode,U,null),A.return=O,A;if(typeof A.then=="function")return se(O,Ct(A),U);if(A.$$typeof===_n)return se(O,Li(O,A),U);oa(O,A)}return null}function oe(O,A,U,$){var Se=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Se!==null?null:b(O,A,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ii:return U.key===Se?C(O,A,U,$):null;case Sl:return U.key===Se?X(O,A,U,$):null;case Mn:return Se=U._init,U=Se(U._payload),oe(O,A,U,$)}if(Pi(U)||d(U))return Se!==null?null:ne(O,A,U,$,null);if(typeof U.then=="function")return oe(O,A,Ct(U),$);if(U.$$typeof===_n)return oe(O,A,Li(O,U),$);oa(O,U)}return null}function Oe(O,A,U,$,Se){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return O=O.get(U)||null,b(A,O,""+$,Se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ii:return O=O.get($.key===null?U:$.key)||null,C(A,O,$,Se);case Sl:return O=O.get($.key===null?U:$.key)||null,X(A,O,$,Se);case Mn:var nt=$._init;return $=nt($._payload),Oe(O,A,U,$,Se)}if(Pi($)||d($))return O=O.get(U)||null,ne(A,O,$,Se,null);if(typeof $.then=="function")return Oe(O,A,U,Ct($),Se);if($.$$typeof===_n)return Oe(O,A,U,Li(A,$),Se);oa(A,$)}return null}function ga(O,A,U,$){for(var Se=null,nt=null,Te=A,Ze=A=0,xt=null;Te!==null&&Ze<U.length;Ze++){Te.index>Ze?(xt=Te,Te=null):xt=Te.sibling;var Le=oe(O,Te,U[Ze],$);if(Le===null){Te===null&&(Te=xt);break}e&&Te&&Le.alternate===null&&t(O,Te),A=s(Le,A,Ze),nt===null?Se=Le:nt.sibling=Le,nt=Le,Te=xt}if(Ze===U.length)return a(O,Te),qe&&he(O,Ze),Se;if(Te===null){for(;Ze<U.length;Ze++)Te=se(O,U[Ze],$),Te!==null&&(A=s(Te,A,Ze),nt===null?Se=Te:nt.sibling=Te,nt=Te);return qe&&he(O,Ze),Se}for(Te=n(Te);Ze<U.length;Ze++)xt=Oe(Te,O,Ze,U[Ze],$),xt!==null&&(e&&xt.alternate!==null&&Te.delete(xt.key===null?Ze:xt.key),A=s(xt,A,Ze),nt===null?Se=xt:nt.sibling=xt,nt=xt);return e&&Te.forEach(function(On){return t(O,On)}),qe&&he(O,Ze),Se}function Ti(O,A,U,$){if(U==null)throw Error(o(151));for(var Se=null,nt=null,Te=A,Ze=A=0,xt=null,Le=U.next();Te!==null&&!Le.done;Ze++,Le=U.next()){Te.index>Ze?(xt=Te,Te=null):xt=Te.sibling;var On=oe(O,Te,Le.value,$);if(On===null){Te===null&&(Te=xt);break}e&&Te&&On.alternate===null&&t(O,Te),A=s(On,A,Ze),nt===null?Se=On:nt.sibling=On,nt=On,Te=xt}if(Le.done)return a(O,Te),qe&&he(O,Ze),Se;if(Te===null){for(;!Le.done;Ze++,Le=U.next())Le=se(O,Le.value,$),Le!==null&&(A=s(Le,A,Ze),nt===null?Se=Le:nt.sibling=Le,nt=Le);return qe&&he(O,Ze),Se}for(Te=n(Te);!Le.done;Ze++,Le=U.next())Le=Oe(Te,O,Ze,Le.value,$),Le!==null&&(e&&Le.alternate!==null&&Te.delete(Le.key===null?Ze:Le.key),A=s(Le,A,Ze),nt===null?Se=Le:nt.sibling=Le,nt=Le);return e&&Te.forEach(function(Bp){return t(O,Bp)}),qe&&he(O,Ze),Se}function cl(O,A,U,$){if(typeof U=="object"&&U!==null&&U.type===El&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Ii:e:{for(var Se=U.key;A!==null;){if(A.key===Se){if(Se=U.type,Se===El){if(A.tag===7){a(O,A.sibling),$=i(A,U.props.children),$.return=O,O=$;break e}}else if(A.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Mn&&Ba(Se)===A.type){a(O,A.sibling),$=i(A,U.props),It($,U),$.return=O,O=$;break e}a(O,A);break}else t(O,A);A=A.sibling}U.type===El?($=Pn(U.props.children,O.mode,$,U.key),$.return=O,O=$):($=Fi(U.type,U.key,U.props,null,O.mode,$),It($,U),$.return=O,O=$)}return m(O);case Sl:e:{for(Se=U.key;A!==null;){if(A.key===Se)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){a(O,A.sibling),$=i(A,U.children||[]),$.return=O,O=$;break e}else{a(O,A);break}else t(O,A);A=A.sibling}$=Nr(U,O.mode,$),$.return=O,O=$}return m(O);case Mn:return Se=U._init,U=Se(U._payload),cl(O,A,U,$)}if(Pi(U))return ga(O,A,U,$);if(d(U)){if(Se=d(U),typeof Se!="function")throw Error(o(150));return U=Se.call(U),Ti(O,A,U,$)}if(typeof U.then=="function")return cl(O,A,Ct(U),$);if(U.$$typeof===_n)return cl(O,A,Li(O,U),$);oa(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(a(O,A.sibling),$=i(A,U),$.return=O,O=$):(a(O,A),$=xr(U,O.mode,$),$.return=O,O=$),m(O)):a(O,A)}return function(O,A,U,$){try{yi=0;var Se=cl(O,A,U,$);return jl=null,Se}catch(Te){if(Te===vi)throw Te;var nt=c(29,Te,null,O.mode);return nt.lanes=$,nt.return=O,nt}finally{}}}function Bi(e,t){e=rn,T(ru,e),T(Dl,t),rn=e|t.baseLanes}function ti(){T(ru,rn),T(Dl,Dl.current)}function pn(){rn=ru.current,R(Dl),R(ru)}function wa(e){var t=e.alternate;T(bt,bt.current&1),T(va,e),Za===null&&(t===null||Dl.current!==null||t.memoizedState!==null)&&(Za=e)}function hn(e){if(e.tag===22){if(T(bt,bt.current),T(va,e),Za===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Za=e)}}else Vt()}function Vt(){T(bt,bt.current),T(va,va.current)}function Re(e){R(va),Za===e&&(Za=null),R(bt)}function Vn(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gr(a)||Yr(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function rt(){throw Error(o(321))}function f(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!la(e[a],t[a]))return!1;return!0}function p(e,t,a,n,i,s){return Rn=s,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ze.H=e===null||e.memoizedState===null?al:zn,tl=!1,s=a(n,i),tl=!1,Ul&&(s=j(t,a,n,i)),_(e),s}function _(e){ze.H=La;var t=Pe!==null&&Pe.next!==null;if(Rn=0,yt=Pe=De=null,cu=!1,gi=0,Hl=null,t)throw Error(o(300));e===null||Mt||(e=e.dependencies,e!==null&&Zi(e)&&(Mt=!0))}function j(e,t,a,n){De=e;var i=0;do{if(Ul&&(Hl=null),gi=0,Ul=!1,25<=i)throw Error(o(301));if(i+=1,yt=Pe=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ze.H=nl,s=t(a,n)}while(Ul);return s}function G(){var e=ze.H,t=e.useState()[0];return t=typeof t.then=="function"?ie(t):t,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(De.flags|=1024),t}function B(){var e=su!==0;return su=0,e}function ee(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function P(e){if(cu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}cu=!1}Rn=0,yt=Pe=De=null,Ul=!1,gi=su=0,Hl=null}function k(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?De.memoizedState=yt=e:yt=yt.next=e,yt}function F(){if(Pe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=yt===null?De.memoizedState:yt.next;if(t!==null)yt=t,Pe=e;else{if(e===null)throw De.alternate===null?Error(o(467)):Error(o(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},yt===null?De.memoizedState=yt=e:yt=yt.next=e}return yt}function ie(e){var t=gi;return gi+=1,Hl===null&&(Hl=[]),e=Xn(Hl,e,t),t=De,(yt===null?t.memoizedState:yt.next)===null&&(t=t.alternate,ze.H=t===null||t.memoizedState===null?al:zn),e}function le(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ie(e);if(e.$$typeof===_n)return jt(e)}throw Error(o(438,String(e)))}function ke(e){var t=null,a=De.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=De.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Wr(),De.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=im;return t.index++,a}function me(e,t){return typeof t=="function"?t(e):t}function ge(e){var t=F();return Ne(t,Pe,e)}function Ne(e,t,a){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=a;var i=e.baseQueue,s=n.pending;if(s!==null){if(i!==null){var m=i.next;i.next=s.next,s.next=m}t.baseQueue=i=s,n.pending=null}if(s=e.baseState,i===null)e.memoizedState=s;else{t=i.next;var b=m=null,C=null,X=t,ne=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(Ge&se)===se:(Rn&se)===se){var oe=X.revertLane;if(oe===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Al&&(ne=!0);else if((Rn&oe)===oe){X=X.next,oe===Al&&(ne=!0);continue}else se={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},C===null?(b=C=se,m=s):C=C.next=se,De.lanes|=oe,An|=oe;se=X.action,tl&&a(s,se),s=X.hasEagerState?X.eagerState:a(s,se)}else oe={lane:se,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},C===null?(b=C=oe,m=s):C=C.next=oe,De.lanes|=se,An|=se;X=X.next}while(X!==null&&X!==t);if(C===null?m=s:C.next=b,!la(s,e.memoizedState)&&(Mt=!0,ne&&(a=Cl,a!==null)))throw a;e.memoizedState=s,e.baseState=m,e.baseQueue=C,n.lastRenderedState=s}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ce(e){var t=F(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,s=t.memoizedState;if(i!==null){a.pending=null;var m=i=i.next;do s=e(s,m.action),m=m.next;while(m!==i);la(s,t.memoizedState)||(Mt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),a.lastRenderedState=s}return[s,n]}function Xe(e,t,a){var n=De,i=F(),s=qe;if(s){if(a===void 0)throw Error(o(407));a=a()}else a=t();var m=!la((Pe||i).memoizedState,a);if(m&&(i.memoizedState=a,Mt=!0),i=i.queue,Zu(_t.bind(null,n,i,e),[e]),i.getSnapshot!==t||m||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,pl(9,ot.bind(null,n,i,a,t),{destroy:void 0},null),tt===null)throw Error(o(349));s||(Rn&60)!==0||Qe(n,t,a)}return a}function Qe(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=De.updateQueue,t===null?(t=Wr(),De.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function ot(e,t,a,n){t.value=a,t.getSnapshot=n,Ke(t)&&Pt(e)}function _t(e,t,a){return a(function(){Ke(t)&&Pt(e)})}function Ke(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!la(e,a)}catch{return!0}}function Pt(e){var t=Jt(e,2);t!==null&&Gt(t,e,2)}function Je(e){var t=k();if(typeof e=="function"){var a=e;if(e=a(),tl){fe(!0);try{a()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:me,lastRenderedState:e},t}function pt(e,t,a,n){return e.baseState=a,Ne(e,Pe,typeof n=="function"?n:me)}function xa(e,t,a,n,i){if(Yi(e))throw Error(o(485));if(e=t.action,e!==null){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){s.listeners.push(m)}};ze.T!==null?a(!0):s.isTransition=!1,n(s),a=t.pending,a===null?(s.next=t.pending=s,vn(t,s)):(s.next=a.next,t.pending=a.next=s)}}function vn(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var s=ze.T,m={};ze.T=m;try{var b=a(i,n),C=ze.S;C!==null&&C(m,b),Bt(e,t,b)}catch(X){vt(e,t,X)}finally{ze.T=s}}else try{s=a(i,n),Bt(e,t,s)}catch(X){vt(e,t,X)}}function Bt(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ve(e,t,n)},function(n){return vt(e,t,n)}):Ve(e,t,a)}function Ve(e,t,a){t.status="fulfilled",t.value=a,$e(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,vn(e,a)))}function vt(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,$e(t),t=t.next;while(t!==n)}e.action=null}function $e(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ye(e,t){return t}function wt(e,t){if(qe){var a=tt.formState;if(a!==null){e:{var n=De;if(qe){if(Ht){var i=Pm(Ht,qa);if(i){Ht=Ko(i),n=Wm(i);break e}}Et(n)}n=!1}n&&(t=a[0])}}a=k(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:t},a.queue=n,a=vs.bind(null,De,n),n.dispatch=a,n=Je(!1);var s=Qu.bind(null,De,!1,n.queue);return n=k(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=xa.bind(null,De,i,s,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function Ga(e){var t=F();return Ot(t,Pe,e)}function Ot(e,t,a){t=Ne(e,t,Ye)[0],e=ge(me)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?ie(t):t;var n=F(),i=n.queue,s=i.dispatch;return a!==n.memoizedState&&(De.flags|=2048,pl(9,Ya.bind(null,i,a),{destroy:void 0},null)),[t,s,e]}function Ya(e,t){e.action=t}function as(e){var t=F(),a=Pe;if(a!==null)return Ot(t,a,e);F(),t=t.memoizedState,a=F();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function pl(e,t,a,n){return e={tag:e,create:t,inst:a,deps:n,next:null},t=De.updateQueue,t===null&&(t=Wr(),De.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function ns(){return F().memoizedState}function wi(e,t,a,n){var i=k();De.flags|=e,i.memoizedState=pl(1|t,a,{destroy:void 0},n===void 0?null:n)}function Gi(e,t,a,n){var i=F();n=n===void 0?null:n;var s=i.memoizedState.inst;Pe!==null&&n!==null&&f(n,Pe.memoizedState.deps)?i.memoizedState=pl(t,a,s,n):(De.flags|=e,i.memoizedState=pl(1|t,a,s,n))}function ls(e,t){wi(8390656,8,e,t)}function Zu(e,t){Gi(2048,8,e,t)}function is(e,t){return Gi(4,2,e,t)}function us(e,t){return Gi(4,4,e,t)}function rs(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cs(e,t,a){a=a!=null?a.concat([e]):null,Gi(4,4,rs.bind(null,t,e),a)}function Lu(){}function ss(e,t){var a=F();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&f(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function os(e,t){var a=F();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&f(t,n[1]))return n[0];if(n=e(),tl){fe(!0);try{e()}finally{fe(!1)}}return a.memoizedState=[n,t],n}function Xu(e,t,a){return a===void 0||(Rn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=uo(),De.lanes|=e,An|=e,a)}function fs(e,t,a,n){return la(a,t)?a:Dl.current!==null?(e=Xu(e,a,n),la(e,t)||(Mt=!0),e):(Rn&42)===0?(Mt=!0,e.memoizedState=a):(e=uo(),De.lanes|=e,An|=e,t)}function ds(e,t,a,n,i){var s=Wn();Kt(s!==0&&8>s?s:8);var m=ze.T,b={};ze.T=b,Qu(e,!1,t,a);try{var C=i(),X=ze.S;if(X!==null&&X(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var ne=ei(C,n);ai(e,t,ne,ea(e))}else ai(e,t,n,ea(e))}catch(se){ai(e,t,{then:function(){},status:"rejected",reason:se},ea())}finally{Kt(s),ze.T=m}}function ms(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:bl,baseState:bl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:me,lastRenderedState:bl},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:me,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vu(){return jt(kn)}function ps(){return F().memoizedState}function hs(){return F().memoizedState}function wd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ea();e=At(a);var n=et(t,e,a);n!==null&&(Gt(n,t,a),sa(n,t,a)),t={cache:lr()},e.payload=t;return}t=t.return}}function Gd(e,t,a){var n=ea();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Yi(e)?ys(t,a):(a=Yn(e,t,a,n),a!==null&&(Gt(a,e,n),gs(a,t,n)))}function vs(e,t,a){var n=ea();ai(e,t,a,n)}function ai(e,t,a,n){var i={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))ys(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var m=t.lastRenderedState,b=s(m,a);if(i.hasEagerState=!0,i.eagerState=b,la(b,m))return Qa(e,t,i,0),tt===null&&Da(),!1}catch{}finally{}if(a=Yn(e,t,i,n),a!==null)return Gt(a,e,n),gs(a,t,n),!0}return!1}function Qu(e,t,a,n){if(n={lane:2,revertLane:fn(),action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e)){if(t)throw Error(o(479))}else t=Yn(e,a,n,2),t!==null&&Gt(t,e,2)}function Yi(e){var t=e.alternate;return e===De||t!==null&&t===De}function ys(e,t){Ul=cu=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function gs(e,t,a){if((a&4194176)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,re(e,a)}}function Ku(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:zr({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}function Ss(e,t,a,n,i,s,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,m):t.prototype&&t.prototype.isPureReactComponent?!ht(a,n)||!ht(i,s):!0}function Es(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&kr.enqueueReplaceState(t,t.state,null)}function Qn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=zr({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function qi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function bs(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ju(e,t,a){return a=At(a),a.tag=3,a.payload={element:null},a.callback=function(){qi(e,t)},a}function _s(e){return e=At(e),e.tag=3,e}function Ms(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var s=n.value;e.payload=function(){return i(s)},e.callback=function(){bs(t,a,n)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){bs(t,a,n),typeof i!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})})}function Yd(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&li(t,a,i,!0),a=va.current,a!==null){switch(a.tag){case 13:return Za===null?br():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===uu?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Mr(e,n,i)),!1;case 22:return a.flags|=65536,n===uu?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Mr(e,n,i)),!1}throw Error(o(435,a.tag))}return Mr(e,n,i),br(),!1}if(qe)return t=va.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==Vr&&(e=Error(o(422),{cause:n}),Ta(ve(e,a)))):(n!==Vr&&(t=Error(o(423),{cause:n}),Ta(ve(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=ve(n,a),i=Ju(e.stateNode,n,i),z(e,i),mt!==4&&(mt=2)),!1;var s=Error(o(520),{cause:n});if(s=ve(s,a),Ei===null?Ei=[s]:Ei.push(s),mt!==4&&(mt=2),t===null)return!0;n=ve(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=Ju(a.stateNode,n,e),z(a,e),!1;case 1:if(t=a.type,s=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Cn===null||!Cn.has(s))))return a.flags|=65536,i&=-i,a.lanes|=i,i=_s(i),Ms(i,e,a,n),z(a,i),!1}a=a.return}while(a!==null);return!1}function Nt(e,t,a,n){t.child=e===null?rf(t,null,a,n):el(t,e.child,a,n)}function Ts(e,t,a,n,i){a=a.render;var s=t.ref;if("ref"in n){var m={};for(var b in n)b!=="ref"&&(m[b]=n[b])}else m=n;return Kn(t),n=p(e,t,a,m,s,i),b=B(),e!==null&&!Mt?(ee(e,t,i),Pa(e,t,i)):(qe&&b&&ye(t),t.flags|=1,Nt(e,t,n,i),t.child)}function xs(e,t,a,n,i){if(e===null){var s=a.type;return typeof s=="function"&&!Tr(s)&&s.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=s,Ns(e,t,s,n,i)):(e=Fi(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!tr(e,i)){var m=s.memoizedProps;if(a=a.compare,a=a!==null?a:ht,a(m,n)&&e.ref===t.ref)return Pa(e,t,i)}return t.flags|=1,e=bn(s,n),e.ref=t.ref,e.return=t,t.child=e}function Ns(e,t,a,n,i){if(e!==null){var s=e.memoizedProps;if(ht(s,n)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=n=s,tr(e,i))(e.flags&131072)!==0&&(Mt=!0);else return t.lanes=e.lanes,Pa(e,t,i)}return Fu(e,t,a,n,i)}function Rs(e,t,a){var n=t.pendingProps,i=n.children,s=(t.stateNode._pendingVisibility&2)!==0,m=e!==null?e.memoizedState:null;if(ni(e,t),n.mode==="hidden"||s){if((t.flags&128)!==0){if(n=m!==null?m.baseLanes|a:a,e!==null){for(i=t.child=e.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return zs(e,t,n,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xi(t,m!==null?m.cachePool:null),m!==null?Bi(t,m):ti(),hn(t);else return t.lanes=t.childLanes=536870912,zs(e,t,m!==null?m.baseLanes|a:a,a)}else m!==null?(Xi(t,m.cachePool),Bi(t,m),Vt(),t.memoizedState=null):(e!==null&&Xi(t,null),ti(),Vt());return Nt(e,t,i,a),t.child}function zs(e,t,a,n){var i=ir();return i=i===null?null:{parent:en?ft._currentValue:ft._currentValue2,pool:i},t.memoizedState={baseLanes:a,cachePool:i},e!==null&&Xi(t,null),ti(),hn(t),e!==null&&li(e,t,n,!0),null}function ni(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=2097664)}}function Fu(e,t,a,n,i){return Kn(t),a=p(e,t,a,n,void 0,i),n=B(),e!==null&&!Mt?(ee(e,t,i),Pa(e,t,i)):(qe&&n&&ye(t),t.flags|=1,Nt(e,t,a,i),t.child)}function As(e,t,a,n,i,s){return Kn(t),t.updateQueue=null,a=j(t,n,a,i),_(e),n=B(),e!==null&&!Mt?(ee(e,t,s),Pa(e,t,s)):(qe&&n&&ye(t),t.flags|=1,Nt(e,t,a,s),t.child)}function Cs(e,t,a,n,i){if(Kn(t),t.stateNode===null){var s=Ml,m=a.contextType;typeof m=="object"&&m!==null&&(s=jt(m)),s=new a(n,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=kr,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=n,s.state=t.memoizedState,s.refs={},mn(t),m=a.contextType,s.context=typeof m=="object"&&m!==null?jt(m):Ml,s.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Ku(t,a,m,n),s.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(m=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),m!==s.state&&kr.enqueueReplaceState(s,s.state,null),de(t,n,s,i),W(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){s=t.stateNode;var b=t.memoizedProps,C=Qn(a,b);s.props=C;var X=s.context,ne=a.contextType;m=Ml,typeof ne=="object"&&ne!==null&&(m=jt(ne));var se=a.getDerivedStateFromProps;ne=typeof se=="function"||typeof s.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ne||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(b||X!==m)&&Es(t,s,n,m),Nn=!1;var oe=t.memoizedState;s.state=oe,de(t,n,s,i),W(),X=t.memoizedState,b||oe!==X||Nn?(typeof se=="function"&&(Ku(t,a,se,n),X=t.memoizedState),(C=Nn||Ss(t,a,C,n,oe,X,m))?(ne||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=X),s.props=n,s.state=X,s.context=m,n=C):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Zn(e,t),m=t.memoizedProps,ne=Qn(a,m),s.props=ne,se=t.pendingProps,oe=s.context,X=a.contextType,C=Ml,typeof X=="object"&&X!==null&&(C=jt(X)),b=a.getDerivedStateFromProps,(X=typeof b=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m!==se||oe!==C)&&Es(t,s,n,C),Nn=!1,oe=t.memoizedState,s.state=oe,de(t,n,s,i),W();var Oe=t.memoizedState;m!==se||oe!==Oe||Nn||e!==null&&e.dependencies!==null&&Zi(e.dependencies)?(typeof b=="function"&&(Ku(t,a,b,n),Oe=t.memoizedState),(ne=Nn||Ss(t,a,ne,n,oe,Oe,C)||e!==null&&e.dependencies!==null&&Zi(e.dependencies))?(X||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,Oe,C),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,Oe,C)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||m===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=Oe),s.props=n,s.state=Oe,s.context=C,n=ne):(typeof s.componentDidUpdate!="function"||m===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,ni(e,t),n=(t.flags&128)!==0,s||n?(s=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&n?(t.child=el(t,e.child,null,i),t.child=el(t,null,a,i)):Nt(e,t,a,i),t.memoizedState=s.state,e=t.child):e=Pa(e,t,i),e}function Os(e,t,a,n){return ja(),t.flags|=256,Nt(e,t,a,n),t.child}function Iu(e){return{baseLanes:e,cachePool:ws()}}function Pu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ya),e}function js(e,t,a){var n=t.pendingProps,i=!1,s=(t.flags&128)!==0,m;if((m=s)||(m=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),m&&(i=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(i?wa(t):Vt(),qe){var b=Ht,C;(C=b)&&(b=ap(b,qa),b!==null?(t.memoizedState={dehydrated:b,treeContext:$n!==null?{id:tn,overflow:an}:null,retryLane:536870912},C=c(18,null,null,0),C.stateNode=b,C.return=t,t.child=C,Yt=t,Ht=null,C=!0):C=!1),C||Et(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Yr(b)?t.lanes=16:t.lanes=536870912,null;Re(t)}return b=n.children,n=n.fallback,i?(Vt(),i=t.mode,b=ku({mode:"hidden",children:b},i),n=Pn(n,i,a,null),b.return=t,n.return=t,b.sibling=n,t.child=b,i=t.child,i.memoizedState=Iu(a),i.childLanes=Pu(e,m,a),t.memoizedState=$r,n):(wa(t),Wu(t,b))}if(C=e.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(s)t.flags&256?(wa(t),t.flags&=-257,t=$u(e,t,a)):t.memoizedState!==null?(Vt(),t.child=e.child,t.flags|=128,t=null):(Vt(),i=n.fallback,b=t.mode,n=ku({mode:"visible",children:n.children},b),i=Pn(i,b,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,el(t,e.child,null,a),n=t.child,n.memoizedState=Iu(a),n.childLanes=Pu(e,m,a),t.memoizedState=$r,t=i);else if(wa(t),Yr(b))m=Fm(b).digest,n=Error(o(419)),n.stack="",n.digest=m,Ta({value:n,source:null,stack:null}),t=$u(e,t,a);else if(Mt||li(e,t,a,!1),m=(a&e.childLanes)!==0,Mt||m){if(m=tt,m!==null){if(n=a&-a,(n&42)!==0)n=1;else switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=64;break;case 268435456:n=134217728;break;default:n=0}if(n=(n&(m.suspendedLanes|a))!==0?0:n,n!==0&&n!==C.retryLane)throw C.retryLane=n,Jt(e,n),Gt(m,e,n),sf}Gr(b)||br(),t=$u(e,t,a)}else Gr(b)?(t.flags|=128,t.child=e.child,t=Wd.bind(null,e),Im(b,t),t=null):(e=C.treeContext,fa&&(Ht=$m(b),Yt=t,qe=!0,za=null,qa=!1,e!==null&&(ma[pa++]=tn,ma[pa++]=an,ma[pa++]=$n,tn=e.id,an=e.overflow,$n=t)),t=Wu(t,n.children),t.flags|=4096);return t}return i?(Vt(),i=n.fallback,b=t.mode,C=e.child,s=C.sibling,n=bn(C,{mode:"hidden",children:n.children}),n.subtreeFlags=C.subtreeFlags&31457280,s!==null?i=bn(s,i):(i=Pn(i,b,a,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,b=e.child.memoizedState,b===null?b=Iu(a):(C=b.cachePool,C!==null?(s=en?ft._currentValue:ft._currentValue2,C=C.parent!==s?{parent:s,pool:s}:C):C=ws(),b={baseLanes:b.baseLanes|a,cachePool:C}),i.memoizedState=b,i.childLanes=Pu(e,m,a),t.memoizedState=$r,n):(wa(t),a=e.child,e=a.sibling,a=bn(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Wu(e,t){return t=ku({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ku(e,t){return Mo(e,t,0,null)}function $u(e,t,a){return el(t,e.child,null,a),e=Wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ds(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ar(e.return,t,a)}function er(e,t,a,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=a,s.tailMode=i)}function Us(e,t,a){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Nt(e,t,n.children,a),n=bt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ds(e,a,t);else if(e.tag===19)Ds(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(T(bt,n),i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Vn(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),er(t,!1,i,a,s);break;case"backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vn(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}er(t,!0,a,null,s);break;case"together":er(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(li(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=bn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=bn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function tr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zi(e)))}function qd(e,t,a){switch(t.tag){case 3:Ae(t,t.stateNode.containerInfo),yn(t,ft,e.memoizedState.cache),ja();break;case 27:case 5:Ue(t);break;case 4:Ae(t,t.stateNode.containerInfo);break;case 10:yn(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(wa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?js(e,t,a):(wa(t),e=Pa(e,t,a),e!==null?e.sibling:null);wa(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(li(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Us(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),T(bt,bt.current),n)break;return null;case 22:case 23:return t.lanes=0,Rs(e,t,a);case 24:yn(t,ft,e.memoizedState.cache)}return Pa(e,t,a)}function Hs(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Mt=!0;else{if(!tr(e,a)&&(t.flags&128)===0)return Mt=!1,qd(e,t,a);Mt=(e.flags&131072)!==0}else Mt=!1,qe&&(t.flags&1048576)!==0&&Me(t,au,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,typeof n=="function")Tr(n)?(e=Qn(n,e),t.tag=1,t=Cs(null,t,n,e,a)):(t.tag=0,t=Fu(null,t,n,e,a));else{if(n!=null){if(i=n.$$typeof,i===Cr){t.tag=11,t=Ts(null,t,n,e,a);break e}else if(i===Dr){t.tag=14,t=xs(null,t,n,e,a);break e}}throw t=y(n)||n,Error(o(306,t,""))}}return t;case 0:return Fu(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=Qn(n,t.pendingProps),Cs(e,t,n,i,a);case 3:e:{if(Ae(t,t.stateNode.containerInfo),e===null)throw Error(o(387));var s=t.pendingProps;i=t.memoizedState,n=i.element,Zn(e,t),de(t,s,null,a);var m=t.memoizedState;if(s=m.cache,yn(t,ft,s),s!==i.cache&&nr(t,[ft],a,!0),W(),s=m.element,fa&&i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Os(e,t,s,a);break e}else if(s!==n){n=ve(Error(o(424)),t),Ta(n),t=Os(e,t,s,a);break e}else for(fa&&(Ht=km(t.stateNode.containerInfo),Yt=t,qe=!0,za=null,qa=!0),a=rf(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ja(),s===n){t=Pa(e,t,a);break e}Nt(e,t,s,a)}t=t.child}return t;case 26:if(da)return ni(e,t),e===null?(a=Po(t.type,null,t.pendingProps,null))?t.memoizedState=a:qe||(t.stateNode=pp(t.type,t.pendingProps,xn.current,t)):t.memoizedState=Po(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Ut)return Ue(t),e===null&&Ut&&qe&&(n=t.stateNode=af(t.type,t.pendingProps,xn.current,Rt.current,!1),Yt=t,qa=!0,Ht=Jo(n)),n=t.pendingProps.children,e!==null||qe?Nt(e,t,n,a):t.child=el(t,null,n,a),ni(e,t),t.child;case 5:return e===null&&qe&&(fp(t.type,t.pendingProps,Rt.current),(i=n=Ht)&&(n=ep(n,t.type,t.pendingProps,qa),n!==null?(t.stateNode=n,Yt=t,Ht=Jo(n),qa=!1,i=!0):i=!1),i||Et(t)),Ue(t),i=t.type,s=t.pendingProps,m=e!==null?e.memoizedProps:null,n=s.children,Wi(i,s)?n=null:m!==null&&Wi(i,m)&&(t.flags|=32),t.memoizedState!==null&&(i=p(e,t,G,null,null,a),en?kn._currentValue=i:kn._currentValue2=i),ni(e,t),Nt(e,t,n,a),t.child;case 6:return e===null&&qe&&(dp(t.pendingProps,Rt.current),(e=a=Ht)&&(a=tp(a,t.pendingProps,qa),a!==null?(t.stateNode=a,Yt=t,Ht=null,e=!0):e=!1),e||Et(t)),null;case 13:return js(e,t,a);case 4:return Ae(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=el(t,null,n,a):Nt(e,t,n,a),t.child;case 11:return Ts(e,t,t.type,t.pendingProps,a);case 7:return Nt(e,t,t.pendingProps,a),t.child;case 8:return Nt(e,t,t.pendingProps.children,a),t.child;case 12:return Nt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,yn(t,t.type,n.value),Nt(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Kn(t),i=jt(i),n=n(i),t.flags|=1,Nt(e,t,n,a),t.child;case 14:return xs(e,t,t.type,t.pendingProps,a);case 15:return Ns(e,t,t.type,t.pendingProps,a);case 19:return Us(e,t,a);case 22:return Rs(e,t,a);case 24:return Kn(t),n=jt(ft),e===null?(i=ir(),i===null&&(i=tt,s=lr(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=a),i=s),t.memoizedState={parent:n,cache:i},mn(t),yn(t,ft,i)):((e.lanes&a)!==0&&(Zn(e,t),de(t,null,null,a),W()),i=e.memoizedState,s=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),yn(t,ft,n)):(n=s.cache,yn(t,ft,n),n!==i.cache&&nr(t,[ft],a,!0))),Nt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function yn(e,t,a){en?(T(ou,t._currentValue),t._currentValue=a):(T(ou,t._currentValue2),t._currentValue2=a)}function Wa(e){var t=ou.current;en?e._currentValue=t:e._currentValue2=t,R(ou)}function ar(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function nr(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){var m=i.child;s=s.firstContext;e:for(;s!==null;){var b=s;s=i;for(var C=0;C<t.length;C++)if(b.context===t[C]){s.lanes|=a,b=s.alternate,b!==null&&(b.lanes|=a),ar(s.return,a,e),n||(m=null);break e}s=b.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(o(341));m.lanes|=a,s=m.alternate,s!==null&&(s.lanes|=a),ar(m,a,e),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===e){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function li(e,t,a,n){e=null;for(var i=t,s=!1;i!==null;){if(!s){if((i.flags&524288)!==0)s=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(o(387));if(m=m.memoizedProps,m!==null){var b=i.type;la(i.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(i===nu.current){if(m=i.alternate,m===null)throw Error(o(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(kn):e=[kn])}i=i.return}e!==null&&nr(t,e,a,n),t.flags|=262144}function Zi(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!la(en?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Kn(e){ll=e,nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jt(e){return Bs(ll,e)}function Li(e,t){return ll===null&&Kn(e),Bs(e,t)}function Bs(e,t){var a=en?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:a,next:null},nn===null){if(e===null)throw Error(o(308));nn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else nn=nn.next=t;return a}function lr(){return{controller:new Op,data:new Map,refCount:0}}function ii(e){e.refCount--,e.refCount===0&&jp(Dp,function(){e.controller.abort()})}function ir(){var e=il.current;return e!==null?e:tt.pooledCache}function Xi(e,t){t===null?T(il,il.current):T(il,t.pool)}function ws(){var e=ir();return e===null?null:{parent:en?ft._currentValue:ft._currentValue2,pool:e}}function Wt(e){e.flags|=4}function Gs(e,t){if(e!==null&&e.child===t.child)return!1;if((t.flags&16)!==0)return!0;for(e=t.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function ur(e,t,a,n){if(Dt)for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)Br(e,a.stateNode);else if(!(a.tag===4||Ut&&a.tag===27)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}else if(Tn)for(var i=t.child;i!==null;){if(i.tag===5){var s=i.stateNode;a&&n&&(s=Vo(s,i.type,i.memoizedProps)),Br(e,s)}else if(i.tag===6)s=i.stateNode,a&&n&&(s=Qo(s,i.memoizedProps)),Br(e,s);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)s=i.child,s!==null&&(s.return=i),ur(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Ys(e,t,a,n){if(Tn)for(var i=t.child;i!==null;){if(i.tag===5){var s=i.stateNode;a&&n&&(s=Vo(s,i.type,i.memoizedProps)),Lo(e,s)}else if(i.tag===6)s=i.stateNode,a&&n&&(s=Qo(s,i.memoizedProps)),Lo(e,s);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)s=i.child,s!==null&&(s.return=i),Ys(e,i,!(i.memoizedProps!==null&&i.memoizedProps.mode==="manual"),!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function qs(e,t){if(Tn&&Gs(e,t)){e=t.stateNode;var a=e.containerInfo,n=Zo();Ys(n,t,!1,!1),e.pendingChildren=n,Wt(t),Jm(a,n)}}function rr(e,t,a,n){if(Dt)e.memoizedProps!==n&&Wt(t);else if(Tn){var i=e.stateNode,s=e.memoizedProps;if((e=Gs(e,t))||s!==n){var m=Rt.current;s=Km(i,a,s,n,!e,null),s===i?t.stateNode=i:(Ho(s,a,n,m)&&Wt(t),t.stateNode=s,e?ur(s,t,!1,!1):Wt(t))}else t.stateNode=i}}function cr(e,t,a){if(Em(t,a)){if(e.flags|=16777216,!Go(t,a))if(fo())e.flags|=8192;else throw Ol=uu,Pr}else e.flags&=-16777217}function Zs(e,t){if(vp(t)){if(e.flags|=16777216,!tf(t))if(fo())e.flags|=8192;else throw Ol=uu,Pr}else e.flags&=-16777217}function Vi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?K():536870912,e.lanes|=t,Gl|=t)}function ui(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&31457280,n|=i.flags&31457280,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Zd(e,t,a){var n=t.pendingProps;switch(je(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return ct(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Wa(ft),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?Wt(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,za!==null&&(Sr(za),za=null))),qs(e,t),ct(t),null;case 26:if(da){a=t.type;var i=t.memoizedState;return e===null?(Wt(t),i!==null?(ct(t),Zs(t,i)):(ct(t),cr(t,a,n))):i?i!==e.memoizedState?(Wt(t),ct(t),Zs(t,i)):(ct(t),t.flags&=-16777217):(Dt?e.memoizedProps!==n&&Wt(t):rr(e,t,a,n),ct(t),cr(t,a,n)),null}case 27:if(Ut){if(zt(t),a=xn.current,i=t.type,e!==null&&t.stateNode!=null)Dt?e.memoizedProps!==n&&Wt(t):rr(e,t,i,n);else{if(!n){if(t.stateNode===null)throw Error(o(166));return ct(t),null}e=Rt.current,Oa(t)?fl(t,e):(e=af(i,n,a,e,!0),t.stateNode=e,Wt(t))}return ct(t),null}case 5:if(zt(t),a=t.type,e!==null&&t.stateNode!=null)rr(e,t,a,n);else{if(!n){if(t.stateNode===null)throw Error(o(166));return ct(t),null}e=Rt.current,Oa(t)?fl(t,e):(i=mm(a,n,xn.current,e,t),ur(i,t,!1,!1),t.stateNode=i,Ho(i,a,n,e)&&Wt(t))}return ct(t),cr(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)a=e.memoizedProps,Dt?a!==n&&Wt(t):Tn&&(a!==n?(t.stateNode=Bo(n,xn.current,Rt.current,t),Wt(t)):t.stateNode=e.stateNode);else{if(typeof n!="string"&&t.stateNode===null)throw Error(o(166));if(e=xn.current,a=Rt.current,Oa(t)){if(!fa)throw Error(o(176));if(e=t.stateNode,a=t.memoizedProps,n=null,i=Yt,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}lp(e,a,t,n)||Et(t)}else t.stateNode=Bo(n,e,a,t)}return ct(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Oa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(!fa)throw Error(o(344));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ip(i,t)}else ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else za!==null&&(Sr(za),za=null),i=!0;if(!i)return t.flags&256?(Re(t),t):(Re(t),null)}if(Re(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var s=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Vi(t,t.updateQueue),ct(t),null;case 4:return ut(),qs(e,t),e===null&&vm(t.stateNode.containerInfo),ct(t),null;case 10:return Wa(t.type),ct(t),null;case 19:if(R(bt),i=t.memoizedState,i===null)return ct(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)ui(i,!1);else{if(mt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=Vn(e),s!==null){for(t.flags|=128,ui(i,!1),e=s.updateQueue,t.updateQueue=e,Vi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)_o(a,e),a=a.sibling;return T(bt,bt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ra()>bi&&(t.flags|=128,n=!0,ui(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vn(s),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Vi(t,e),ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!qe)return ct(t),null}else 2*Ra()-i.renderingStartTime>bi&&a!==536870912&&(t.flags|=128,n=!0,ui(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ra(),t.sibling=null,e=bt.current,T(bt,n?e&1|2:e&1),t):(ct(t),null);case 22:case 23:return Re(t),pn(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),a=t.updateQueue,a!==null&&Vi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&R(il),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Wa(ft),ct(t),null;case 25:return null}throw Error(o(156,t.tag))}function Ld(e,t){switch(je(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wa(ft),ut(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return zt(t),null;case 13:if(Re(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return R(bt),null;case 4:return ut(),null;case 10:return Wa(t.type),null;case 22:case 23:return Re(t),pn(),e!==null&&R(il),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wa(ft),null;case 25:return null;default:return null}}function Ls(e,t){switch(je(t),t.tag){case 3:Wa(ft),ut();break;case 26:case 27:case 5:zt(t);break;case 4:ut();break;case 13:Re(t);break;case 19:R(bt);break;case 10:Wa(t.type);break;case 22:case 23:Re(t),pn(),e!==null&&R(il);break;case 24:Wa(ft)}}function ri(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var s=a.create,m=a.inst;n=s(),m.destroy=n}a=a.next}while(a!==i)}}catch(b){Fe(t,t.return,b)}}function gn(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){var m=n.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,i=t;var C=a;try{b()}catch(X){Fe(i,C,X)}}}n=n.next}while(n!==s)}}catch(X){Fe(t,t.return,X)}}function Xs(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ae(t,a)}catch(n){Fe(e,e.return,n)}}}function Vs(e,t,a){a.props=Qn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Fe(e,t,n)}}function Jn(e,t){try{var a=e.ref;if(a!==null){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=oi(n);break;default:i=n}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(s){Fe(e,t,s)}}function kt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){Fe(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Fe(e,t,i)}else a.current=null}function Qs(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{Hm(n,t,a,e)}catch(i){Fe(e,e.return,i)}}function Ks(e,t,a){try{Bm(e.stateNode,e.type,a,t,e)}catch(n){Fe(e,e.return,n)}}function Js(e){return e.tag===5||e.tag===3||(da?e.tag===26:!1)||(Ut?e.tag===27:!1)||e.tag===4}function sr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Js(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!Ut||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function or(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?Gm(a,e,t):Dm(a,e);else if(!(n===4||Ut&&n===27)&&(e=e.child,e!==null))for(or(e,t,a),e=e.sibling;e!==null;)or(e,t,a),e=e.sibling}function Qi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?wm(a,e,t):jm(a,e);else if(!(n===4||Ut&&n===27)&&(e=e.child,e!==null))for(Qi(e,t,a),e=e.sibling;e!==null;)Qi(e,t,a),e=e.sibling}function Fs(e,t,a){e=e.containerInfo;try{Xo(e,a)}catch(n){Fe(t,t.return,n)}}function Xd(e,t){for(fm(e.containerInfo),Tt=t;Tt!==null;)if(e=Tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tt=t;else for(;Tt!==null;){e=Tt;var a=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&a!==null){t=void 0;var n=e,i=a.memoizedProps;a=a.memoizedState;var s=n.stateNode;try{var m=Qn(n.type,i,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(m,a),s.__reactInternalSnapshotBeforeUpdate=t}catch(b){Fe(n,n.return,b)}}break;case 3:(t&1024)!==0&&Dt&&Qm(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}return m=df,df=!1,m}function Is(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ka(e,a),n&4&&ri(5,a);break;case 1:if(ka(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){Fe(a,a.return,b)}else{var i=Qn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Fe(a,a.return,b)}}n&64&&Xs(a),n&512&&Jn(a,a.return);break;case 3:if(ka(e,a),n&64&&(n=a.updateQueue,n!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=oi(a.child.stateNode);break;case 1:e=a.child.stateNode}try{ae(n,e)}catch(b){Fe(a,a.return,b)}}break;case 26:if(da){ka(e,a),n&512&&Jn(a,a.return);break}case 27:case 5:ka(e,a),t===null&&n&4&&Qs(a),n&512&&Jn(a,a.return);break;case 12:ka(e,a);break;case 13:ka(e,a),n&4&&Ws(e,a);break;case 22:if(i=a.memoizedState!==null||ln,!i){t=t!==null&&t.memoizedState!==null||dt;var s=ln,m=dt;ln=i,(dt=t)&&!m?Sn(e,a,(a.subtreeFlags&8772)!==0):ka(e,a),ln=s,dt=m}n&512&&(a.memoizedProps.mode==="manual"?Jn(a,a.return):kt(a,a.return));break;default:ka(e,a)}}function Ps(e){var t=e.alternate;t!==null&&(e.alternate=null,Ps(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Sm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Na(e,t,a){for(a=a.child;a!==null;)fr(e,t,a),a=a.sibling}function fr(e,t,a){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(mi,a)}catch{}switch(a.tag){case 26:if(da){dt||kt(a,t),Na(e,t,a),a.memoizedState?ko(a.memoizedState):a.stateNode&&ef(a.stateNode);break}case 27:if(Ut){dt||kt(a,t);var n=gt,i=ia;gt=a.stateNode,Na(e,t,a),Ep(a.stateNode),gt=n,ia=i;break}case 5:dt||kt(a,t);case 6:if(Dt){if(n=gt,i=ia,gt=null,Na(e,t,a),gt=n,ia=i,gt!==null)if(ia)try{qm(gt,a.stateNode)}catch(s){Fe(a,t,s)}else try{Ym(gt,a.stateNode)}catch(s){Fe(a,t,s)}}else Na(e,t,a);break;case 18:Dt&&gt!==null&&(ia?op(gt,a.stateNode):sp(gt,a.stateNode));break;case 4:Dt?(n=gt,i=ia,gt=a.stateNode.containerInfo,ia=!0,Na(e,t,a),gt=n,ia=i):(Tn&&Fs(a.stateNode,a,Zo()),Na(e,t,a));break;case 0:case 11:case 14:case 15:dt||gn(2,a,t),dt||gn(4,a,t),Na(e,t,a);break;case 1:dt||(kt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Vs(a,t,n)),Na(e,t,a);break;case 21:Na(e,t,a);break;case 22:dt||kt(a,t),dt=(n=dt)||a.memoizedState!==null,Na(e,t,a),dt=n;break;default:Na(e,t,a)}}function Ws(e,t){if(fa&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cp(e)}catch(a){Fe(t,t.return,a)}}function Vd(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ff),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ff),t;default:throw Error(o(435,e.tag))}}function dr(e,t){var a=Vd(e);t.forEach(function(n){var i=kd.bind(null,e,n);a.has(n)||(a.add(n),n.then(i,i))})}function Qt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],s=e,m=t;if(Dt){var b=m;e:for(;b!==null;){switch(b.tag){case 27:case 5:gt=b.stateNode,ia=!1;break e;case 3:gt=b.stateNode.containerInfo,ia=!0;break e;case 4:gt=b.stateNode.containerInfo,ia=!0;break e}b=b.return}if(gt===null)throw Error(o(160));fr(s,m,i),gt=null,ia=!1}else fr(s,m,i);s=i.alternate,s!==null&&(s.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ks(t,e),t=t.sibling}function ks(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),$t(e),n&4&&(gn(3,e,e.return),ri(3,e),gn(5,e,e.return));break;case 1:Qt(t,e),$t(e),n&512&&(dt||a===null||kt(a,a.return)),n&64&&ln&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:if(da){var i=Aa;Qt(t,e),$t(e),n&512&&(dt||a===null||kt(a,a.return)),n&4&&(n=a!==null?a.memoizedState:null,t=e.memoizedState,a===null?t===null?e.stateNode===null?e.stateNode=mp(i,e.type,e.memoizedProps,e):$o(i,e.type,e.stateNode):e.stateNode=Wo(i,t,e.memoizedProps):n!==t?(n===null?a.stateNode!==null&&ef(a.stateNode):ko(n),t===null?$o(i,e.type,e.stateNode):Wo(i,t,e.memoizedProps)):t===null&&e.stateNode!==null&&Ks(e,e.memoizedProps,a.memoizedProps));break}case 27:if(Ut&&n&4&&e.alternate===null){i=e.stateNode;var s=e.memoizedProps;try{gp(i),Sp(e.type,s,i,e)}catch(ne){Fe(e,e.return,ne)}}case 5:if(Qt(t,e),$t(e),n&512&&(dt||a===null||kt(a,a.return)),Dt){if(e.flags&32){t=e.stateNode;try{qo(t)}catch(ne){Fe(e,e.return,ne)}}n&4&&e.stateNode!=null&&(t=e.memoizedProps,Ks(e,t,a!==null?a.memoizedProps:t)),n&1024&&(ec=!0)}break;case 6:if(Qt(t,e),$t(e),n&4&&Dt){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,a=a!==null?a.memoizedProps:n,t=e.stateNode;try{Um(t,a,n)}catch(ne){Fe(e,e.return,ne)}}break;case 3:if(da?(hp(),i=Aa,Aa=qr(t.containerInfo),Qt(t,e),Aa=i):Qt(t,e),$t(e),n&4){if(Dt&&fa&&a!==null&&a.memoizedState.isDehydrated)try{rp(t.containerInfo)}catch(ne){Fe(e,e.return,ne)}if(Tn){n=t.containerInfo,a=t.pendingChildren;try{Xo(n,a)}catch(ne){Fe(e,e.return,ne)}}}ec&&(ec=!1,$s(e));break;case 4:da?(a=Aa,Aa=qr(e.stateNode.containerInfo),Qt(t,e),$t(e),Aa=a):(Qt(t,e),$t(e)),n&4&&Tn&&Fs(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Qt(t,e),$t(e);break;case 13:Qt(t,e),$t(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lc=Ra()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,dr(e,n)));break;case 22:n&512&&(dt||a===null||kt(a,a.return)),i=e.memoizedState!==null;var m=a!==null&&a.memoizedState!==null,b=ln,C=dt;if(ln=b||i,dt=C||m,Qt(t,e),dt=C,ln=b,$t(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,n&8192&&(t._visibility=i?t._visibility&-2:t._visibility|1,i&&(t=ln||dt,a===null||m||t||hl(e)),Dt&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){e:if(a=null,Dt)for(t=e;;){if(t.tag===5||da&&t.tag===26||Ut&&t.tag===27){if(a===null){m=a=t;try{s=m.stateNode,i?Zm(s):Xm(m.stateNode,m.memoizedProps)}catch(ne){Fe(m,m.return,ne)}}}else if(t.tag===6){if(a===null){m=t;try{var X=m.stateNode;i?Lm(X):Vm(X,m.memoizedProps)}catch(ne){Fe(m,m.return,ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,dr(e,a))));break;case 19:Qt(t,e),$t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,dr(e,n)));break;case 21:break;default:Qt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{if(Dt&&(!Ut||e.tag!==27)){e:{for(var a=e.return;a!==null;){if(Js(a)){var n=a;break e}a=a.return}throw Error(o(160))}switch(n.tag){case 27:if(Ut){var i=n.stateNode,s=sr(e);Qi(e,s,i);break}case 5:var m=n.stateNode;n.flags&32&&(qo(m),n.flags&=-33);var b=sr(e);Qi(e,b,m);break;case 3:case 4:var C=n.stateNode.containerInfo,X=sr(e);or(e,X,C);break;default:throw Error(o(161))}}}catch(ne){Fe(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $s(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$s(t),t.tag===5&&t.flags&1024&&Mm(t.stateNode),e=e.sibling}}function ka(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Is(e,t.alternate,t),t=t.sibling}function hl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gn(4,t,t.return),hl(t);break;case 1:kt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Vs(t,t.return,a),hl(t);break;case 26:case 27:case 5:kt(t,t.return),hl(t);break;case 22:kt(t,t.return),t.memoizedState===null&&hl(t);break;default:hl(t)}e=e.sibling}}function Sn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,s=t,m=s.flags;switch(s.tag){case 0:case 11:case 15:Sn(i,s,a),ri(4,s);break;case 1:if(Sn(i,s,a),n=s,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(X){Fe(n,n.return,X)}if(n=s,i=n.updateQueue,i!==null){var b=n.stateNode;try{var C=i.shared.hiddenCallbacks;if(C!==null)for(i.shared.hiddenCallbacks=null,i=0;i<C.length;i++)we(C[i],b)}catch(X){Fe(n,n.return,X)}}a&&m&64&&Xs(s),Jn(s,s.return);break;case 26:case 27:case 5:Sn(i,s,a),a&&n===null&&m&4&&Qs(s),Jn(s,s.return);break;case 12:Sn(i,s,a);break;case 13:Sn(i,s,a),a&&m&4&&Ws(i,s);break;case 22:s.memoizedState===null&&Sn(i,s,a),Jn(s,s.return);break;default:Sn(i,s,a)}t=t.sibling}}function mr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ii(a))}function pr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ii(e))}function En(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eo(e,t,a,n),t=t.sibling}function eo(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:En(e,t,a,n),i&2048&&ri(9,t);break;case 3:En(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ii(e)));break;case 12:if(i&2048){En(e,t,a,n),e=t.stateNode;try{var s=t.memoizedProps,m=s.id,b=s.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Fe(t,t.return,C)}}else En(e,t,a,n);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?En(e,t,a,n):ci(e,t):s._visibility&4?En(e,t,a,n):(s._visibility|=4,vl(e,t,a,n,(t.subtreeFlags&10256)!==0)),i&2048&&mr(t.alternate,t);break;case 24:En(e,t,a,n),i&2048&&pr(t.alternate,t);break;default:En(e,t,a,n)}}function vl(e,t,a,n,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,m=t,b=a,C=n,X=m.flags;switch(m.tag){case 0:case 11:case 15:vl(s,m,b,C,i),ri(8,m);break;case 23:break;case 22:var ne=m.stateNode;m.memoizedState!==null?ne._visibility&4?vl(s,m,b,C,i):ci(s,m):(ne._visibility|=4,vl(s,m,b,C,i)),i&&X&2048&&mr(m.alternate,m);break;case 24:vl(s,m,b,C,i),i&&X&2048&&pr(m.alternate,m);break;default:vl(s,m,b,C,i)}t=t.sibling}}function ci(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:ci(a,n),i&2048&&mr(n.alternate,n);break;case 24:ci(a,n),i&2048&&pr(n.alternate,n);break;default:ci(a,n)}t=t.sibling}}function Fn(e){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)to(e),e=e.sibling}function to(e){switch(e.tag){case 26:Fn(e),e.flags&Bl&&(e.memoizedState!==null?yp(Aa,e.memoizedState,e.memoizedProps):Yo(e.type,e.memoizedProps));break;case 5:Fn(e),e.flags&Bl&&Yo(e.type,e.memoizedProps);break;case 3:case 4:if(da){var t=Aa;Aa=qr(e.stateNode.containerInfo),Fn(e),Aa=t}else Fn(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Bl,Bl=16777216,Fn(e),Bl=t):Fn(e));break;default:Fn(e)}}function ao(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function si(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Tt=n,lo(n,e)}ao(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)no(e),e=e.sibling}function no(e){switch(e.tag){case 0:case 11:case 15:si(e),e.flags&2048&&gn(9,e,e.return);break;case 3:si(e);break;case 12:si(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,Ki(e)):si(e);break;default:si(e)}}function Ki(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Tt=n,lo(n,e)}ao(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:gn(8,t,t.return),Ki(t);break;case 22:a=t.stateNode,a._visibility&4&&(a._visibility&=-5,Ki(t));break;default:Ki(t)}e=e.sibling}}function lo(e,t){for(;Tt!==null;){var a=Tt;switch(a.tag){case 0:case 11:case 15:gn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:ii(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Tt=n;else e:for(a=e;Tt!==null;){n=Tt;var i=n.sibling,s=n.return;if(Ps(n),n===a){Tt=null;break e}if(i!==null){i.return=s,Tt=i;break e}Tt=s}}}function hr(e){var t=wo(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(o(364));return t}if(e=Nm(e),e===null)throw Error(o(362));return e.stateNode.current}function vr(e,t){var a=e.tag;switch(t.$$typeof){case fu:if(e.type===t.value)return!0;break;case du:e:{for(t=t.value,e=[e,0],a=0;a<e.length;){var n=e[a++],i=n.tag,s=e[a++],m=t[s];if(i!==5&&i!==26&&i!==27||!di(n)){for(;m!=null&&vr(n,m);)s++,m=t[s];if(s===t.length){t=!0;break e}else for(n=n.child;n!==null;)e.push(n,s),n=n.sibling}}t=!1}return t;case mu:if((a===5||a===26||a===27)&&Am(e.stateNode,t.value))return!0;break;case hu:if((a===5||a===6||a===26||a===27)&&(e=zm(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case pu:if((a===5||a===26||a===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function yr(e){switch(e.$$typeof){case fu:return"<"+(y(e.value)||"Unknown")+">";case du:return":has("+(yr(e)||"")+")";case mu:return'[role="'+e.value+'"]';case hu:return'"'+e.value+'"';case pu:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function io(e,t){var a=[];e=[e,0];for(var n=0;n<e.length;){var i=e[n++],s=i.tag,m=e[n++],b=t[m];if(s!==5&&s!==26&&s!==27||!di(i)){for(;b!=null&&vr(i,b);)m++,b=t[m];if(m===t.length)a.push(i);else for(i=i.child;i!==null;)e.push(i,m),i=i.sibling}}return a}function gr(e,t){if(!fi)throw Error(o(363));e=hr(e),e=io(e,t),t=[],e=Array.from(e);for(var a=0;a<e.length;){var n=e[a++],i=n.tag;if(i===5||i===26||i===27)di(n)||t.push(n.stateNode);else for(n=n.child;n!==null;)e.push(n),n=n.sibling}return t}function ea(){if((We&2)!==0&&Ge!==0)return Ge&-Ge;if(ze.T!==null){var e=Al;return e!==0?e:fn()}return ym()}function uo(){ya===0&&(ya=(Ge&536870912)===0||qe?Y():536870912);var e=va.current;return e!==null&&(e.flags|=32),ya}function Gt(e,t,a){(e===tt&&at===2||e.cancelPendingCommit!==null)&&(yl(e,0),$a(e,Ge,ya,!1)),te(e,a),((We&2)===0||e!==tt)&&(e===tt&&((We&2)===0&&(ul|=a),mt===4&&$a(e,Ge,ya,!1)),Lt(e))}function ro(e,t,a){if((We&6)!==0)throw Error(o(327));var n=!a&&(t&60)===0&&(t&e.expiredLanes)===0||V(e,t),i=n?Jd(e,t):_r(e,t,!0),s=n;do{if(i===0){wl&&!n&&$a(e,t,0,!1);break}else if(i===6)$a(e,t,0,!un);else{if(a=e.current.alternate,s&&!Qd(a)){i=_r(e,t,!1),s=!1;continue}if(i===2){if(s=t,e.errorRecoveryDisabledLanes&s)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;i=Ei;var C=fa&&b.current.memoizedState.isDehydrated;if(C&&(yl(b,m).flags|=256),m=_r(b,m,!1),m!==2){if(tc&&!C){b.errorRecoveryDisabledLanes|=s,ul|=s,i=4;break e}s=Xa,Xa=i,s!==null&&Sr(s)}i=m}if(s=!1,i!==2)continue}}if(i===1){yl(e,0),$a(e,t,0,!0);break}e:{switch(n=e,i){case 0:case 1:throw Error(o(345));case 4:if((t&4194176)===t){$a(n,t,ya,!un);break e}break;case 2:Xa=null;break;case 3:case 5:break;default:throw Error(o(329))}if(n.finishedWork=a,n.finishedLanes=t,(t&62914560)===t&&(s=lc+300-Ra(),10<s)){if($a(n,t,ya,!un),q(n,0)!==0)break e;n.timeoutHandle=pm(co.bind(null,n,a,Xa,vu,nc,t,ya,ul,Gl,un,2,-0,0),s);break e}co(n,a,Xa,vu,nc,t,ya,ul,Gl,un,0,-0,0)}}break}while(!0);Lt(e)}function Sr(e){Xa===null?Xa=e:Xa.push.apply(Xa,e)}function co(e,t,a,n,i,s,m,b,C,X,ne,se,oe){var Oe=t.subtreeFlags;if((Oe&8192||(Oe&16785408)===16785408)&&(bm(),to(t),t=_m(),t!==null)){e.cancelPendingCommit=t(go.bind(null,e,a,n,i,m,b,C,1,se,oe)),$a(e,s,m,!X);return}go(e,a,n,i,m,b,C,ne,se,oe)}function Qd(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],s=i.getSnapshot;i=i.value;try{if(!la(s(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $a(e,t,a,n){t&=~ac,t&=~ul,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var s=31-aa(i),m=1<<s;n[s]=-1,i&=~m}a!==0&&ue(e,a,t)}function so(){return(We&6)===0?(Ua(0),!1):!0}function Er(){if(Be!==null){if(at===0)var e=Be.return;else e=Be,nn=ll=null,P(e),jl=null,yi=0,e=Be;for(;e!==null;)Ls(e.alternate,e),e=e.return;Be=null}}function yl(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==wr&&(e.timeoutHandle=wr,hm(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Er(),tt=e,Be=a=bn(e.current,null),Ge=t,at=0,ua=null,un=!1,wl=V(e,t),tc=!1,Gl=ya=ac=ul=An=mt=0,Xa=Ei=null,nc=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-aa(n),s=1<<i;t|=e[i],n&=~s}return rn=t,Da(),a}function oo(e,t){De=null,ze.H=La,t===vi?(t=Xt(),at=3):t===Pr?(t=Xt(),at=4):at=t===sf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ua=t,Be===null&&(mt=1,qi(e,ve(t,e.current)))}function fo(){var e=va.current;return e===null?!0:(Ge&4194176)===Ge?Za===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===Za:!1}function mo(){var e=ze.H;return ze.H=La,e===null?La:e}function po(){var e=ze.A;return ze.A=Up,e}function br(){mt=4,un||(Ge&4194176)!==Ge&&va.current!==null||(wl=!0),(An&134217727)===0&&(ul&134217727)===0||tt===null||$a(tt,Ge,ya,!1)}function _r(e,t,a){var n=We;We|=2;var i=mo(),s=po();(tt!==e||Ge!==t)&&(vu=null,yl(e,t)),t=!1;var m=mt;e:do try{if(at!==0&&Be!==null){var b=Be,C=ua;switch(at){case 8:Er(),m=6;break e;case 3:case 2:case 6:va.current===null&&(t=!0);var X=at;if(at=0,ua=null,gl(e,b,C,X),a&&wl){m=0;break e}break;default:X=at,at=0,ua=null,gl(e,b,C,X)}}Kd(),m=mt;break}catch(ne){oo(e,ne)}while(!0);return t&&e.shellSuspendCounter++,nn=ll=null,We=n,ze.H=i,ze.A=s,Be===null&&(tt=null,Ge=0,Da()),m}function Kd(){for(;Be!==null;)ho(Be)}function Jd(e,t){var a=We;We|=2;var n=mo(),i=po();tt!==e||Ge!==t?(vu=null,bi=Ra()+500,yl(e,t)):wl=V(e,t);e:do try{if(at!==0&&Be!==null){t=Be;var s=ua;t:switch(at){case 1:at=0,ua=null,gl(e,t,s,1);break;case 2:if(Ft(s)){at=0,ua=null,vo(t);break}t=function(){at===2&&tt===e&&(at=7),Lt(e)},s.then(t,t);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Ft(s)?(at=0,ua=null,vo(t)):(at=0,ua=null,gl(e,t,s,7));break;case 5:var m=null;switch(Be.tag){case 26:m=Be.memoizedState;case 5:case 27:var b=Be,C=b.type,X=b.pendingProps;if(m?tf(m):Go(C,X)){at=0,ua=null;var ne=b.sibling;if(ne!==null)Be=ne;else{var se=b.return;se!==null?(Be=se,Ji(se)):Be=null}break t}}at=0,ua=null,gl(e,t,s,5);break;case 6:at=0,ua=null,gl(e,t,s,6);break;case 8:Er(),mt=6;break e;default:throw Error(o(462))}}Fd();break}catch(oe){oo(e,oe)}while(!0);return nn=ll=null,ze.H=n,ze.A=i,We=a,Be!==null?0:(tt=null,Ge=0,Da(),mt)}function Fd(){for(;Be!==null&&!Mp();)ho(Be)}function ho(e){var t=Hs(e.alternate,e,rn);e.memoizedProps=e.pendingProps,t===null?Ji(e):Be=t}function vo(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=As(a,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=As(a,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:P(t);default:Ls(a,t),t=Be=_o(t,rn),t=Hs(a,t,rn)}e.memoizedProps=e.pendingProps,t===null?Ji(e):Be=t}function gl(e,t,a,n){nn=ll=null,P(t),jl=null,yi=0;var i=t.return;try{if(Yd(e,i,t,a,Ge)){mt=1,qi(e,ve(a,e.current)),Be=null;return}}catch(s){if(i!==null)throw Be=i,s;mt=1,qi(e,ve(a,e.current)),Be=null;return}t.flags&32768?(qe||n===1?e=!0:wl||(Ge&536870912)!==0?e=!1:(un=e=!0,(n===2||n===3||n===6)&&(n=va.current,n!==null&&n.tag===13&&(n.flags|=16384))),yo(t,e)):Ji(t)}function Ji(e){var t=e;do{if((t.flags&32768)!==0){yo(t,un);return}e=t.return;var a=Zd(t.alternate,t,rn);if(a!==null){Be=a;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);mt===0&&(mt=5)}function yo(e,t){do{var a=Ld(e.alternate,e);if(a!==null){a.flags&=32767,Be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Be=e;return}Be=e=a}while(e!==null);mt=6,Be=null}function go(e,t,a,n,i,s,m,b,C,X){var ne=ze.T,se=Wn();try{Kt(2),ze.T=null,Id(e,t,a,n,se,i,s,m,b,C,X)}finally{ze.T=ne,Kt(se)}}function Id(e,t,a,n,i,s,m,b){do In();while(rl!==null);if((We&6)!==0)throw Error(o(327));var C=e.finishedWork;if(n=e.finishedLanes,C===null)return null;if(e.finishedWork=null,e.finishedLanes=0,C===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var X=C.lanes|C.childLanes;if(X|=Qr,be(e,n,X,s,m,b),e===tt&&(Be=tt=null,Ge=0),(C.subtreeFlags&10256)===0&&(C.flags&10256)===0||yu||(yu=!0,ic=X,uc=a,$d(Xr,function(){return In(),null})),a=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||a?(a=ze.T,ze.T=null,s=Wn(),Kt(2),m=We,We|=4,Xd(e,C),ks(C,e),dm(e.containerInfo),e.current=C,Is(e,C.alternate,C),Tp(),We=m,Kt(s),ze.T=a):e.current=C,yu?(yu=!1,rl=e,_i=n):So(e,X),X=e.pendingLanes,X===0&&(Cn=null),Q(C.stateNode),Lt(e),t!==null)for(i=e.onRecoverableError,C=0;C<t.length;C++)X=t[C],i(X.value,{componentStack:X.stack});return(_i&3)!==0&&In(),X=e.pendingLanes,(n&4194218)!==0&&(X&42)!==0?e===rc?Mi++:(Mi=0,rc=e):Mi=0,Ua(0),null}function So(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ii(t)))}function In(){if(rl!==null){var e=rl,t=ic;ic=0;var a=xe(_i),n=32>a?32:a;a=ze.T;var i=Wn();try{if(Kt(n),ze.T=null,rl===null)var s=!1;else{n=uc,uc=null;var m=rl,b=_i;if(rl=null,_i=0,(We&6)!==0)throw Error(o(331));var C=We;if(We|=4,no(m.current),eo(m,m.current,b,n),We=C,Ua(0,!1),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(mi,m)}catch{}s=!0}return s}finally{Kt(i),ze.T=a,So(e,t)}}return!1}function Eo(e,t,a){t=ve(a,t),t=Ju(e.stateNode,t,2),e=et(e,t,2),e!==null&&(te(e,2),Lt(e))}function Fe(e,t,a){if(e.tag===3)Eo(e,e,a);else for(;t!==null;){if(t.tag===3){Eo(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cn===null||!Cn.has(n))){e=ve(a,e),a=_s(2),n=et(t,a,2),n!==null&&(Ms(a,n,t,e),te(n,2),Lt(n));break}}t=t.return}}function Mr(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Hp;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(tc=!0,i.add(a),e=Pd.bind(null,e,t,a),t.then(e,e))}function Pd(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,tt===e&&(Ge&a)===a&&(mt===4||mt===3&&(Ge&62914560)===Ge&&300>Ra()-lc?(We&2)===0&&yl(e,0):ac|=a,Gl===Ge&&(Gl=0)),Lt(e)}function bo(e,t){t===0&&(t=K()),e=Jt(e,t),e!==null&&(te(e,t),Lt(e))}function Wd(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),bo(e,a)}function kd(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(t),bo(e,a)}function $d(e,t){return eu(e,t)}function em(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bn(e,t){var a=e.alternate;return a===null?(a=c(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function _o(e,t){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fi(e,t,a,n,i,s){var m=0;if(n=e,typeof e=="function")Tr(e)&&(m=1);else if(typeof e=="string")m=da&&Ut?Io(e,a,Rt.current)?26:nf(e)?27:5:da?Io(e,a,Rt.current)?26:5:Ut&&nf(e)?27:5;else e:switch(e){case El:return Pn(a.children,i,s,t);case Ao:m=8,i|=24;break;case Ar:return e=c(12,a,t,i|2),e.elementType=Ar,e.lanes=s,e;case Or:return e=c(13,a,t,i),e.elementType=Or,e.lanes=s,e;case jr:return e=c(19,a,t,i),e.elementType=jr,e.lanes=s,e;case Oo:return Mo(a,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lm:case _n:m=10;break e;case Co:m=9;break e;case Cr:m=11;break e;case Dr:m=14;break e;case Mn:m=16,n=null;break e}m=29,a=Error(o(130,e===null?"null":typeof e,"")),n=null}return t=c(m,a,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Pn(e,t,a,n){return e=c(7,e,n,t),e.lanes=a,e}function Mo(e,t,a,n){e=c(22,e,n,t),e.elementType=Oo,e.lanes=a;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=i._current;if(s===null)throw Error(o(456));if((i._pendingVisibility&2)===0){var m=Jt(s,2);m!==null&&(i._pendingVisibility|=2,Gt(m,s,2))}},attach:function(){var s=i._current;if(s===null)throw Error(o(456));if((i._pendingVisibility&2)!==0){var m=Jt(s,2);m!==null&&(i._pendingVisibility&=-3,Gt(m,s,2))}}};return e.stateNode=i,e}function xr(e,t,a){return e=c(6,e,null,t),e.lanes=a,e}function Nr(e,t,a){return t=c(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tm(e,t,a,n,i,s,m,b){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wr,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.hiddenUpdates=J(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function To(e,t,a,n,i,s,m,b,C,X,ne,se){return e=new tm(e,t,a,m,b,C,X,se),t=1,s===!0&&(t|=24),s=c(3,null,null,t),e.current=s,s.stateNode=e,t=lr(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:a,cache:t},mn(s),e}function xo(e){return e?(e=Ml,e):Ml}function No(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=N(t),e=e!==null?H(e):null,e===null?null:oi(e.stateNode)}function Ro(e,t,a,n,i,s){i=xo(i),n.context===null?n.context=i:n.pendingContext=i,n=At(t),n.payload={element:a},s=s===void 0?null:s,s!==null&&(n.callback=s),a=et(e,n,t),a!==null&&(Gt(a,e,t),sa(a,e,t))}function zo(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Rr(e,t){zo(e,t),(e=e.alternate)&&zo(e,t)}var He={},am=wc(),ta=id(),zr=Object.assign,nm=Symbol.for("react.element"),Ii=Symbol.for("react.transitional.element"),Sl=Symbol.for("react.portal"),El=Symbol.for("react.fragment"),Ao=Symbol.for("react.strict_mode"),Ar=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),Co=Symbol.for("react.consumer"),_n=Symbol.for("react.context"),Cr=Symbol.for("react.forward_ref"),Or=Symbol.for("react.suspense"),jr=Symbol.for("react.suspense_list"),Dr=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),Oo=Symbol.for("react.offscreen"),im=Symbol.for("react.memo_cache_sentinel"),jo=Symbol.iterator,um=Symbol.for("react.client.reference"),ze=am.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ur,Do,Hr=!1,Pi=Array.isArray,rm=l.rendererVersion,cm=l.rendererPackageName,Uo=l.extraDevToolsConfig,oi=l.getPublicInstance,sm=l.getRootHostContext,om=l.getChildHostContext,fm=l.prepareForCommit,dm=l.resetAfterCommit,mm=l.createInstance,Br=l.appendInitialChild,Ho=l.finalizeInitialChildren,Wi=l.shouldSetTextContent,Bo=l.createTextInstance,pm=l.scheduleTimeout,hm=l.cancelTimeout,wr=l.noTimeout,en=l.isPrimaryRenderer;l.warnsIfNotActing;var Dt=l.supportsMutation,Tn=l.supportsPersistence,fa=l.supportsHydration,wo=l.getInstanceFromNode;l.beforeActiveInstanceBlur,l.afterActiveInstanceBlur;var vm=l.preparePortalMount;l.prepareScopeUpdate,l.getInstanceFromScope;var Kt=l.setCurrentUpdatePriority,Wn=l.getCurrentUpdatePriority,ym=l.resolveUpdatePriority;l.resolveEventType,l.resolveEventTimeStamp;var gm=l.shouldAttemptEagerTransition,Sm=l.detachDeletedInstance;l.requestPostPaintCallback;var Em=l.maySuspendCommit,Go=l.preloadInstance,bm=l.startSuspendingCommit,Yo=l.suspendInstance,_m=l.waitForCommitToBeReady,bl=l.NotPendingTransition,kn=l.HostTransitionContext,Mm=l.resetFormInstance;l.bindToConsole;var Tm=l.supportsMicrotasks,xm=l.scheduleMicrotask,fi=l.supportsTestSelectors,Nm=l.findFiberRoot,Rm=l.getBoundingRect,zm=l.getTextContent,di=l.isHiddenSubtree,Am=l.matchAccessibilityRole,Cm=l.setFocusIfFocusable,Om=l.setupIntersectionObserver,jm=l.appendChild,Dm=l.appendChildToContainer,Um=l.commitTextUpdate,Hm=l.commitMount,Bm=l.commitUpdate,wm=l.insertBefore,Gm=l.insertInContainerBefore,Ym=l.removeChild,qm=l.removeChildFromContainer,qo=l.resetTextContent,Zm=l.hideInstance,Lm=l.hideTextInstance,Xm=l.unhideInstance,Vm=l.unhideTextInstance,Qm=l.clearContainer,Km=l.cloneInstance,Zo=l.createContainerChildSet,Lo=l.appendChildToContainerChildSet,Jm=l.finalizeContainerChildren,Xo=l.replaceContainerChildren,Vo=l.cloneHiddenInstance,Qo=l.cloneHiddenTextInstance,Gr=l.isSuspenseInstancePending,Yr=l.isSuspenseInstanceFallback,Fm=l.getSuspenseInstanceFallbackErrorDetails,Im=l.registerSuspenseInstanceRetry,Pm=l.canHydrateFormStateMarker,Wm=l.isFormStateMarkerMatching,Ko=l.getNextHydratableSibling,Jo=l.getFirstHydratableChild,km=l.getFirstHydratableChildWithinContainer,$m=l.getFirstHydratableChildWithinSuspenseInstance,ep=l.canHydrateInstance,tp=l.canHydrateTextInstance,ap=l.canHydrateSuspenseInstance,np=l.hydrateInstance,lp=l.hydrateTextInstance,ip=l.hydrateSuspenseInstance,up=l.getNextHydratableInstanceAfterSuspenseInstance,rp=l.commitHydratedContainer,cp=l.commitHydratedSuspenseInstance,sp=l.clearSuspenseBoundary,op=l.clearSuspenseBoundaryFromContainer,Fo=l.shouldDeleteUnhydratedTailInstances;l.diffHydratedPropsForDevWarnings,l.diffHydratedTextForDevWarnings,l.describeHydratableInstanceForDevWarnings;var fp=l.validateHydratableInstance,dp=l.validateHydratableTextInstance,da=l.supportsResources,Io=l.isHostHoistableType,qr=l.getHoistableRoot,Po=l.getResource,Wo=l.acquireResource,ko=l.releaseResource,mp=l.hydrateHoistable,$o=l.mountHoistable,ef=l.unmountHoistable,pp=l.createHoistableInstance,hp=l.prepareToCommitHoistables,vp=l.mayResourceSuspendCommit,tf=l.preloadResource,yp=l.suspendResource,Ut=l.supportsSingletons,af=l.resolveSingletonInstance,gp=l.clearSingleton,Sp=l.acquireSingletonInstance,Ep=l.releaseSingletonInstance,nf=l.isHostSingletonType,Zr=[],_l=-1,Ml={},aa=Math.clz32?Math.clz32:L,bp=Math.log,_p=Math.LN2,ki=128,$i=4194304,eu=ta.unstable_scheduleCallback,Lr=ta.unstable_cancelCallback,Mp=ta.unstable_shouldYield,Tp=ta.unstable_requestPaint,Ra=ta.unstable_now,lf=ta.unstable_ImmediatePriority,xp=ta.unstable_UserBlockingPriority,Xr=ta.unstable_NormalPriority,Np=ta.unstable_IdlePriority,Rp=ta.log,zp=ta.unstable_setDisableYieldValue,mi=null,na=null,la=typeof Object.is=="function"?Object.is:pe,uf=new WeakMap,Tl=[],xl=0,tu=null,au=0,ma=[],pa=0,$n=null,tn=1,an="",Rt=w(null),pi=w(null),xn=w(null),nu=w(null),Yt=null,Ht=null,qe=!1,za=null,qa=!1,Vr=Error(o(519)),ha=[],Nl=0,Qr=0,lu=null,Rl=null,Kr=!1,iu=!1,Jr=!1,zl=0,hi=null,Fr=0,Al=0,Cl=null,Nn=!1,Ir=!1,Ap=Object.prototype.hasOwnProperty,vi=Error(o(460)),Pr=Error(o(474)),uu={then:function(){}},Ol=null,jl=null,yi=0,el=Ia(!0),rf=Ia(!1),Dl=w(null),ru=w(0),va=w(null),Za=null,bt=w(0),Rn=0,De=null,Pe=null,yt=null,cu=!1,Ul=!1,tl=!1,su=0,gi=0,Hl=null,Cp=0,Wr=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},La={readContext:jt,use:le,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt};La.useCacheRefresh=rt,La.useMemoCache=rt,La.useHostTransitionStatus=rt,La.useFormState=rt,La.useActionState=rt,La.useOptimistic=rt;var al={readContext:jt,use:le,useCallback:function(e,t){return k().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:ls,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,wi(4194308,4,rs.bind(null,t,e),a)},useLayoutEffect:function(e,t){return wi(4194308,4,e,t)},useInsertionEffect:function(e,t){wi(4,2,e,t)},useMemo:function(e,t){var a=k();t=t===void 0?null:t;var n=e();if(tl){fe(!0);try{e()}finally{fe(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=k();if(a!==void 0){var i=a(t);if(tl){fe(!0);try{a(t)}finally{fe(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Gd.bind(null,De,e),[n.memoizedState,e]},useRef:function(e){var t=k();return e={current:e},t.memoizedState=e},useState:function(e){e=Je(e);var t=e.queue,a=vs.bind(null,De,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Lu,useDeferredValue:function(e,t){var a=k();return Xu(a,e,t)},useTransition:function(){var e=Je(!1);return e=ds.bind(null,De,e.queue,!0,!1),k().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=De,i=k();if(qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),tt===null)throw Error(o(349));(Ge&60)!==0||Qe(n,t,a)}i.memoizedState=a;var s={value:a,getSnapshot:t};return i.queue=s,ls(_t.bind(null,n,s,e),[e]),n.flags|=2048,pl(9,ot.bind(null,n,s,a,t),{destroy:void 0},null),a},useId:function(){var e=k(),t=tt.identifierPrefix;if(qe){var a=an,n=tn;a=(n&~(1<<32-aa(n)-1)).toString(32)+a,t=":"+t+"R"+a,a=su++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=Cp++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return k().memoizedState=wd.bind(null,De)}};al.useMemoCache=ke,al.useHostTransitionStatus=Vu,al.useFormState=wt,al.useActionState=wt,al.useOptimistic=function(e){var t=k();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Qu.bind(null,De,!0,a),a.dispatch=t,[e,t]};var zn={readContext:jt,use:le,useCallback:ss,useContext:jt,useEffect:Zu,useImperativeHandle:cs,useInsertionEffect:is,useLayoutEffect:us,useMemo:os,useReducer:ge,useRef:ns,useState:function(){return ge(me)},useDebugValue:Lu,useDeferredValue:function(e,t){var a=F();return fs(a,Pe.memoizedState,e,t)},useTransition:function(){var e=ge(me)[0],t=F().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:ps};zn.useCacheRefresh=hs,zn.useMemoCache=ke,zn.useHostTransitionStatus=Vu,zn.useFormState=Ga,zn.useActionState=Ga,zn.useOptimistic=function(e,t){var a=F();return pt(a,Pe,e,t)};var nl={readContext:jt,use:le,useCallback:ss,useContext:jt,useEffect:Zu,useImperativeHandle:cs,useInsertionEffect:is,useLayoutEffect:us,useMemo:os,useReducer:Ce,useRef:ns,useState:function(){return Ce(me)},useDebugValue:Lu,useDeferredValue:function(e,t){var a=F();return Pe===null?Xu(a,e,t):fs(a,Pe.memoizedState,e,t)},useTransition:function(){var e=Ce(me)[0],t=F().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:ps};nl.useCacheRefresh=hs,nl.useMemoCache=ke,nl.useHostTransitionStatus=Vu,nl.useFormState=as,nl.useActionState=as,nl.useOptimistic=function(e,t){var a=F();return Pe!==null?pt(a,Pe,e,t):(a.baseState=e,[e,a.queue.dispatch])};var kr={isMounted:function(e){return(e=e._reactInternals)?S(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var n=ea(),i=At(n);i.payload=t,a!=null&&(i.callback=a),t=et(e,i,n),t!==null&&(Gt(t,e,n),sa(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=ea(),i=At(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=et(e,i,n),t!==null&&(Gt(t,e,n),sa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ea(),n=At(a);n.tag=2,t!=null&&(n.callback=t),t=et(e,n,a),t!==null&&(Gt(t,e,a),sa(t,e,a))}},cf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},sf=Error(o(461)),Mt=!1,$r={dehydrated:null,treeContext:null,retryLane:0},ou=w(null),ll=null,nn=null,Op=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},jp=ta.unstable_scheduleCallback,Dp=ta.unstable_NormalPriority,ft={$$typeof:_n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},of=ze.S;ze.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&dn(e,t),of!==null&&of(e,t)};var il=w(null),ln=!1,dt=!1,ec=!1,ff=typeof WeakSet=="function"?WeakSet:Set,Tt=null,df=!1,gt=null,ia=!1,Aa=null,Bl=8192,Up={getCacheForType:function(e){var t=jt(ft),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},fu=0,du=1,mu=2,pu=3,hu=4;if(typeof Symbol=="function"&&Symbol.for){var Si=Symbol.for;fu=Si("selector.component"),du=Si("selector.has_pseudo_class"),mu=Si("selector.role"),pu=Si("selector.test_id"),hu=Si("selector.text")}var Hp=typeof WeakMap=="function"?WeakMap:Map,We=0,tt=null,Be=null,Ge=0,at=0,ua=null,un=!1,wl=!1,tc=!1,rn=0,mt=0,An=0,ul=0,ac=0,ya=0,Gl=0,Ei=null,Xa=null,nc=!1,lc=0,bi=1/0,vu=null,Cn=null,yu=!1,rl=null,_i=0,ic=0,uc=null,Mi=0,rc=null;return He.attemptContinuousHydration=function(e){if(e.tag===13){var t=Jt(e,67108864);t!==null&&Gt(t,e,67108864),Rr(e,67108864)}},He.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=ea(),a=Jt(e,t);a!==null&&Gt(a,e,t),Rr(e,t)}},He.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=I(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var a=1<<31-aa(t);e.entanglements[1]|=a,t&=~a}Lt(e),(We&6)===0&&(bi=Ra()+500,Ua(0))}}break;case 13:t=Jt(e,2),t!==null&&Gt(t,e,2),so(),Rr(e,2)}},He.batchedUpdates=function(e,t){return e(t)},He.createComponentSelector=function(e){return{$$typeof:fu,value:e}},He.createContainer=function(e,t,a,n,i,s,m,b,C,X){return To(e,t,!1,null,a,n,s,m,b,C,X,null)},He.createHasPseudoClassSelector=function(e){return{$$typeof:du,value:e}},He.createHydrationContainer=function(e,t,a,n,i,s,m,b,C,X,ne,se,oe){return e=To(a,n,!0,e,i,s,b,C,X,ne,se,oe),e.context=xo(null),a=e.current,n=ea(),i=At(n),i.callback=t??null,et(a,i,n),e.current.lanes=n,te(e,n),Lt(e),e},He.createPortal=function(e,t,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:a}},He.createRoleSelector=function(e){return{$$typeof:mu,value:e}},He.createTestNameSelector=function(e){return{$$typeof:pu,value:e}},He.createTextSelector=function(e){return{$$typeof:hu,value:e}},He.defaultOnCaughtError=function(e){console.error(e)},He.defaultOnRecoverableError=function(e){cf(e)},He.defaultOnUncaughtError=function(e){cf(e)},He.deferredUpdates=function(e){var t=ze.T,a=Wn();try{return Kt(32),ze.T=null,e()}finally{Kt(a),ze.T=t}},He.discreteUpdates=function(e,t,a,n,i){var s=ze.T,m=Wn();try{return Kt(2),ze.T=null,e(t,a,n,i)}finally{Kt(m),ze.T=s,We===0&&(bi=Ra()+500)}},He.findAllNodes=gr,He.findBoundingRects=function(e,t){if(!fi)throw Error(o(363));t=gr(e,t),e=[];for(var a=0;a<t.length;a++)e.push(Rm(t[a]));for(t=e.length-1;0<t;t--){a=e[t];for(var n=a.x,i=n+a.width,s=a.y,m=s+a.height,b=t-1;0<=b;b--)if(t!==b){var C=e[b],X=C.x,ne=X+C.width,se=C.y,oe=se+C.height;if(n>=X&&s>=se&&i<=ne&&m<=oe){e.splice(t,1);break}else if(n!==X||a.width!==C.width||oe<s||se>m){if(!(s!==se||a.height!==C.height||ne<n||X>i)){X>n&&(C.width+=X-n,C.x=n),ne<i&&(C.width=i-X),e.splice(t,1);break}}else{se>s&&(C.height+=se-s,C.y=s),oe<m&&(C.height=m-se),e.splice(t,1);break}}}return e},He.findHostInstance=No,He.findHostInstanceWithNoPortals=function(e){return e=N(e),e=e!==null?Z(e):null,e===null?null:oi(e.stateNode)},He.findHostInstanceWithWarning=function(e){return No(e)},He.flushPassiveEffects=In,He.flushSyncFromReconciler=function(e){var t=We;We|=1;var a=ze.T,n=Wn();try{if(Kt(2),ze.T=null,e)return e()}finally{Kt(n),ze.T=a,We=t,(We&6)===0&&Ua(0)}},He.flushSyncWork=so,He.focusWithin=function(e,t){if(!fi)throw Error(o(363));for(e=hr(e),t=io(e,t),t=Array.from(t),e=0;e<t.length;){var a=t[e++],n=a.tag;if(!di(a)){if((n===5||n===26||n===27)&&Cm(a.stateNode))return!0;for(a=a.child;a!==null;)t.push(a),a=a.sibling}}return!1},He.getFindAllNodesFailureDescription=function(e,t){if(!fi)throw Error(o(363));var a=0,n=[];e=[hr(e),0];for(var i=0;i<e.length;){var s=e[i++],m=s.tag,b=e[i++],C=t[b];if((m!==5&&m!==26&&m!==27||!di(s))&&(vr(s,C)&&(n.push(yr(C)),b++,b>a&&(a=b)),b<t.length))for(s=s.child;s!==null;)e.push(s,b),s=s.sibling}if(a<t.length){for(e=[];a<t.length;a++)e.push(yr(t[a]));return`findAllNodes was able to match part of the selector:
  `+(n.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},He.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return oi(e.child.stateNode);default:return e.child.stateNode}},He.injectIntoDevTools=function(){var e={bundleType:0,version:rm,rendererPackageName:cm,currentDispatcherRef:ze,findFiberByHostInstance:wo,reconcilerVersion:"19.0.0"};if(Uo!==null&&(e.rendererConfig=Uo),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{mi=t.inject(e),na=t}catch{}e=!!t.checkDCE}}return e},He.isAlreadyRendering=function(){return!1},He.observeVisibleRects=function(e,t,a,n){if(!fi)throw Error(o(363));e=gr(e,t);var i=Om(e,a,n).disconnect;return{disconnect:function(){i()}}},He.shouldError=function(){return null},He.shouldSuspend=function(){return!1},He.startHostTransition=function(e,t,a,n){if(e.tag!==5)throw Error(o(476));var i=ms(e).queue;ds(e,i,t,bl,a===null?r:function(){var s=ms(e).next.queue;return ai(e,s,{},ea()),a(n)})},He.updateContainer=function(e,t,a,n){var i=t.current,s=ea();return Ro(i,s,e,t,a,n),s},He.updateContainerSync=function(e,t,a,n){return t.tag===0&&In(),Ro(t.current,2,e,t,a,n),2},He},u.exports.default=u.exports,Object.defineProperty(u.exports,"__esModule",{value:!0})})(hc)),hc.exports}var zf;function q0(){return zf||(zf=1,pc.exports=Y0()),pc.exports}var Z0=q0();const L0=Ff(Z0);var Af=id();function Lc(u,l,c){if(!u)return;if(c(u)===!0)return u;let r=l?u.return:u.child;for(;r;){const o=Lc(r,l,c);if(o)return o;r=l?null:r.sibling}}function ud(u){try{return Object.defineProperties(u,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return u}}const Xc=ud(D.createContext(null));class rd extends D.Component{render(){return D.createElement(Xc.Provider,{value:this._reactInternals},this.props.children)}}function cd(){const u=D.useContext(Xc);if(u===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const l=D.useId();return D.useMemo(()=>{for(const c of[u,u?.alternate]){if(!c)continue;const r=Lc(c,!1,o=>{let d=o.memoizedState;for(;d;){if(d.memoizedState===l)return!0;d=d.next}});if(r)return r}},[u,l])}const X0=Symbol.for("react.context"),V0=u=>u!==null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===X0;function Q0(){const u=cd(),[l]=D.useState(()=>new Map);l.clear();let c=u;for(;c;){const r=c.type;V0(r)&&r!==Xc&&!l.has(r)&&l.set(r,D.use(ud(r))),c=c.return}return l}function K0(){const u=Q0();return D.useMemo(()=>Array.from(u.keys()).reduce((l,c)=>r=>D.createElement(l,null,D.createElement(c.Provider,{...r,value:u.get(c)})),l=>D.createElement(rd,{...l})),[u])}function sd(u){let l=u.root;for(;l.getState().previousRoot;)l=l.getState().previousRoot;return l}const od=u=>u&&u.isOrthographicCamera,J0=u=>u&&u.hasOwnProperty("current"),F0=u=>u!=null&&(typeof u=="string"||typeof u=="number"||u.isColor),Ui=((u,l)=>typeof window<"u"&&(((u=window.document)==null?void 0:u.createElement)||((l=window.navigator)==null?void 0:l.product)==="ReactNative"))()?D.useLayoutEffect:D.useEffect;function Vc(u){const l=D.useRef(u);return Ui(()=>void(l.current=u),[u]),l}function I0(){const u=cd(),l=K0();return D.useMemo(()=>({children:c})=>{const o=!!Lc(u,!0,d=>d.type===D.StrictMode)?D.StrictMode:D.Fragment;return x.jsx(o,{children:x.jsx(l,{children:c})})},[u,l])}function P0({set:u}){return Ui(()=>(u(new Promise(()=>null)),()=>u(!1)),[u]),null}const W0=(u=>(u=class extends D.Component{constructor(...c){super(...c),this.state={error:!1}}componentDidCatch(c){this.props.set(c)}render(){return this.state.error?null:this.props.children}},u.getDerivedStateFromError=()=>({error:!0}),u))();function fd(u){var l;const c=typeof window<"u"?(l=window.devicePixelRatio)!=null?l:2:1;return Array.isArray(u)?Math.min(Math.max(u[0],c),u[1]):u}function Yl(u){var l;return(l=u.__r3f)==null?void 0:l.root.getState()}const it={obj:u=>u===Object(u)&&!it.arr(u)&&typeof u!="function",fun:u=>typeof u=="function",str:u=>typeof u=="string",num:u=>typeof u=="number",boo:u=>typeof u=="boolean",und:u=>u===void 0,nul:u=>u===null,arr:u=>Array.isArray(u),equ(u,l,{arrays:c="shallow",objects:r="reference",strict:o=!0}={}){if(typeof u!=typeof l||!!u!=!!l)return!1;if(it.str(u)||it.num(u)||it.boo(u))return u===l;const d=it.obj(u);if(d&&r==="reference")return u===l;const y=it.arr(u);if(y&&c==="reference")return u===l;if((y||d)&&u===l)return!0;let v;for(v in u)if(!(v in l))return!1;if(d&&c==="shallow"&&r==="shallow"){for(v in o?l:u)if(!it.equ(u[v],l[v],{strict:o,objects:"reference"}))return!1}else for(v in o?l:u)if(u[v]!==l[v])return!1;if(it.und(v)){if(y&&u.length===0&&l.length===0||d&&Object.keys(u).length===0&&Object.keys(l).length===0)return!0;if(u!==l)return!1}return!0}};function k0(u){const l={nodes:{},materials:{},meshes:{}};return u&&u.traverse(c=>{c.name&&(l.nodes[c.name]=c),c.material&&!l.materials[c.material.name]&&(l.materials[c.material.name]=c.material),c.isMesh&&!l.meshes[c.name]&&(l.meshes[c.name]=c)}),l}function $0(u){u.type!=="Scene"&&(u.dispose==null||u.dispose());for(const l in u){const c=u[l];c?.type!=="Scene"&&(c==null||c.dispose==null||c.dispose())}}const dd=["children","key","ref"];function eh(u){const l={};for(const c in u)dd.includes(c)||(l[c]=u[c]);return l}function ju(u,l,c,r){const o=u;let d=o?.__r3f;return d||(d={root:l,type:c,parent:null,children:[],props:eh(r),object:o,eventCount:0,handlers:{},isHidden:!1},o&&(o.__r3f=d)),d}function ji(u,l){if(!l.includes("-"))return{root:u,key:l,target:u[l]};if(l in u)return{root:u,key:l,target:u[l]};let c=u;const r=l.split("-");for(const o of r){if(typeof c!="object"||c===null){if(c!==void 0){const d=r.slice(r.indexOf(o)).join("-");return{root:c,key:d,target:void 0}}return{root:u,key:l,target:void 0}}l=o,u=c,c=c[l]}return{root:u,key:l,target:c}}const Cf=/-\d+$/;function Du(u,l){if(it.str(l.props.attach)){if(Cf.test(l.props.attach)){const o=l.props.attach.replace(Cf,""),{root:d,key:y}=ji(u.object,o);Array.isArray(d[y])||(d[y]=[])}const{root:c,key:r}=ji(u.object,l.props.attach);l.previousAttach=c[r],c[r]=l.object}else it.fun(l.props.attach)&&(l.previousAttach=l.props.attach(u.object,l.object))}function Uu(u,l){if(it.str(l.props.attach)){const{root:c,key:r}=ji(u.object,l.props.attach),o=l.previousAttach;o===void 0?delete c[r]:c[r]=o}else l.previousAttach==null||l.previousAttach(u.object,l.object);delete l.previousAttach}const Cc=[...dd,"args","dispose","attach","object","onUpdate","dispose"],Of=new Map;function th(u){let l=Of.get(u.constructor);try{l||(l=new u.constructor,Of.set(u.constructor,l))}catch{}return l}function ah(u,l){const c={};for(const r in l)if(!Cc.includes(r)&&!it.equ(l[r],u.props[r])){c[r]=l[r];for(const o in l)o.startsWith(`${r}-`)&&(c[o]=l[o])}for(const r in u.props){if(Cc.includes(r)||l.hasOwnProperty(r))continue;const{root:o,key:d}=ji(u.object,r);if(o.constructor&&o.constructor.length===0){const y=th(o);it.und(y)||(c[d]=y[d])}else c[d]=0}return c}const nh=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],lh=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ba(u,l){var c;const r=u.__r3f,o=r&&sd(r).getState(),d=r?.eventCount;for(const v in l){let h=l[v];if(Cc.includes(v))continue;if(r&&lh.test(v)){typeof h=="function"?r.handlers[v]=h:delete r.handlers[v],r.eventCount=Object.keys(r.handlers).length;continue}if(h===void 0)continue;let{root:g,key:E,target:S}=ji(u,v);if(S===void 0&&(typeof g!="object"||g===null))throw Error(`R3F: Cannot set "${v}". Ensure it is an object before setting "${E}".`);if(S instanceof mf&&h instanceof mf)S.mask=h.mask;else if(S instanceof Bn&&F0(h))S.set(h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&typeof S.copy=="function"&&h!=null&&h.constructor&&S.constructor===h.constructor)S.copy(h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&Array.isArray(h))typeof S.fromArray=="function"?S.fromArray(h):S.set(...h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&typeof h=="number")typeof S.setScalar=="function"?S.setScalar(h):S.set(h);else{var y;g[E]=h,o&&!o.linear&&nh.includes(E)&&(y=g[E])!=null&&y.isTexture&&g[E].format===Kl&&g[E].type===Au&&(g[E].colorSpace=Yc)}}if(r!=null&&r.parent&&o!=null&&o.internal&&(c=r.object)!=null&&c.isObject3D&&d!==r.eventCount){const v=r.object,h=o.internal.interaction.indexOf(v);h>-1&&o.internal.interaction.splice(h,1),r.eventCount&&v.raycast!==null&&o.internal.interaction.push(v)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&kl(r),u}function kl(u){var l;if(!u.parent)return;u.props.onUpdate==null||u.props.onUpdate(u.object);const c=(l=u.root)==null||l.getState==null?void 0:l.getState();c&&c.internal.frames===0&&c.invalidate()}function md(u,l){u.manual||(od(u)?(u.left=l.width/-2,u.right=l.width/2,u.top=l.height/2,u.bottom=l.height/-2):u.aspect=l.width/l.height,u.updateProjectionMatrix())}const Zt=u=>u?.isObject3D;function Su(u){return(u.eventObject||u.object).uuid+"/"+u.index+u.instanceId}function pd(u,l,c,r){const o=c.get(l);o&&(c.delete(l),c.size===0&&(u.delete(r),o.target.releasePointerCapture(r)))}function ih(u,l){const{internal:c}=u.getState();c.interaction=c.interaction.filter(r=>r!==l),c.initialHits=c.initialHits.filter(r=>r!==l),c.hovered.forEach((r,o)=>{(r.eventObject===l||r.object===l)&&c.hovered.delete(o)}),c.capturedMap.forEach((r,o)=>{pd(c.capturedMap,l,r,o)})}function uh(u){function l(h){const{internal:g}=u.getState(),E=h.offsetX-g.initialClick[0],S=h.offsetY-g.initialClick[1];return Math.round(Math.sqrt(E*E+S*S))}function c(h){return h.filter(g=>["Move","Over","Enter","Out","Leave"].some(E=>{var S;return(S=g.__r3f)==null?void 0:S.handlers["onPointer"+E]}))}function r(h,g){const E=u.getState(),S=new Set,M=[],N=g?g(E.internal.interaction):E.internal.interaction;for(let R=0;R<N.length;R++){const T=Yl(N[R]);T&&(T.raycaster.camera=void 0)}E.previousRoot||E.events.compute==null||E.events.compute(h,E);function H(R){const T=Yl(R);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var L;T.events.compute==null||T.events.compute(h,T,(L=T.previousRoot)==null?void 0:L.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(R,!0):[]}let Z=N.flatMap(H).sort((R,T)=>{const L=Yl(R.object),I=Yl(T.object);return!L||!I?R.distance-T.distance:I.events.priority-L.events.priority||R.distance-T.distance}).filter(R=>{const T=Su(R);return S.has(T)?!1:(S.add(T),!0)});E.events.filter&&(Z=E.events.filter(Z,E));for(const R of Z){let T=R.object;for(;T;){var w;(w=T.__r3f)!=null&&w.eventCount&&M.push({...R,eventObject:T}),T=T.parent}}if("pointerId"in h&&E.internal.capturedMap.has(h.pointerId))for(let R of E.internal.capturedMap.get(h.pointerId).values())S.has(Su(R.intersection))||M.push(R.intersection);return M}function o(h,g,E,S){if(h.length){const M={stopped:!1};for(const N of h){let H=Yl(N.object);if(H||N.object.traverseAncestors(Z=>{const w=Yl(Z);if(w)return H=w,!1}),H){const{raycaster:Z,pointer:w,camera:R,internal:T}=H,L=new Ie(w.x,w.y,0).unproject(R),I=K=>{var J,te;return(J=(te=T.capturedMap.get(K))==null?void 0:te.has(N.eventObject))!=null?J:!1},q=K=>{const J={intersection:N,target:g.target};T.capturedMap.has(K)?T.capturedMap.get(K).set(N.eventObject,J):T.capturedMap.set(K,new Map([[N.eventObject,J]])),g.target.setPointerCapture(K)},V=K=>{const J=T.capturedMap.get(K);J&&pd(T.capturedMap,N.eventObject,J,K)};let ce={};for(let K in g){let J=g[K];typeof J!="function"&&(ce[K]=J)}let Y={...N,...ce,pointer:w,intersections:h,stopped:M.stopped,delta:E,unprojectedPoint:L,ray:Z.ray,camera:R,stopPropagation(){const K="pointerId"in g&&T.capturedMap.get(g.pointerId);if((!K||K.has(N.eventObject))&&(Y.stopped=M.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(J=>J.eventObject===N.eventObject))){const J=h.slice(0,h.indexOf(N));d([...J,N])}},target:{hasPointerCapture:I,setPointerCapture:q,releasePointerCapture:V},currentTarget:{hasPointerCapture:I,setPointerCapture:q,releasePointerCapture:V},nativeEvent:g};if(S(Y),M.stopped===!0)break}}}return h}function d(h){const{internal:g}=u.getState();for(const E of g.hovered.values())if(!h.length||!h.find(S=>S.object===E.object&&S.index===E.index&&S.instanceId===E.instanceId)){const M=E.eventObject.__r3f;if(g.hovered.delete(Su(E)),M!=null&&M.eventCount){const N=M.handlers,H={...E,intersections:h};N.onPointerOut==null||N.onPointerOut(H),N.onPointerLeave==null||N.onPointerLeave(H)}}}function y(h,g){for(let E=0;E<g.length;E++){const S=g[E].__r3f;S==null||S.handlers.onPointerMissed==null||S.handlers.onPointerMissed(h)}}function v(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>d([]);case"onLostPointerCapture":return g=>{const{internal:E}=u.getState();"pointerId"in g&&E.capturedMap.has(g.pointerId)&&requestAnimationFrame(()=>{E.capturedMap.has(g.pointerId)&&(E.capturedMap.delete(g.pointerId),d([]))})}}return function(E){const{onPointerMissed:S,internal:M}=u.getState();M.lastEvent.current=E;const N=h==="onPointerMove",H=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=r(E,N?c:void 0),R=H?l(E):0;h==="onPointerDown"&&(M.initialClick=[E.offsetX,E.offsetY],M.initialHits=w.map(L=>L.eventObject)),H&&!w.length&&R<=2&&(y(E,M.interaction),S&&S(E)),N&&d(w);function T(L){const I=L.eventObject,q=I.__r3f;if(!(q!=null&&q.eventCount))return;const V=q.handlers;if(N){if(V.onPointerOver||V.onPointerEnter||V.onPointerOut||V.onPointerLeave){const ce=Su(L),Y=M.hovered.get(ce);Y?Y.stopped&&L.stopPropagation():(M.hovered.set(ce,L),V.onPointerOver==null||V.onPointerOver(L),V.onPointerEnter==null||V.onPointerEnter(L))}V.onPointerMove==null||V.onPointerMove(L)}else{const ce=V[h];ce?(!H||M.initialHits.includes(I))&&(y(E,M.interaction.filter(Y=>!M.initialHits.includes(Y))),ce(L)):H&&M.initialHits.includes(I)&&y(E,M.interaction.filter(Y=>!M.initialHits.includes(Y)))}}o(w,E,R,T)}}return{handlePointer:v}}const jf=u=>!!(u!=null&&u.render),Qc=D.createContext(null),rh=(u,l)=>{const c=ad((v,h)=>{const g=new Ie,E=new Ie,S=new Ie;function M(R=h().camera,T=E,L=h().size){const{width:I,height:q,top:V,left:ce}=L,Y=I/q;T.isVector3?S.copy(T):S.set(...T);const K=R.getWorldPosition(g).distanceTo(S);if(od(R))return{width:I/R.zoom,height:q/R.zoom,top:V,left:ce,factor:1,distance:K,aspect:Y};{const J=R.fov*Math.PI/180,te=2*Math.tan(J/2)*K,be=te*(I/q);return{width:be,height:te,top:V,left:ce,factor:I/be,distance:K,aspect:Y}}}let N;const H=R=>v(T=>({performance:{...T.performance,current:R}})),Z=new qt;return{set:v,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(R=1)=>u(h(),R),advance:(R,T)=>l(R,T,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Vp,pointer:Z,mouse:Z,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const R=h();N&&clearTimeout(N),R.performance.current!==R.performance.min&&H(R.performance.min),N=setTimeout(()=>H(h().performance.max),R.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:M},setEvents:R=>v(T=>({...T,events:{...T.events,...R}})),setSize:(R,T,L=0,I=0)=>{const q=h().camera,V={width:R,height:T,top:L,left:I};v(ce=>({size:V,viewport:{...ce.viewport,...M(q,E,V)}}))},setDpr:R=>v(T=>{const L=fd(R);return{viewport:{...T.viewport,dpr:L,initialDpr:T.viewport.initialDpr||L}}}),setFrameloop:(R="always")=>{const T=h().clock;T.stop(),T.elapsedTime=0,R!=="never"&&(T.start(),T.elapsedTime=0),v(()=>({frameloop:R}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:D.createRef(),active:!1,frames:0,priority:0,subscribe:(R,T,L)=>{const I=h().internal;return I.priority=I.priority+(T>0?1:0),I.subscribers.push({ref:R,priority:T,store:L}),I.subscribers=I.subscribers.sort((q,V)=>q.priority-V.priority),()=>{const q=h().internal;q!=null&&q.subscribers&&(q.priority=q.priority-(T>0?1:0),q.subscribers=q.subscribers.filter(V=>V.ref!==R))}}}}}),r=c.getState();let o=r.size,d=r.viewport.dpr,y=r.camera;return c.subscribe(()=>{const{camera:v,size:h,viewport:g,gl:E,set:S}=c.getState();if(h.width!==o.width||h.height!==o.height||g.dpr!==d){o=h,d=g.dpr,md(v,h),g.dpr>0&&E.setPixelRatio(g.dpr);const M=typeof HTMLCanvasElement<"u"&&E.domElement instanceof HTMLCanvasElement;E.setSize(h.width,h.height,M)}v!==y&&(y=v,S(M=>({viewport:{...M.viewport,...M.viewport.getCurrentViewport(v)}})))}),c.subscribe(v=>u(v)),c};function Kc(){const u=D.useContext(Qc);if(!u)throw new Error("R3F: Hooks can only be used within the Canvas component!");return u}function St(u=c=>c,l){return Kc()(u,l)}function sn(u,l=0){const c=Kc(),r=c.getState().internal.subscribe,o=Vc(u);return Ui(()=>r(o,l,c),[l,r,c]),null}const Df=new WeakMap,ch=u=>{var l;return typeof u=="function"&&(u==null||(l=u.prototype)==null?void 0:l.constructor)===u};function hd(u,l){return function(c,...r){let o;return ch(c)?(o=Df.get(c),o||(o=new c,Df.set(c,o))):o=c,u&&u(o),Promise.all(r.map(d=>new Promise((y,v)=>o.load(d,h=>{Zt(h?.scene)&&Object.assign(h,k0(h.scene)),y(h)},l,h=>v(new Error(`Could not load ${d}: ${h?.message}`))))))}}function Jl(u,l,c,r){const o=Array.isArray(l)?l:[l],d=H0(hd(c,r),[u,...o],{equal:it.equ});return Array.isArray(l)?d:d[0]}Jl.preload=function(u,l,c){const r=Array.isArray(l)?l:[l];return B0(hd(c),[u,...r])};Jl.clear=function(u,l){const c=Array.isArray(l)?l:[l];return w0([u,...c])};var sh={version:"9.4.2"};function oh(u){const l=L0(u);return l.injectIntoDevTools(),l}const vd=0,Fl={},fh=/^three(?=[A-Z])/,Yu=u=>`${u[0].toUpperCase()}${u.slice(1)}`;let dh=0;const mh=u=>typeof u=="function";function Jc(u){if(mh(u)){const l=`${dh++}`;return Fl[l]=u,l}else Object.assign(Fl,u)}function yd(u,l){const c=Yu(u),r=Fl[c];if(u!=="primitive"&&!r)throw new Error(`R3F: ${c} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(u==="primitive"&&!l.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(l.args!==void 0&&!Array.isArray(l.args))throw new Error("R3F: The args prop must be an array!")}function ph(u,l,c){var r;return u=Yu(u)in Fl?u:u.replace(fh,""),yd(u,l),u==="primitive"&&(r=l.object)!=null&&r.__r3f&&delete l.object.__r3f,ju(l.object,c,u,l)}function hh(u){if(!u.isHidden){var l;u.props.attach&&(l=u.parent)!=null&&l.object?Uu(u.parent,u):Zt(u.object)&&(u.object.visible=!1),u.isHidden=!0,kl(u)}}function gd(u){if(u.isHidden){var l;u.props.attach&&(l=u.parent)!=null&&l.object?Du(u.parent,u):Zt(u.object)&&u.props.visible!==!1&&(u.object.visible=!0),u.isHidden=!1,kl(u)}}function Fc(u,l,c){const r=l.root.getState();if(!(!u.parent&&u.object!==r.scene)){if(!l.object){var o,d;const y=Fl[Yu(l.type)];l.object=(o=l.props.object)!=null?o:new y(...(d=l.props.args)!=null?d:[]),l.object.__r3f=l}if(ba(l.object,l.props),l.props.attach)Du(u,l);else if(Zt(l.object)&&Zt(u.object)){const y=u.object.children.indexOf(c?.object);if(c&&y!==-1){const v=u.object.children.indexOf(l.object);if(v!==-1){u.object.children.splice(v,1);const h=v<y?y-1:y;u.object.children.splice(h,0,l.object)}else l.object.parent=u.object,u.object.children.splice(y,0,l.object),l.object.dispatchEvent({type:"added"}),u.object.dispatchEvent({type:"childadded",child:l.object})}else u.object.add(l.object)}for(const y of l.children)Fc(l,y);kl(l)}}function gc(u,l){l&&(l.parent=u,u.children.push(l),Fc(u,l))}function Uf(u,l,c){if(!l||!c)return;l.parent=u;const r=u.children.indexOf(c);r!==-1?u.children.splice(r,0,l):u.children.push(l),Fc(u,l,c)}function Sd(u){if(typeof u.dispose=="function"){const l=()=>{try{u.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?l():Af.unstable_scheduleCallback(Af.unstable_IdlePriority,l)}}function Oc(u,l,c){if(!l)return;l.parent=null;const r=u.children.indexOf(l);r!==-1&&u.children.splice(r,1),l.props.attach?Uu(u,l):Zt(l.object)&&Zt(u.object)&&(u.object.remove(l.object),ih(sd(l),l.object));const o=l.props.dispose!==null&&c!==!1;for(let d=l.children.length-1;d>=0;d--){const y=l.children[d];Oc(l,y,o)}l.children.length=0,delete l.object.__r3f,o&&l.type!=="primitive"&&l.object.type!=="Scene"&&Sd(l.object),c===void 0&&kl(l)}function vh(u,l){for(const c of[u,u.alternate])if(c!==null)if(typeof c.ref=="function"){c.refCleanup==null||c.refCleanup();const r=c.ref(l);typeof r=="function"&&(c.refCleanup=r)}else c.ref&&(c.ref.current=l)}const Ru=[];function yh(){for(const[c]of Ru){const r=c.parent;if(r){c.props.attach?Uu(r,c):Zt(c.object)&&Zt(r.object)&&r.object.remove(c.object);for(const o of c.children)o.props.attach?Uu(c,o):Zt(o.object)&&Zt(c.object)&&c.object.remove(o.object)}c.isHidden&&gd(c),c.object.__r3f&&delete c.object.__r3f,c.type!=="primitive"&&Sd(c.object)}for(const[c,r,o]of Ru){c.props=r;const d=c.parent;if(d){var u,l;const y=Fl[Yu(c.type)];c.object=(u=c.props.object)!=null?u:new y(...(l=c.props.args)!=null?l:[]),c.object.__r3f=c,vh(o,c.object),ba(c.object,c.props),c.props.attach?Du(d,c):Zt(c.object)&&Zt(d.object)&&d.object.add(c.object);for(const v of c.children)v.props.attach?Du(c,v):Zt(v.object)&&Zt(c.object)&&c.object.add(v.object);kl(c)}}Ru.length=0}const Sc=()=>{},Hf={};let Eu=vd;const gh=0,Sh=4,Hu=oh({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:ph,removeChild:Oc,appendChild:gc,appendInitialChild:gc,insertBefore:Uf,appendChildToContainer(u,l){const c=u.getState().scene.__r3f;!l||!c||gc(c,l)},removeChildFromContainer(u,l){const c=u.getState().scene.__r3f;!l||!c||Oc(c,l)},insertInContainerBefore(u,l,c){const r=u.getState().scene.__r3f;!l||!c||!r||Uf(r,l,c)},getRootHostContext:()=>Hf,getChildHostContext:()=>Hf,commitUpdate(u,l,c,r,o){var d,y,v;yd(l,r);let h=!1;if((u.type==="primitive"&&c.object!==r.object||((d=r.args)==null?void 0:d.length)!==((y=c.args)==null?void 0:y.length)||(v=r.args)!=null&&v.some((E,S)=>{var M;return E!==((M=c.args)==null?void 0:M[S])}))&&(h=!0),h)Ru.push([u,{...r},o]);else{const E=ah(u,r);Object.keys(E).length&&(Object.assign(u.props,E),ba(u.object,E))}(o.sibling===null||(o.flags&Sh)===gh)&&yh()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:u=>u?.object,prepareForCommit:()=>null,preparePortalMount:u=>ju(u.getState().scene,u,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:hh,unhideInstance:gd,createTextInstance:Sc,hideTextInstance:Sc,unhideTextInstance:Sc,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:D.createContext(null),setCurrentUpdatePriority(u){Eu=u},getCurrentUpdatePriority(){return Eu},resolveUpdatePriority(){var u;if(Eu!==vd)return Eu;switch(typeof window<"u"&&((u=window.event)==null?void 0:u.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Nu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Nu.ContinuousEventPriority;default:return Nu.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:sh.version}),ol=new Map,ql={objects:"shallow",strict:!1};function Eh(u,l){if(!l&&typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&u.parentElement){const{width:c,height:r,top:o,left:d}=u.parentElement.getBoundingClientRect();return{width:c,height:r,top:o,left:d}}else if(!l&&typeof OffscreenCanvas<"u"&&u instanceof OffscreenCanvas)return{width:u.width,height:u.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...l}}function bh(u){const l=ol.get(u),c=l?.fiber,r=l?.store;l&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,d=r||rh(Uc,wf),y=c||Hu.createContainer(d,Nu.ConcurrentRoot,null,!1,null,"",o,o,o,null);l||ol.set(u,{fiber:y,store:d});let v,h,g=!1,E=null;return{async configure(S={}){let M;E=new Promise(Me=>M=Me);let{gl:N,size:H,scene:Z,events:w,onCreated:R,shadows:T=!1,linear:L=!1,flat:I=!1,legacy:q=!1,orthographic:V=!1,frameloop:ce="always",dpr:Y=[1,2],performance:K,raycaster:J,camera:te,onPointerMissed:be}=S,ue=d.getState(),re=ue.gl;if(!ue.gl){const Me={canvas:u,powerPreference:"high-performance",antialias:!0,alpha:!0},ye=typeof N=="function"?await N(Me):N;jf(ye)?re=ye:re=new If({...Me,...N}),ue.set({gl:re})}let xe=ue.raycaster;xe||ue.set({raycaster:xe=new Pf});const{params:Q,...fe}=J||{};if(it.equ(fe,xe,ql)||ba(xe,{...fe}),it.equ(Q,xe.params,ql)||ba(xe,{params:{...xe.params,...Q}}),!ue.camera||ue.camera===h&&!it.equ(h,te,ql)){h=te;const Me=te?.isCamera,ye=Me?te:V?new zi(0,0,0,0,.1,1e3):new Tu(75,0,.1,1e3);Me||(ye.position.z=5,te&&(ba(ye,te),ye.manual||("aspect"in te||"left"in te||"right"in te||"bottom"in te||"top"in te)&&(ye.manual=!0,ye.updateProjectionMatrix())),!ue.camera&&!(te!=null&&te.rotation)&&ye.lookAt(0,0,0)),ue.set({camera:ye}),xe.camera=ye}if(!ue.scene){let Me;Z!=null&&Z.isScene?(Me=Z,ju(Me,d,"",{})):(Me=new Gc,ju(Me,d,"",{}),Z&&ba(Me,Z)),ue.set({scene:Me})}w&&!ue.events.handlers&&ue.set({events:w(d)});const pe=Eh(u,H);if(it.equ(pe,ue.size,ql)||ue.setSize(pe.width,pe.height,pe.top,pe.left),Y&&ue.viewport.dpr!==fd(Y)&&ue.setDpr(Y),ue.frameloop!==ce&&ue.setFrameloop(ce),ue.onPointerMissed||ue.set({onPointerMissed:be}),K&&!it.equ(K,ue.performance,ql)&&ue.set(Me=>({performance:{...Me.performance,...K}})),!ue.xr){var ve;const Me=(Ae,ut)=>{const Ue=d.getState();Ue.frameloop!=="never"&&wf(Ae,!0,Ue,ut)},ye=()=>{const Ae=d.getState();Ae.gl.xr.enabled=Ae.gl.xr.isPresenting,Ae.gl.xr.setAnimationLoop(Ae.gl.xr.isPresenting?Me:null),Ae.gl.xr.isPresenting||Uc(Ae)},je={connect(){const Ae=d.getState().gl;Ae.xr.addEventListener("sessionstart",ye),Ae.xr.addEventListener("sessionend",ye)},disconnect(){const Ae=d.getState().gl;Ae.xr.removeEventListener("sessionstart",ye),Ae.xr.removeEventListener("sessionend",ye)}};typeof((ve=re.xr)==null?void 0:ve.addEventListener)=="function"&&je.connect(),ue.set({xr:je})}if(re.shadowMap){const Me=re.shadowMap.enabled,ye=re.shadowMap.type;if(re.shadowMap.enabled=!!T,it.boo(T))re.shadowMap.type=cc;else if(it.str(T)){var he;const je={basic:qp,percentage:Yp,soft:cc,variance:Gp};re.shadowMap.type=(he=je[T])!=null?he:cc}else it.obj(T)&&Object.assign(re.shadowMap,T);(Me!==re.shadowMap.enabled||ye!==re.shadowMap.type)&&(re.shadowMap.needsUpdate=!0)}return Zp.enabled=!q,g||(re.outputColorSpace=L?zu:Yc,re.toneMapping=I?Lp:Xp),ue.legacy!==q&&ue.set(()=>({legacy:q})),ue.linear!==L&&ue.set(()=>({linear:L})),ue.flat!==I&&ue.set(()=>({flat:I})),N&&!it.fun(N)&&!jf(N)&&!it.equ(N,re,ql)&&ba(re,N),v=R,g=!0,M(),this},render(S){return!g&&!E&&this.configure(),E.then(()=>{Hu.updateContainer(x.jsx(_h,{store:d,children:S,onCreated:v,rootElement:u}),y,null,()=>{})}),d},unmount(){Ed(u)}}}function _h({store:u,children:l,onCreated:c,rootElement:r}){return Ui(()=>{const o=u.getState();o.set(d=>({internal:{...d.internal,active:!0}})),c&&c(o),u.getState().events.connected||o.events.connect==null||o.events.connect(r)},[]),x.jsx(Qc.Provider,{value:u,children:l})}function Ed(u,l){const c=ol.get(u),r=c?.fiber;if(r){const o=c?.store.getState();o&&(o.internal.active=!1),Hu.updateContainer(null,r,null,()=>{o&&setTimeout(()=>{try{var d,y,v,h;o.events.disconnect==null||o.events.disconnect(),(d=o.gl)==null||(y=d.renderLists)==null||y.dispose==null||y.dispose(),(v=o.gl)==null||v.forceContextLoss==null||v.forceContextLoss(),(h=o.gl)!=null&&h.xr&&o.xr.disconnect(),$0(o.scene),ol.delete(u)}catch{}},500)})}}function Mh(u,l,c){return x.jsx(Th,{children:u,container:l,state:c})}function Th({state:u={},children:l,container:c}){const{events:r,size:o,...d}=u,y=Kc(),[v]=D.useState(()=>new Pf),[h]=D.useState(()=>new qt),g=Vc((S,M)=>{let N;if(M.camera&&o){const H=M.camera;N=S.viewport.getCurrentViewport(H,new Ie,o),H!==S.camera&&md(H,o)}return{...S,...M,scene:c,raycaster:v,pointer:h,mouse:h,previousRoot:y,events:{...S.events,...M.events,...r},size:{...S.size,...o},viewport:{...S.viewport,...N},setEvents:H=>M.set(Z=>({...Z,events:{...Z.events,...H}}))}}),E=D.useMemo(()=>{const S=ad((N,H)=>({...d,set:N,get:H})),M=N=>S.setState(H=>g.current(N,H));return M(y.getState()),y.subscribe(M),S},[y,c]);return x.jsx(x.Fragment,{children:Hu.createPortal(x.jsx(Qc.Provider,{value:E,children:l}),E,null)})}const xh=new Set,Nh=new Set,Rh=new Set;function Ec(u,l){if(u.size)for(const{callback:c}of u.values())c(l)}function Ai(u,l){switch(u){case"before":return Ec(xh,l);case"after":return Ec(Nh,l);case"tail":return Ec(Rh,l)}}let bc,_c;function jc(u,l,c){let r=l.clock.getDelta();l.frameloop==="never"&&typeof u=="number"&&(r=u-l.clock.elapsedTime,l.clock.oldTime=l.clock.elapsedTime,l.clock.elapsedTime=u),bc=l.internal.subscribers;for(let o=0;o<bc.length;o++)_c=bc[o],_c.ref.current(_c.store.getState(),r,c);return!l.internal.priority&&l.gl.render&&l.gl.render(l.scene,l.camera),l.internal.frames=Math.max(0,l.internal.frames-1),l.frameloop==="always"?1:l.internal.frames}let Bu=!1,Dc=!1,Mc,Bf,Zl;function bd(u){Bf=requestAnimationFrame(bd),Bu=!0,Mc=0,Ai("before",u),Dc=!0;for(const c of ol.values()){var l;Zl=c.store.getState(),Zl.internal.active&&(Zl.frameloop==="always"||Zl.internal.frames>0)&&!((l=Zl.gl.xr)!=null&&l.isPresenting)&&(Mc+=jc(u,Zl))}if(Dc=!1,Ai("after",u),Mc===0)return Ai("tail",u),Bu=!1,cancelAnimationFrame(Bf)}function Uc(u,l=1){var c;if(!u)return ol.forEach(r=>Uc(r.store.getState(),l));(c=u.gl.xr)!=null&&c.isPresenting||!u.internal.active||u.frameloop==="never"||(l>1?u.internal.frames=Math.min(60,u.internal.frames+l):Dc?u.internal.frames=2:u.internal.frames=1,Bu||(Bu=!0,requestAnimationFrame(bd)))}function wf(u,l=!0,c,r){if(l&&Ai("before",u),c)jc(u,c,r);else for(const o of ol.values())jc(u,o.store.getState());l&&Ai("after",u)}const Tc={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zh(u){const{handlePointer:l}=uh(u);return{priority:1,enabled:!0,compute(c,r,o){r.pointer.set(c.offsetX/r.size.width*2-1,-(c.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Tc).reduce((c,r)=>({...c,[r]:l(r)}),{}),update:()=>{var c;const{events:r,internal:o}=u.getState();(c=o.lastEvent)!=null&&c.current&&r.handlers&&r.handlers.onPointerMove(o.lastEvent.current)},connect:c=>{const{set:r,events:o}=u.getState();if(o.disconnect==null||o.disconnect(),r(d=>({events:{...d.events,connected:c}})),o.handlers)for(const d in o.handlers){const y=o.handlers[d],[v,h]=Tc[d];c.addEventListener(v,y,{passive:h})}},disconnect:()=>{const{set:c,events:r}=u.getState();if(r.connected){if(r.handlers)for(const o in r.handlers){const d=r.handlers[o],[y]=Tc[o];r.connected.removeEventListener(y,d)}c(o=>({events:{...o.events,connected:void 0}}))}}}}function Gf(u,l){let c;return(...r)=>{window.clearTimeout(c),c=window.setTimeout(()=>u(...r),l)}}function Ah({debounce:u,scroll:l,polyfill:c,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const o=c||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[d,y]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),v=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d,orientationHandler:null}),h=u?typeof u=="number"?u:u.scroll:null,g=u?typeof u=="number"?u:u.resize:null,E=D.useRef(!1);D.useEffect(()=>(E.current=!0,()=>void(E.current=!1)));const[S,M,N]=D.useMemo(()=>{const R=()=>{if(!v.current.element)return;const{left:T,top:L,width:I,height:q,bottom:V,right:ce,x:Y,y:K}=v.current.element.getBoundingClientRect(),J={left:T,top:L,width:I,height:q,bottom:V,right:ce,x:Y,y:K};v.current.element instanceof HTMLElement&&r&&(J.height=v.current.element.offsetHeight,J.width=v.current.element.offsetWidth),Object.freeze(J),E.current&&!Dh(v.current.lastBounds,J)&&y(v.current.lastBounds=J)};return[R,g?Gf(R,g):R,h?Gf(R,h):R]},[y,r,h,g]);function H(){v.current.scrollContainers&&(v.current.scrollContainers.forEach(R=>R.removeEventListener("scroll",N,!0)),v.current.scrollContainers=null),v.current.resizeObserver&&(v.current.resizeObserver.disconnect(),v.current.resizeObserver=null),v.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",v.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",v.current.orientationHandler))}function Z(){v.current.element&&(v.current.resizeObserver=new o(N),v.current.resizeObserver.observe(v.current.element),l&&v.current.scrollContainers&&v.current.scrollContainers.forEach(R=>R.addEventListener("scroll",N,{capture:!0,passive:!0})),v.current.orientationHandler=()=>{N()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",v.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",v.current.orientationHandler))}const w=R=>{!R||R===v.current.element||(H(),v.current.element=R,v.current.scrollContainers=_d(R),Z())};return Oh(N,!!l),Ch(M),D.useEffect(()=>{H(),Z()},[l,N,M]),D.useEffect(()=>H,[]),[w,d,S]}function Ch(u){D.useEffect(()=>{const l=u;return window.addEventListener("resize",l),()=>void window.removeEventListener("resize",l)},[u])}function Oh(u,l){D.useEffect(()=>{if(l){const c=u;return window.addEventListener("scroll",c,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",c,!0)}},[u,l])}function _d(u){const l=[];if(!u||u===document.body)return l;const{overflow:c,overflowX:r,overflowY:o}=window.getComputedStyle(u);return[c,r,o].some(d=>d==="auto"||d==="scroll")&&l.push(u),[...l,..._d(u.parentElement)]}const jh=["x","y","top","bottom","left","right","width","height"],Dh=(u,l)=>jh.every(c=>u[c]===l[c]);function Uh({ref:u,children:l,fallback:c,resize:r,style:o,gl:d,events:y=zh,eventSource:v,eventPrefix:h,shadows:g,linear:E,flat:S,legacy:M,orthographic:N,frameloop:H,dpr:Z,performance:w,raycaster:R,camera:T,scene:L,onPointerMissed:I,onCreated:q,...V}){D.useMemo(()=>Jc(Qp),[]);const ce=I0(),[Y,K]=Ah({scroll:!0,debounce:{scroll:50,resize:0},...r}),J=D.useRef(null),te=D.useRef(null);D.useImperativeHandle(u,()=>J.current);const be=Vc(I),[ue,re]=D.useState(!1),[xe,Q]=D.useState(!1);if(ue)throw ue;if(xe)throw xe;const fe=D.useRef(null);Ui(()=>{const ve=J.current;if(K.width>0&&K.height>0&&ve){fe.current||(fe.current=bh(ve));async function he(){await fe.current.configure({gl:d,scene:L,events:y,shadows:g,linear:E,flat:S,legacy:M,orthographic:N,frameloop:H,dpr:Z,performance:w,raycaster:R,camera:T,size:K,onPointerMissed:(...Me)=>be.current==null?void 0:be.current(...Me),onCreated:Me=>{Me.events.connect==null||Me.events.connect(v?J0(v)?v.current:v:te.current),h&&Me.setEvents({compute:(ye,je)=>{const Ae=ye[h+"X"],ut=ye[h+"Y"];je.pointer.set(Ae/je.size.width*2-1,-(ut/je.size.height)*2+1),je.raycaster.setFromCamera(je.pointer,je.camera)}}),q?.(Me)}}),fe.current.render(x.jsx(ce,{children:x.jsx(W0,{set:Q,children:x.jsx(D.Suspense,{fallback:x.jsx(P0,{set:re}),children:l??null})})}))}he()}}),D.useEffect(()=>{const ve=J.current;if(ve)return()=>Ed(ve)},[]);const pe=v?"none":"auto";return x.jsx("div",{ref:te,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:pe,...o},...V,children:x.jsx("div",{ref:Y,style:{width:"100%",height:"100%"},children:x.jsx("canvas",{ref:J,style:{display:"block"},children:c})})})}function Hh(u){return x.jsx(rd,{children:x.jsx(Uh,{...u})})}function Il(){return Il=Object.assign?Object.assign.bind():function(u){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var r in c)({}).hasOwnProperty.call(c,r)&&(u[r]=c[r])}return u},Il.apply(null,arguments)}const Md=parseInt(Wf.replace(/\D+/g,""));function Bh(u,l=Math.PI/3){const c=Math.cos(l),r=(1+1e-10)*100,o=[new Ie,new Ie,new Ie],d=new Ie,y=new Ie,v=new Ie,h=new Ie;function g(Z){const w=~~(Z.x*r),R=~~(Z.y*r),T=~~(Z.z*r);return`${w},${R},${T}`}const E=u.index?u.toNonIndexed():u,S=E.attributes.position,M={};for(let Z=0,w=S.count/3;Z<w;Z++){const R=3*Z,T=o[0].fromBufferAttribute(S,R+0),L=o[1].fromBufferAttribute(S,R+1),I=o[2].fromBufferAttribute(S,R+2);d.subVectors(I,L),y.subVectors(T,L);const q=new Ie().crossVectors(d,y).normalize();for(let V=0;V<3;V++){const ce=o[V],Y=g(ce);Y in M||(M[Y]=[]),M[Y].push(q)}}const N=new Float32Array(S.count*3),H=new Kp(N,3,!1);for(let Z=0,w=S.count/3;Z<w;Z++){const R=3*Z,T=o[0].fromBufferAttribute(S,R+0),L=o[1].fromBufferAttribute(S,R+1),I=o[2].fromBufferAttribute(S,R+2);d.subVectors(I,L),y.subVectors(T,L),v.crossVectors(d,y).normalize();for(let q=0;q<3;q++){const V=o[q],ce=g(V),Y=M[ce];h.set(0,0,0);for(let K=0,J=Y.length;K<J;K++){const te=Y[K];v.dot(te)>c&&h.add(te)}h.normalize(),H.setXYZ(R+q,h.x,h.y,h.z)}}return E.setAttribute("normal",H),E}var _a=Uint8Array,Gn=Uint16Array,Hc=Uint32Array,Td=new _a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xd=new _a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wh=new _a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nd=function(u,l){for(var c=new Gn(31),r=0;r<31;++r)c[r]=l+=1<<u[r-1];for(var o=new Hc(c[30]),r=1;r<30;++r)for(var d=c[r];d<c[r+1];++d)o[d]=d-c[r]<<5|r;return[c,o]},Rd=Nd(Td,2),zd=Rd[0],Gh=Rd[1];zd[28]=258,Gh[258]=28;var Yh=Nd(xd,0),qh=Yh[0],Bc=new Gn(32768);for(var lt=0;lt<32768;++lt){var jn=(lt&43690)>>>1|(lt&21845)<<1;jn=(jn&52428)>>>2|(jn&13107)<<2,jn=(jn&61680)>>>4|(jn&3855)<<4,Bc[lt]=((jn&65280)>>>8|(jn&255)<<8)>>>1}var Ci=(function(u,l,c){for(var r=u.length,o=0,d=new Gn(l);o<r;++o)++d[u[o]-1];var y=new Gn(l);for(o=0;o<l;++o)y[o]=y[o-1]+d[o-1]<<1;var v;if(c){v=new Gn(1<<l);var h=15-l;for(o=0;o<r;++o)if(u[o])for(var g=o<<4|u[o],E=l-u[o],S=y[u[o]-1]++<<E,M=S|(1<<E)-1;S<=M;++S)v[Bc[S]>>>h]=g}else for(v=new Gn(r),o=0;o<r;++o)u[o]&&(v[o]=Bc[y[u[o]-1]++]>>>15-u[o]);return v}),Hi=new _a(288);for(var lt=0;lt<144;++lt)Hi[lt]=8;for(var lt=144;lt<256;++lt)Hi[lt]=9;for(var lt=256;lt<280;++lt)Hi[lt]=7;for(var lt=280;lt<288;++lt)Hi[lt]=8;var Ad=new _a(32);for(var lt=0;lt<32;++lt)Ad[lt]=5;var Zh=Ci(Hi,9,1),Lh=Ci(Ad,5,1),xc=function(u){for(var l=u[0],c=1;c<u.length;++c)u[c]>l&&(l=u[c]);return l},Ca=function(u,l,c){var r=l/8|0;return(u[r]|u[r+1]<<8)>>(l&7)&c},Nc=function(u,l){var c=l/8|0;return(u[c]|u[c+1]<<8|u[c+2]<<16)>>(l&7)},Xh=function(u){return(u/8|0)+(u&7&&1)},Vh=function(u,l,c){(c==null||c>u.length)&&(c=u.length);var r=new(u instanceof Gn?Gn:u instanceof Hc?Hc:_a)(c-l);return r.set(u.subarray(l,c)),r},Qh=function(u,l,c){var r=u.length;if(!r||c&&!c.l&&r<5)return l||new _a(0);var o=!l||c,d=!c||c.i;c||(c={}),l||(l=new _a(r*3));var y=function(Ue){var zt=l.length;if(Ue>zt){var Et=new _a(Math.max(zt*2,Ue));Et.set(l),l=Et}},v=c.f||0,h=c.p||0,g=c.b||0,E=c.l,S=c.d,M=c.m,N=c.n,H=r*8;do{if(!E){c.f=v=Ca(u,h,1);var Z=Ca(u,h+1,3);if(h+=3,Z)if(Z==1)E=Zh,S=Lh,M=9,N=5;else if(Z==2){var L=Ca(u,h,31)+257,I=Ca(u,h+10,15)+4,q=L+Ca(u,h+5,31)+1;h+=14;for(var V=new _a(q),ce=new _a(19),Y=0;Y<I;++Y)ce[wh[Y]]=Ca(u,h+Y*3,7);h+=I*3;for(var K=xc(ce),J=(1<<K)-1,te=Ci(ce,K,1),Y=0;Y<q;){var be=te[Ca(u,h,J)];h+=be&15;var w=be>>>4;if(w<16)V[Y++]=w;else{var ue=0,re=0;for(w==16?(re=3+Ca(u,h,3),h+=2,ue=V[Y-1]):w==17?(re=3+Ca(u,h,7),h+=3):w==18&&(re=11+Ca(u,h,127),h+=7);re--;)V[Y++]=ue}}var xe=V.subarray(0,L),Q=V.subarray(L);M=xc(xe),N=xc(Q),E=Ci(xe,M,1),S=Ci(Q,N,1)}else throw"invalid block type";else{var w=Xh(h)+4,R=u[w-4]|u[w-3]<<8,T=w+R;if(T>r){if(d)throw"unexpected EOF";break}o&&y(g+R),l.set(u.subarray(w,T),g),c.b=g+=R,c.p=h=T*8;continue}if(h>H){if(d)throw"unexpected EOF";break}}o&&y(g+131072);for(var fe=(1<<M)-1,pe=(1<<N)-1,ve=h;;ve=h){var ue=E[Nc(u,h)&fe],he=ue>>>4;if(h+=ue&15,h>H){if(d)throw"unexpected EOF";break}if(!ue)throw"invalid length/literal";if(he<256)l[g++]=he;else if(he==256){ve=h,E=null;break}else{var Me=he-254;if(he>264){var Y=he-257,ye=Td[Y];Me=Ca(u,h,(1<<ye)-1)+zd[Y],h+=ye}var je=S[Nc(u,h)&pe],Ae=je>>>4;if(!je)throw"invalid distance";h+=je&15;var Q=qh[Ae];if(Ae>3){var ye=xd[Ae];Q+=Nc(u,h)&(1<<ye)-1,h+=ye}if(h>H){if(d)throw"unexpected EOF";break}o&&y(g+131072);for(var ut=g+Me;g<ut;g+=4)l[g]=l[g-Q],l[g+1]=l[g+1-Q],l[g+2]=l[g+2-Q],l[g+3]=l[g+3-Q];g=ut}}c.l=E,c.p=ve,c.b=g,E&&(v=1,c.m=M,c.d=S,c.n=N)}while(!v);return g==l.length?l:Vh(l,0,g)},Kh=new _a(0),Jh=function(u){if((u[0]&15)!=8||u[0]>>>4>7||(u[0]<<8|u[1])%31)throw"invalid zlib data";if(u[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function bu(u,l){return Qh((Jh(u),u.subarray(2,-4)),l)}var Fh=typeof TextDecoder<"u"&&new TextDecoder,Ih=0;try{Fh.decode(Kh,{stream:!0}),Ih=1}catch{}const Ph=u=>u&&u.isCubeTexture;class Wh extends wu{constructor(l,c){var r,o;const d=Ph(l),v=((o=d?(r=l.image[0])==null?void 0:r.width:l.image.width)!=null?o:1024)/4,h=Math.floor(Math.log2(v)),g=Math.pow(2,h),E=3*Math.max(g,112),S=4*g,M=[d?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/E}`,`#define CUBEUV_TEXEL_HEIGHT ${1/S}`,`#define CUBEUV_MAX_MIP ${h}.0`],N=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,H=M.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Md>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,Z={map:{value:l},height:{value:c?.height||15},radius:{value:c?.radius||100}},w=new Jp(1,16),R=new Gu({uniforms:Z,fragmentShader:H,vertexShader:N,side:kf});super(w,R)}set radius(l){this.material.uniforms.radius.value=l}get radius(){return this.material.uniforms.radius.value}set height(l){this.material.uniforms.height.value=l}get height(){return this.material.uniforms.height.value}}var kh=Object.defineProperty,$h=(u,l,c)=>l in u?kh(u,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[l]=c,ev=(u,l,c)=>($h(u,l+"",c),c);class tv{constructor(){ev(this,"_listeners")}addEventListener(l,c){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[l]===void 0&&(r[l]=[]),r[l].indexOf(c)===-1&&r[l].push(c)}hasEventListener(l,c){if(this._listeners===void 0)return!1;const r=this._listeners;return r[l]!==void 0&&r[l].indexOf(c)!==-1}removeEventListener(l,c){if(this._listeners===void 0)return;const o=this._listeners[l];if(o!==void 0){const d=o.indexOf(c);d!==-1&&o.splice(d,1)}}dispatchEvent(l){if(this._listeners===void 0)return;const r=this._listeners[l.type];if(r!==void 0){l.target=this;const o=r.slice(0);for(let d=0,y=o.length;d<y;d++)o[d].call(this,l);l.target=null}}}var av=Object.defineProperty,nv=(u,l,c)=>l in u?av(u,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[l]=c,Ee=(u,l,c)=>(nv(u,typeof l!="symbol"?l+"":l,c),c);const _u=new Fp,Yf=new Ip,lv=Math.cos(70*(Math.PI/180)),qf=(u,l)=>(u%l+l)%l;class iv extends tv{constructor(l,c){super(),Ee(this,"object"),Ee(this,"domElement"),Ee(this,"enabled",!0),Ee(this,"target",new Ie),Ee(this,"minDistance",0),Ee(this,"maxDistance",1/0),Ee(this,"minZoom",0),Ee(this,"maxZoom",1/0),Ee(this,"minPolarAngle",0),Ee(this,"maxPolarAngle",Math.PI),Ee(this,"minAzimuthAngle",-1/0),Ee(this,"maxAzimuthAngle",1/0),Ee(this,"enableDamping",!1),Ee(this,"dampingFactor",.05),Ee(this,"enableZoom",!0),Ee(this,"zoomSpeed",1),Ee(this,"enableRotate",!0),Ee(this,"rotateSpeed",1),Ee(this,"enablePan",!0),Ee(this,"panSpeed",1),Ee(this,"screenSpacePanning",!0),Ee(this,"keyPanSpeed",7),Ee(this,"zoomToCursor",!1),Ee(this,"autoRotate",!1),Ee(this,"autoRotateSpeed",2),Ee(this,"reverseOrbit",!1),Ee(this,"reverseHorizontalOrbit",!1),Ee(this,"reverseVerticalOrbit",!1),Ee(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ee(this,"mouseButtons",{LEFT:Un.ROTATE,MIDDLE:Un.DOLLY,RIGHT:Un.PAN}),Ee(this,"touches",{ONE:Hn.ROTATE,TWO:Hn.DOLLY_PAN}),Ee(this,"target0"),Ee(this,"position0"),Ee(this,"zoom0"),Ee(this,"_domElementKeyEvents",null),Ee(this,"getPolarAngle"),Ee(this,"getAzimuthalAngle"),Ee(this,"setPolarAngle"),Ee(this,"setAzimuthalAngle"),Ee(this,"getDistance"),Ee(this,"getZoomScale"),Ee(this,"listenToKeyEvents"),Ee(this,"stopListenToKeyEvents"),Ee(this,"saveState"),Ee(this,"reset"),Ee(this,"update"),Ee(this,"connect"),Ee(this,"dispose"),Ee(this,"dollyIn"),Ee(this,"dollyOut"),Ee(this,"getScale"),Ee(this,"setScale"),this.object=l,this.domElement=c,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>E.phi,this.getAzimuthalAngle=()=>E.theta,this.setPolarAngle=z=>{let W=qf(z,2*Math.PI),de=E.phi;de<0&&(de+=2*Math.PI),W<0&&(W+=2*Math.PI);let we=Math.abs(W-de);2*Math.PI-we<we&&(W<de?W+=2*Math.PI:de+=2*Math.PI),S.phi=W-de,r.update()},this.setAzimuthalAngle=z=>{let W=qf(z,2*Math.PI),de=E.theta;de<0&&(de+=2*Math.PI),W<0&&(W+=2*Math.PI);let we=Math.abs(W-de);2*Math.PI-we<we&&(W<de?W+=2*Math.PI:de+=2*Math.PI),S.theta=W-de,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=z=>{z.addEventListener("keydown",dn),this._domElementKeyEvents=z},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",dn),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(o),r.update(),h=v.NONE},this.update=(()=>{const z=new Ie,W=new Ie(0,1,0),de=new hf().setFromUnitVectors(l.up,W),we=de.clone().invert(),ae=new Ie,ht=new hf,Ft=2*Math.PI;return function(){const Xn=r.object.position;de.setFromUnitVectors(l.up,W),we.copy(de).invert(),z.copy(Xn).sub(r.target),z.applyQuaternion(de),E.setFromVector3(z),r.autoRotate&&h===v.NONE&&re(be()),r.enableDamping?(E.theta+=S.theta*r.dampingFactor,E.phi+=S.phi*r.dampingFactor):(E.theta+=S.theta,E.phi+=S.phi);let Xt=r.minAzimuthAngle,Ct=r.maxAzimuthAngle;isFinite(Xt)&&isFinite(Ct)&&(Xt<-Math.PI?Xt+=Ft:Xt>Math.PI&&(Xt-=Ft),Ct<-Math.PI?Ct+=Ft:Ct>Math.PI&&(Ct-=Ft),Xt<=Ct?E.theta=Math.max(Xt,Math.min(Ct,E.theta)):E.theta=E.theta>(Xt+Ct)/2?Math.max(Xt,E.theta):Math.min(Ct,E.theta)),E.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,E.phi)),E.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(N,r.dampingFactor):r.target.add(N),r.zoomToCursor&&K||r.object.isOrthographicCamera?E.radius=je(E.radius):E.radius=je(E.radius*M),z.setFromSpherical(E),z.applyQuaternion(we),Xn.copy(r.target).add(z),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(S.theta*=1-r.dampingFactor,S.phi*=1-r.dampingFactor,N.multiplyScalar(1-r.dampingFactor)):(S.set(0,0,0),N.set(0,0,0));let It=!1;if(r.zoomToCursor&&K){let oa=null;if(r.object instanceof Tu&&r.object.isPerspectiveCamera){const Ba=z.length();oa=je(Ba*M);const Ia=Ba-oa;r.object.position.addScaledVector(ce,Ia),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ba=new Ie(Y.x,Y.y,0);Ba.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/M)),r.object.updateProjectionMatrix(),It=!0;const Ia=new Ie(Y.x,Y.y,0);Ia.unproject(r.object),r.object.position.sub(Ia).add(Ba),r.object.updateMatrixWorld(),oa=z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;oa!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(oa).add(r.object.position):(_u.origin.copy(r.object.position),_u.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(_u.direction))<lv?l.lookAt(r.target):(Yf.setFromNormalAndCoplanarPoint(r.object.up,r.target),_u.intersectPlane(Yf,r.target))))}else r.object instanceof zi&&r.object.isOrthographicCamera&&(It=M!==1,It&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/M)),r.object.updateProjectionMatrix()));return M=1,K=!1,It||ae.distanceToSquared(r.object.position)>g||8*(1-ht.dot(r.object.quaternion))>g?(r.dispatchEvent(o),ae.copy(r.object.position),ht.copy(r.object.quaternion),It=!1,!0):!1}})(),this.connect=z=>{r.domElement=z,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",mn),r.domElement.addEventListener("pointerdown",ml),r.domElement.addEventListener("pointercancel",Ha),r.domElement.addEventListener("wheel",fn)},this.dispose=()=>{var z,W,de,we,ae,ht;r.domElement&&(r.domElement.style.touchAction="auto"),(z=r.domElement)==null||z.removeEventListener("contextmenu",mn),(W=r.domElement)==null||W.removeEventListener("pointerdown",ml),(de=r.domElement)==null||de.removeEventListener("pointercancel",Ha),(we=r.domElement)==null||we.removeEventListener("wheel",fn),(ae=r.domElement)==null||ae.ownerDocument.removeEventListener("pointermove",Ja),(ht=r.domElement)==null||ht.ownerDocument.removeEventListener("pointerup",Ha),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",dn)};const r=this,o={type:"change"},d={type:"start"},y={type:"end"},v={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=v.NONE;const g=1e-6,E=new pf,S=new pf;let M=1;const N=new Ie,H=new qt,Z=new qt,w=new qt,R=new qt,T=new qt,L=new qt,I=new qt,q=new qt,V=new qt,ce=new Ie,Y=new qt;let K=!1;const J=[],te={};function be(){return 2*Math.PI/60/60*r.autoRotateSpeed}function ue(){return Math.pow(.95,r.zoomSpeed)}function re(z){r.reverseOrbit||r.reverseHorizontalOrbit?S.theta+=z:S.theta-=z}function xe(z){r.reverseOrbit||r.reverseVerticalOrbit?S.phi+=z:S.phi-=z}const Q=(()=>{const z=new Ie;return function(de,we){z.setFromMatrixColumn(we,0),z.multiplyScalar(-de),N.add(z)}})(),fe=(()=>{const z=new Ie;return function(de,we){r.screenSpacePanning===!0?z.setFromMatrixColumn(we,1):(z.setFromMatrixColumn(we,0),z.crossVectors(r.object.up,z)),z.multiplyScalar(de),N.add(z)}})(),pe=(()=>{const z=new Ie;return function(de,we){const ae=r.domElement;if(ae&&r.object instanceof Tu&&r.object.isPerspectiveCamera){const ht=r.object.position;z.copy(ht).sub(r.target);let Ft=z.length();Ft*=Math.tan(r.object.fov/2*Math.PI/180),Q(2*de*Ft/ae.clientHeight,r.object.matrix),fe(2*we*Ft/ae.clientHeight,r.object.matrix)}else ae&&r.object instanceof zi&&r.object.isOrthographicCamera?(Q(de*(r.object.right-r.object.left)/r.object.zoom/ae.clientWidth,r.object.matrix),fe(we*(r.object.top-r.object.bottom)/r.object.zoom/ae.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ve(z){r.object instanceof Tu&&r.object.isPerspectiveCamera||r.object instanceof zi&&r.object.isOrthographicCamera?M=z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function he(z){ve(M/z)}function Me(z){ve(M*z)}function ye(z){if(!r.zoomToCursor||!r.domElement)return;K=!0;const W=r.domElement.getBoundingClientRect(),de=z.clientX-W.left,we=z.clientY-W.top,ae=W.width,ht=W.height;Y.x=de/ae*2-1,Y.y=-(we/ht)*2+1,ce.set(Y.x,Y.y,1).unproject(r.object).sub(r.object.position).normalize()}function je(z){return Math.max(r.minDistance,Math.min(r.maxDistance,z))}function Ae(z){H.set(z.clientX,z.clientY)}function ut(z){ye(z),I.set(z.clientX,z.clientY)}function Ue(z){R.set(z.clientX,z.clientY)}function zt(z){Z.set(z.clientX,z.clientY),w.subVectors(Z,H).multiplyScalar(r.rotateSpeed);const W=r.domElement;W&&(re(2*Math.PI*w.x/W.clientHeight),xe(2*Math.PI*w.y/W.clientHeight)),H.copy(Z),r.update()}function Et(z){q.set(z.clientX,z.clientY),V.subVectors(q,I),V.y>0?he(ue()):V.y<0&&Me(ue()),I.copy(q),r.update()}function fl(z){T.set(z.clientX,z.clientY),L.subVectors(T,R).multiplyScalar(r.panSpeed),pe(L.x,L.y),R.copy(T),r.update()}function dl(z){ye(z),z.deltaY<0?Me(ue()):z.deltaY>0&&he(ue()),r.update()}function Oa(z){let W=!1;switch(z.code){case r.keys.UP:pe(0,r.keyPanSpeed),W=!0;break;case r.keys.BOTTOM:pe(0,-r.keyPanSpeed),W=!0;break;case r.keys.LEFT:pe(r.keyPanSpeed,0),W=!0;break;case r.keys.RIGHT:pe(-r.keyPanSpeed,0),W=!0;break}W&&(z.preventDefault(),r.update())}function ja(){if(J.length==1)H.set(J[0].pageX,J[0].pageY);else{const z=.5*(J[0].pageX+J[1].pageX),W=.5*(J[0].pageY+J[1].pageY);H.set(z,W)}}function Ta(){if(J.length==1)R.set(J[0].pageX,J[0].pageY);else{const z=.5*(J[0].pageX+J[1].pageX),W=.5*(J[0].pageY+J[1].pageY);R.set(z,W)}}function Da(){const z=J[0].pageX-J[1].pageX,W=J[0].pageY-J[1].pageY,de=Math.sqrt(z*z+W*W);I.set(0,de)}function Qa(){r.enableZoom&&Da(),r.enablePan&&Ta()}function Yn(){r.enableZoom&&Da(),r.enableRotate&&ja()}function Jt(z){if(J.length==1)Z.set(z.pageX,z.pageY);else{const de=sa(z),we=.5*(z.pageX+de.x),ae=.5*(z.pageY+de.y);Z.set(we,ae)}w.subVectors(Z,H).multiplyScalar(r.rotateSpeed);const W=r.domElement;W&&(re(2*Math.PI*w.x/W.clientHeight),xe(2*Math.PI*w.y/W.clientHeight)),H.copy(Z)}function qn(z){if(J.length==1)T.set(z.pageX,z.pageY);else{const W=sa(z),de=.5*(z.pageX+W.x),we=.5*(z.pageY+W.y);T.set(de,we)}L.subVectors(T,R).multiplyScalar(r.panSpeed),pe(L.x,L.y),R.copy(T)}function Ka(z){const W=sa(z),de=z.pageX-W.x,we=z.pageY-W.y,ae=Math.sqrt(de*de+we*we);q.set(0,ae),V.set(0,Math.pow(q.y/I.y,r.zoomSpeed)),he(V.y),I.copy(q)}function Lt(z){r.enableZoom&&Ka(z),r.enablePan&&qn(z)}function Ua(z){r.enableZoom&&Ka(z),r.enableRotate&&Jt(z)}function ml(z){var W,de;r.enabled!==!1&&(J.length===0&&((W=r.domElement)==null||W.ownerDocument.addEventListener("pointermove",Ja),(de=r.domElement)==null||de.ownerDocument.addEventListener("pointerup",Ha)),Zn(z),z.pointerType==="touch"?Fa(z):on(z))}function Ja(z){r.enabled!==!1&&(z.pointerType==="touch"?ei(z):$l(z))}function Ha(z){var W,de,we;At(z),J.length===0&&((W=r.domElement)==null||W.releasePointerCapture(z.pointerId),(de=r.domElement)==null||de.ownerDocument.removeEventListener("pointermove",Ja),(we=r.domElement)==null||we.ownerDocument.removeEventListener("pointerup",Ha)),r.dispatchEvent(y),h=v.NONE}function on(z){let W;switch(z.button){case 0:W=r.mouseButtons.LEFT;break;case 1:W=r.mouseButtons.MIDDLE;break;case 2:W=r.mouseButtons.RIGHT;break;default:W=-1}switch(W){case Un.DOLLY:if(r.enableZoom===!1)return;ut(z),h=v.DOLLY;break;case Un.ROTATE:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enablePan===!1)return;Ue(z),h=v.PAN}else{if(r.enableRotate===!1)return;Ae(z),h=v.ROTATE}break;case Un.PAN:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enableRotate===!1)return;Ae(z),h=v.ROTATE}else{if(r.enablePan===!1)return;Ue(z),h=v.PAN}break;default:h=v.NONE}h!==v.NONE&&r.dispatchEvent(d)}function $l(z){if(r.enabled!==!1)switch(h){case v.ROTATE:if(r.enableRotate===!1)return;zt(z);break;case v.DOLLY:if(r.enableZoom===!1)return;Et(z);break;case v.PAN:if(r.enablePan===!1)return;fl(z);break}}function fn(z){r.enabled===!1||r.enableZoom===!1||h!==v.NONE&&h!==v.ROTATE||(z.preventDefault(),r.dispatchEvent(d),dl(z),r.dispatchEvent(y))}function dn(z){r.enabled===!1||r.enablePan===!1||Oa(z)}function Fa(z){switch(et(z),J.length){case 1:switch(r.touches.ONE){case Hn.ROTATE:if(r.enableRotate===!1)return;ja(),h=v.TOUCH_ROTATE;break;case Hn.PAN:if(r.enablePan===!1)return;Ta(),h=v.TOUCH_PAN;break;default:h=v.NONE}break;case 2:switch(r.touches.TWO){case Hn.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Qa(),h=v.TOUCH_DOLLY_PAN;break;case Hn.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Yn(),h=v.TOUCH_DOLLY_ROTATE;break;default:h=v.NONE}break;default:h=v.NONE}h!==v.NONE&&r.dispatchEvent(d)}function ei(z){switch(et(z),h){case v.TOUCH_ROTATE:if(r.enableRotate===!1)return;Jt(z),r.update();break;case v.TOUCH_PAN:if(r.enablePan===!1)return;qn(z),r.update();break;case v.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Lt(z),r.update();break;case v.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ua(z),r.update();break;default:h=v.NONE}}function mn(z){r.enabled!==!1&&z.preventDefault()}function Zn(z){J.push(z)}function At(z){delete te[z.pointerId];for(let W=0;W<J.length;W++)if(J[W].pointerId==z.pointerId){J.splice(W,1);return}}function et(z){let W=te[z.pointerId];W===void 0&&(W=new qt,te[z.pointerId]=W),W.set(z.pageX,z.pageY)}function sa(z){const W=z.pointerId===J[0].pointerId?J[1]:J[0];return te[W.pointerId]}this.dollyIn=(z=ue())=>{Me(z),r.update()},this.dollyOut=(z=ue())=>{he(z),r.update()},this.getScale=()=>M,this.setScale=z=>{ve(z),r.update()},this.getZoomScale=()=>ue(),c!==void 0&&this.connect(c),this.update()}}let uv=class extends iv{constructor(l,c){super(l,c),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Un.PAN,this.mouseButtons.RIGHT=Un.ROTATE,this.touches.ONE=Hn.PAN,this.touches.TWO=Hn.DOLLY_ROTATE}};class rv extends $f{constructor(l){super(l),this.type=ra}parse(l){const y=function(Y,K){switch(Y){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(K||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(K||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(K||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(K||""))}},S=function(Y,K,J){K=K||1024;let be=Y.pos,ue=-1,re=0,xe="",Q=String.fromCharCode.apply(null,new Uint16Array(Y.subarray(be,be+128)));for(;0>(ue=Q.indexOf(`
`))&&re<K&&be<Y.byteLength;)xe+=Q,re+=Q.length,be+=128,Q+=String.fromCharCode.apply(null,new Uint16Array(Y.subarray(be,be+128)));return-1<ue?(Y.pos+=re+ue+1,xe+Q.slice(0,ue)):!1},M=function(Y){const K=/^#\?(\S+)/,J=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,te=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,be=/^\s*FORMAT=(\S+)\s*$/,ue=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,re={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,Q;for((Y.pos>=Y.byteLength||!(xe=S(Y)))&&y(1,"no header found"),(Q=xe.match(K))||y(3,"bad initial token"),re.valid|=1,re.programtype=Q[1],re.string+=xe+`
`;xe=S(Y),xe!==!1;){if(re.string+=xe+`
`,xe.charAt(0)==="#"){re.comments+=xe+`
`;continue}if((Q=xe.match(J))&&(re.gamma=parseFloat(Q[1])),(Q=xe.match(te))&&(re.exposure=parseFloat(Q[1])),(Q=xe.match(be))&&(re.valid|=2,re.format=Q[1]),(Q=xe.match(ue))&&(re.valid|=4,re.height=parseInt(Q[1],10),re.width=parseInt(Q[2],10)),re.valid&2&&re.valid&4)break}return re.valid&2||y(3,"missing format specifier"),re.valid&4||y(3,"missing image size specifier"),re},N=function(Y,K,J){const te=K;if(te<8||te>32767||Y[0]!==2||Y[1]!==2||Y[2]&128)return new Uint8Array(Y);te!==(Y[2]<<8|Y[3])&&y(3,"wrong scanline width");const be=new Uint8Array(4*K*J);be.length||y(4,"unable to allocate buffer space");let ue=0,re=0;const xe=4*te,Q=new Uint8Array(4),fe=new Uint8Array(xe);let pe=J;for(;pe>0&&re<Y.byteLength;){re+4>Y.byteLength&&y(1),Q[0]=Y[re++],Q[1]=Y[re++],Q[2]=Y[re++],Q[3]=Y[re++],(Q[0]!=2||Q[1]!=2||(Q[2]<<8|Q[3])!=te)&&y(3,"bad rgbe scanline format");let ve=0,he;for(;ve<xe&&re<Y.byteLength;){he=Y[re++];const ye=he>128;if(ye&&(he-=128),(he===0||ve+he>xe)&&y(3,"bad scanline data"),ye){const je=Y[re++];for(let Ae=0;Ae<he;Ae++)fe[ve++]=je}else fe.set(Y.subarray(re,re+he),ve),ve+=he,re+=he}const Me=te;for(let ye=0;ye<Me;ye++){let je=0;be[ue]=fe[ye+je],je+=te,be[ue+1]=fe[ye+je],je+=te,be[ue+2]=fe[ye+je],je+=te,be[ue+3]=fe[ye+je],ue+=4}pe--}return be},H=function(Y,K,J,te){const be=Y[K+3],ue=Math.pow(2,be-128)/255;J[te+0]=Y[K+0]*ue,J[te+1]=Y[K+1]*ue,J[te+2]=Y[K+2]*ue,J[te+3]=1},Z=function(Y,K,J,te){const be=Y[K+3],ue=Math.pow(2,be-128)/255;J[te+0]=Xl.toHalfFloat(Math.min(Y[K+0]*ue,65504)),J[te+1]=Xl.toHalfFloat(Math.min(Y[K+1]*ue,65504)),J[te+2]=Xl.toHalfFloat(Math.min(Y[K+2]*ue,65504)),J[te+3]=Xl.toHalfFloat(1)},w=new Uint8Array(l);w.pos=0;const R=M(w),T=R.width,L=R.height,I=N(w.subarray(w.pos),T,L);let q,V,ce;switch(this.type){case Va:ce=I.length/4;const Y=new Float32Array(ce*4);for(let J=0;J<ce;J++)H(I,J*4,Y,J*4);q=Y,V=Va;break;case ra:ce=I.length/4;const K=new Uint16Array(ce*4);for(let J=0;J<ce;J++)Z(I,J*4,K,J*4);q=K,V=ra;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:T,height:L,data:q,header:R.string,gamma:R.gamma,exposure:R.exposure,type:V}}setDataType(l){return this.type=l,this}load(l,c,r,o){function d(y,v){switch(y.type){case Va:case ra:"colorSpace"in y?y.colorSpace="srgb-linear":y.encoding=3e3,y.minFilter=Ma,y.magFilter=Ma,y.generateMipmaps=!1,y.flipY=!0;break}c&&c(y,v)}return super.load(l,d,r,o)}}const xi=Md>=152;class cv extends $f{constructor(l){super(l),this.type=ra}parse(l){const K=Math.pow(2.7182818,2.2);function J(f,p){for(var _=0,j=0;j<65536;++j)(j==0||f[j>>3]&1<<(j&7))&&(p[_++]=j);for(var G=_-1;_<65536;)p[_++]=0;return G}function te(f){for(var p=0;p<16384;p++)f[p]={},f[p].len=0,f[p].lit=0,f[p].p=null}const be={l:0,c:0,lc:0};function ue(f,p,_,j,G){for(;_<f;)p=p<<8|sa(j,G),_+=8;_-=f,be.l=p>>_&(1<<f)-1,be.c=p,be.lc=_}const re=new Array(59);function xe(f){for(var p=0;p<=58;++p)re[p]=0;for(var p=0;p<65537;++p)re[f[p]]+=1;for(var _=0,p=58;p>0;--p){var j=_+re[p]>>1;re[p]=_,_=j}for(var p=0;p<65537;++p){var G=f[p];G>0&&(f[p]=G|re[G]++<<6)}}function Q(f,p,_,j,G,B,ee){for(var P=_,k=0,F=0;G<=B;G++){if(P.value-_.value>j)return!1;ue(6,k,F,f,P);var ie=be.l;if(k=be.c,F=be.lc,ee[G]=ie,ie==63){if(P.value-_.value>j)throw"Something wrong with hufUnpackEncTable";ue(8,k,F,f,P);var le=be.l+6;if(k=be.c,F=be.lc,G+le>B+1)throw"Something wrong with hufUnpackEncTable";for(;le--;)ee[G++]=0;G--}else if(ie>=59){var le=ie-59+2;if(G+le>B+1)throw"Something wrong with hufUnpackEncTable";for(;le--;)ee[G++]=0;G--}}xe(ee)}function fe(f){return f&63}function pe(f){return f>>6}function ve(f,p,_,j){for(;p<=_;p++){var G=pe(f[p]),B=fe(f[p]);if(G>>B)throw"Invalid table entry";if(B>14){var ee=j[G>>B-14];if(ee.len)throw"Invalid table entry";if(ee.lit++,ee.p){var P=ee.p;ee.p=new Array(ee.lit);for(var k=0;k<ee.lit-1;++k)ee.p[k]=P[k]}else ee.p=new Array(1);ee.p[ee.lit-1]=p}else if(B)for(var F=0,k=1<<14-B;k>0;k--){var ee=j[(G<<14-B)+F];if(ee.len||ee.p)throw"Invalid table entry";ee.len=B,ee.lit=p,F++}}return!0}const he={c:0,lc:0};function Me(f,p,_,j){f=f<<8|sa(_,j),p+=8,he.c=f,he.lc=p}const ye={c:0,lc:0};function je(f,p,_,j,G,B,ee,P,k,F){if(f==p){j<8&&(Me(_,j,G,ee),_=he.c,j=he.lc),j-=8;var ie=_>>j,ie=new Uint8Array([ie])[0];if(k.value+ie>F)return!1;for(var le=P[k.value-1];ie-- >0;)P[k.value++]=le}else if(k.value<F)P[k.value++]=f;else return!1;ye.c=_,ye.lc=j}function Ae(f){return f&65535}function ut(f){var p=Ae(f);return p>32767?p-65536:p}const Ue={a:0,b:0};function zt(f,p){var _=ut(f),j=ut(p),G=j,B=_+(G&1)+(G>>1),ee=B,P=B-G;Ue.a=ee,Ue.b=P}function Et(f,p){var _=Ae(f),j=Ae(p),G=_-(j>>1)&65535,B=j+G-32768&65535;Ue.a=B,Ue.b=G}function fl(f,p,_,j,G,B,ee){for(var P=ee<16384,k=_>G?G:_,F=1,ie;F<=k;)F<<=1;for(F>>=1,ie=F,F>>=1;F>=1;){for(var le=0,ke=le+B*(G-ie),me=B*F,ge=B*ie,Ne=j*F,Ce=j*ie,Xe,Qe,ot,_t;le<=ke;le+=ge){for(var Ke=le,Pt=le+j*(_-ie);Ke<=Pt;Ke+=Ce){var Je=Ke+Ne,pt=Ke+me,xa=pt+Ne;P?(zt(f[Ke+p],f[pt+p]),Xe=Ue.a,ot=Ue.b,zt(f[Je+p],f[xa+p]),Qe=Ue.a,_t=Ue.b,zt(Xe,Qe),f[Ke+p]=Ue.a,f[Je+p]=Ue.b,zt(ot,_t),f[pt+p]=Ue.a,f[xa+p]=Ue.b):(Et(f[Ke+p],f[pt+p]),Xe=Ue.a,ot=Ue.b,Et(f[Je+p],f[xa+p]),Qe=Ue.a,_t=Ue.b,Et(Xe,Qe),f[Ke+p]=Ue.a,f[Je+p]=Ue.b,Et(ot,_t),f[pt+p]=Ue.a,f[xa+p]=Ue.b)}if(_&F){var pt=Ke+me;P?zt(f[Ke+p],f[pt+p]):Et(f[Ke+p],f[pt+p]),Xe=Ue.a,f[pt+p]=Ue.b,f[Ke+p]=Xe}}if(G&F)for(var Ke=le,Pt=le+j*(_-ie);Ke<=Pt;Ke+=Ce){var Je=Ke+Ne;P?zt(f[Ke+p],f[Je+p]):Et(f[Ke+p],f[Je+p]),Xe=Ue.a,f[Je+p]=Ue.b,f[Ke+p]=Xe}ie=F,F>>=1}return le}function dl(f,p,_,j,G,B,ee,P,k,F){for(var ie=0,le=0,ke=P,me=Math.trunc(G.value+(B+7)/8);G.value<me;)for(Me(ie,le,_,G),ie=he.c,le=he.lc;le>=14;){var ge=ie>>le-14&16383,Ne=p[ge];if(Ne.len)le-=Ne.len,je(Ne.lit,ee,ie,le,_,j,G,k,F,ke),ie=ye.c,le=ye.lc;else{if(!Ne.p)throw"hufDecode issues";var Ce;for(Ce=0;Ce<Ne.lit;Ce++){for(var Xe=fe(f[Ne.p[Ce]]);le<Xe&&G.value<me;)Me(ie,le,_,G),ie=he.c,le=he.lc;if(le>=Xe&&pe(f[Ne.p[Ce]])==(ie>>le-Xe&(1<<Xe)-1)){le-=Xe,je(Ne.p[Ce],ee,ie,le,_,j,G,k,F,ke),ie=ye.c,le=ye.lc;break}}if(Ce==Ne.lit)throw"hufDecode issues"}}var Qe=8-B&7;for(ie>>=Qe,le-=Qe;le>0;){var Ne=p[ie<<14-le&16383];if(Ne.len)le-=Ne.len,je(Ne.lit,ee,ie,le,_,j,G,k,F,ke),ie=ye.c,le=ye.lc;else throw"hufDecode issues"}return!0}function Oa(f,p,_,j,G,B){var ee={value:0},P=_.value,k=et(p,_),F=et(p,_);_.value+=4;var ie=et(p,_);if(_.value+=4,k<0||k>=65537||F<0||F>=65537)throw"Something wrong with HUF_ENCSIZE";var le=new Array(65537),ke=new Array(16384);te(ke);var me=j-(_.value-P);if(Q(f,p,_,me,k,F,le),ie>8*(j-(_.value-P)))throw"Something wrong with hufUncompress";ve(le,k,F,ke),dl(le,ke,f,p,_,ie,F,B,G,ee)}function ja(f,p,_){for(var j=0;j<_;++j)p[j]=f[p[j]]}function Ta(f){for(var p=1;p<f.length;p++){var _=f[p-1]+f[p]-128;f[p]=_}}function Da(f,p){for(var _=0,j=Math.floor((f.length+1)/2),G=0,B=f.length-1;!(G>B||(p[G++]=f[_++],G>B));)p[G++]=f[j++]}function Qa(f){for(var p=f.byteLength,_=new Array,j=0,G=new DataView(f);p>0;){var B=G.getInt8(j++);if(B<0){var ee=-B;p-=ee+1;for(var P=0;P<ee;P++)_.push(G.getUint8(j++))}else{var ee=B;p-=2;for(var k=G.getUint8(j++),P=0;P<ee+1;P++)_.push(k)}}return _}function Yn(f,p,_,j,G,B){var Je=new DataView(B.buffer),ee=_[f.idx[0]].width,P=_[f.idx[0]].height,k=3,F=Math.floor(ee/8),ie=Math.ceil(ee/8),le=Math.ceil(P/8),ke=ee-(ie-1)*8,me=P-(le-1)*8,ge={value:0},Ne=new Array(k),Ce=new Array(k),Xe=new Array(k),Qe=new Array(k),ot=new Array(k);for(let Ve=0;Ve<k;++Ve)ot[Ve]=p[f.idx[Ve]],Ne[Ve]=Ve<1?0:Ne[Ve-1]+ie*le,Ce[Ve]=new Float32Array(64),Xe[Ve]=new Uint16Array(64),Qe[Ve]=new Uint16Array(ie*64);for(let Ve=0;Ve<le;++Ve){var _t=8;Ve==le-1&&(_t=me);var Ke=8;for(let $e=0;$e<ie;++$e){$e==ie-1&&(Ke=ke);for(let Ye=0;Ye<k;++Ye)Xe[Ye].fill(0),Xe[Ye][0]=G[Ne[Ye]++],Jt(ge,j,Xe[Ye]),qn(Xe[Ye],Ce[Ye]),Ka(Ce[Ye]);Lt(Ce);for(let Ye=0;Ye<k;++Ye)Ua(Ce[Ye],Qe[Ye],$e*64)}let vt=0;for(let $e=0;$e<k;++$e){const Ye=_[f.idx[$e]].type;for(let wt=8*Ve;wt<8*Ve+_t;++wt){vt=ot[$e][wt];for(let Ga=0;Ga<F;++Ga){const Ot=Ga*64+(wt&7)*8;Je.setUint16(vt+0*Ye,Qe[$e][Ot+0],!0),Je.setUint16(vt+2*Ye,Qe[$e][Ot+1],!0),Je.setUint16(vt+4*Ye,Qe[$e][Ot+2],!0),Je.setUint16(vt+6*Ye,Qe[$e][Ot+3],!0),Je.setUint16(vt+8*Ye,Qe[$e][Ot+4],!0),Je.setUint16(vt+10*Ye,Qe[$e][Ot+5],!0),Je.setUint16(vt+12*Ye,Qe[$e][Ot+6],!0),Je.setUint16(vt+14*Ye,Qe[$e][Ot+7],!0),vt+=16*Ye}}if(F!=ie)for(let wt=8*Ve;wt<8*Ve+_t;++wt){const Ga=ot[$e][wt]+8*F*2*Ye,Ot=F*64+(wt&7)*8;for(let Ya=0;Ya<Ke;++Ya)Je.setUint16(Ga+Ya*2*Ye,Qe[$e][Ot+Ya],!0)}}}for(var Pt=new Uint16Array(ee),Je=new DataView(B.buffer),pt=0;pt<k;++pt){_[f.idx[pt]].decoded=!0;var xa=_[f.idx[pt]].type;if(_[pt].type==2)for(var vn=0;vn<P;++vn){const Ve=ot[pt][vn];for(var Bt=0;Bt<ee;++Bt)Pt[Bt]=Je.getUint16(Ve+Bt*2*xa,!0);for(var Bt=0;Bt<ee;++Bt)Je.setFloat32(Ve+Bt*2*xa,ae(Pt[Bt]),!0)}}}function Jt(f,p,_){for(var j,G=1;G<64;)j=p[f.value],j==65280?G=64:j>>8==255?G+=j&255:(_[G]=j,G++),f.value++}function qn(f,p){p[0]=ae(f[0]),p[1]=ae(f[1]),p[2]=ae(f[5]),p[3]=ae(f[6]),p[4]=ae(f[14]),p[5]=ae(f[15]),p[6]=ae(f[27]),p[7]=ae(f[28]),p[8]=ae(f[2]),p[9]=ae(f[4]),p[10]=ae(f[7]),p[11]=ae(f[13]),p[12]=ae(f[16]),p[13]=ae(f[26]),p[14]=ae(f[29]),p[15]=ae(f[42]),p[16]=ae(f[3]),p[17]=ae(f[8]),p[18]=ae(f[12]),p[19]=ae(f[17]),p[20]=ae(f[25]),p[21]=ae(f[30]),p[22]=ae(f[41]),p[23]=ae(f[43]),p[24]=ae(f[9]),p[25]=ae(f[11]),p[26]=ae(f[18]),p[27]=ae(f[24]),p[28]=ae(f[31]),p[29]=ae(f[40]),p[30]=ae(f[44]),p[31]=ae(f[53]),p[32]=ae(f[10]),p[33]=ae(f[19]),p[34]=ae(f[23]),p[35]=ae(f[32]),p[36]=ae(f[39]),p[37]=ae(f[45]),p[38]=ae(f[52]),p[39]=ae(f[54]),p[40]=ae(f[20]),p[41]=ae(f[22]),p[42]=ae(f[33]),p[43]=ae(f[38]),p[44]=ae(f[46]),p[45]=ae(f[51]),p[46]=ae(f[55]),p[47]=ae(f[60]),p[48]=ae(f[21]),p[49]=ae(f[34]),p[50]=ae(f[37]),p[51]=ae(f[47]),p[52]=ae(f[50]),p[53]=ae(f[56]),p[54]=ae(f[59]),p[55]=ae(f[61]),p[56]=ae(f[35]),p[57]=ae(f[36]),p[58]=ae(f[48]),p[59]=ae(f[49]),p[60]=ae(f[57]),p[61]=ae(f[58]),p[62]=ae(f[62]),p[63]=ae(f[63])}function Ka(f){const p=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),j=.5*Math.cos(3.14159/8),G=.5*Math.cos(3*3.14159/16),B=.5*Math.cos(5*3.14159/16),ee=.5*Math.cos(3*3.14159/8),P=.5*Math.cos(7*3.14159/16);for(var k=new Array(4),F=new Array(4),ie=new Array(4),le=new Array(4),ke=0;ke<8;++ke){var me=ke*8;k[0]=j*f[me+2],k[1]=ee*f[me+2],k[2]=j*f[me+6],k[3]=ee*f[me+6],F[0]=_*f[me+1]+G*f[me+3]+B*f[me+5]+P*f[me+7],F[1]=G*f[me+1]-P*f[me+3]-_*f[me+5]-B*f[me+7],F[2]=B*f[me+1]-_*f[me+3]+P*f[me+5]+G*f[me+7],F[3]=P*f[me+1]-B*f[me+3]+G*f[me+5]-_*f[me+7],ie[0]=p*(f[me+0]+f[me+4]),ie[3]=p*(f[me+0]-f[me+4]),ie[1]=k[0]+k[3],ie[2]=k[1]-k[2],le[0]=ie[0]+ie[1],le[1]=ie[3]+ie[2],le[2]=ie[3]-ie[2],le[3]=ie[0]-ie[1],f[me+0]=le[0]+F[0],f[me+1]=le[1]+F[1],f[me+2]=le[2]+F[2],f[me+3]=le[3]+F[3],f[me+4]=le[3]-F[3],f[me+5]=le[2]-F[2],f[me+6]=le[1]-F[1],f[me+7]=le[0]-F[0]}for(var ge=0;ge<8;++ge)k[0]=j*f[16+ge],k[1]=ee*f[16+ge],k[2]=j*f[48+ge],k[3]=ee*f[48+ge],F[0]=_*f[8+ge]+G*f[24+ge]+B*f[40+ge]+P*f[56+ge],F[1]=G*f[8+ge]-P*f[24+ge]-_*f[40+ge]-B*f[56+ge],F[2]=B*f[8+ge]-_*f[24+ge]+P*f[40+ge]+G*f[56+ge],F[3]=P*f[8+ge]-B*f[24+ge]+G*f[40+ge]-_*f[56+ge],ie[0]=p*(f[ge]+f[32+ge]),ie[3]=p*(f[ge]-f[32+ge]),ie[1]=k[0]+k[3],ie[2]=k[1]-k[2],le[0]=ie[0]+ie[1],le[1]=ie[3]+ie[2],le[2]=ie[3]-ie[2],le[3]=ie[0]-ie[1],f[0+ge]=le[0]+F[0],f[8+ge]=le[1]+F[1],f[16+ge]=le[2]+F[2],f[24+ge]=le[3]+F[3],f[32+ge]=le[3]-F[3],f[40+ge]=le[2]-F[2],f[48+ge]=le[1]-F[1],f[56+ge]=le[0]-F[0]}function Lt(f){for(var p=0;p<64;++p){var _=f[0][p],j=f[1][p],G=f[2][p];f[0][p]=_+1.5747*G,f[1][p]=_-.1873*j-.4682*G,f[2][p]=_+1.8556*j}}function Ua(f,p,_){for(var j=0;j<64;++j)p[_+j]=Xl.toHalfFloat(ml(f[j]))}function ml(f){return f<=1?Math.sign(f)*Math.pow(Math.abs(f),2.2):Math.sign(f)*Math.pow(K,Math.abs(f)-1)}function Ja(f){return new DataView(f.array.buffer,f.offset.value,f.size)}function Ha(f){var p=f.viewer.buffer.slice(f.offset.value,f.offset.value+f.size),_=new Uint8Array(Qa(p)),j=new Uint8Array(_.length);return Ta(_),Da(_,j),new DataView(j.buffer)}function on(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),_=bu(p),j=new Uint8Array(_.length);return Ta(_),Da(_,j),new DataView(j.buffer)}function $l(f){for(var p=f.viewer,_={value:f.offset.value},j=new Uint16Array(f.width*f.scanlineBlockSize*(f.channels*f.type)),G=new Uint8Array(8192),B=0,ee=new Array(f.channels),P=0;P<f.channels;P++)ee[P]={},ee[P].start=B,ee[P].end=ee[P].start,ee[P].nx=f.width,ee[P].ny=f.lines,ee[P].size=f.type,B+=ee[P].nx*ee[P].ny*ee[P].size;var k=ht(p,_),F=ht(p,_);if(F>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(k<=F)for(var P=0;P<F-k+1;P++)G[P+k]=z(p,_);var ie=new Uint16Array(65536),le=J(G,ie),ke=et(p,_);Oa(f.array,p,_,ke,j,B);for(var P=0;P<f.channels;++P)for(var me=ee[P],ge=0;ge<ee[P].size;++ge)fl(j,me.start+ge,me.nx,me.size,me.ny,me.nx*me.size,le);ja(ie,j,B);for(var Ne=0,Ce=new Uint8Array(j.buffer.byteLength),Xe=0;Xe<f.lines;Xe++)for(var Qe=0;Qe<f.channels;Qe++){var me=ee[Qe],ot=me.nx*me.size,_t=new Uint8Array(j.buffer,me.end*2,ot*2);Ce.set(_t,Ne),Ne+=ot*2,me.end+=ot}return new DataView(Ce.buffer)}function fn(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),_=bu(p);const j=f.lines*f.channels*f.width,G=f.type==1?new Uint16Array(j):new Uint32Array(j);let B=0,ee=0;const P=new Array(4);for(let k=0;k<f.lines;k++)for(let F=0;F<f.channels;F++){let ie=0;switch(f.type){case 1:P[0]=B,P[1]=P[0]+f.width,B=P[1]+f.width;for(let le=0;le<f.width;++le){const ke=_[P[0]++]<<8|_[P[1]++];ie+=ke,G[ee]=ie,ee++}break;case 2:P[0]=B,P[1]=P[0]+f.width,P[2]=P[1]+f.width,B=P[2]+f.width;for(let le=0;le<f.width;++le){const ke=_[P[0]++]<<24|_[P[1]++]<<16|_[P[2]++]<<8;ie+=ke,G[ee]=ie,ee++}break}}return new DataView(G.buffer)}function dn(f){var p=f.viewer,_={value:f.offset.value},j=new Uint8Array(f.width*f.lines*(f.channels*f.type*2)),G={version:W(p,_),unknownUncompressedSize:W(p,_),unknownCompressedSize:W(p,_),acCompressedSize:W(p,_),dcCompressedSize:W(p,_),rleCompressedSize:W(p,_),rleUncompressedSize:W(p,_),rleRawSize:W(p,_),totalAcUncompressedCount:W(p,_),totalDcUncompressedCount:W(p,_),acCompression:W(p,_)};if(G.version<2)throw"EXRLoader.parse: "+Vt.compression+" version "+G.version+" is unsupported";for(var B=new Array,ee=ht(p,_)-2;ee>0;){var P=Fa(p.buffer,_),k=z(p,_),F=k>>2&3,ie=(k>>4)-1,le=new Int8Array([ie])[0],ke=z(p,_);B.push({name:P,index:le,type:ke,compression:F}),ee-=P.length+3}for(var me=Vt.channels,ge=new Array(f.channels),Ne=0;Ne<f.channels;++Ne){var Ce=ge[Ne]={},Xe=me[Ne];Ce.name=Xe.name,Ce.compression=0,Ce.decoded=!1,Ce.type=Xe.pixelType,Ce.pLinear=Xe.pLinear,Ce.width=f.width,Ce.height=f.lines}for(var Qe={idx:new Array(3)},ot=0;ot<f.channels;++ot)for(var Ce=ge[ot],Ne=0;Ne<B.length;++Ne){var _t=B[Ne];Ce.name==_t.name&&(Ce.compression=_t.compression,_t.index>=0&&(Qe.idx[_t.index]=ot),Ce.offset=ot)}if(G.acCompressedSize>0)switch(G.acCompression){case 0:var Je=new Uint16Array(G.totalAcUncompressedCount);Oa(f.array,p,_,G.acCompressedSize,Je,G.totalAcUncompressedCount);break;case 1:var Ke=f.array.slice(_.value,_.value+G.totalAcUncompressedCount),Pt=bu(Ke),Je=new Uint16Array(Pt.buffer);_.value+=G.totalAcUncompressedCount;break}if(G.dcCompressedSize>0){var pt={array:f.array,offset:_,size:G.dcCompressedSize},xa=new Uint16Array(on(pt).buffer);_.value+=G.dcCompressedSize}if(G.rleRawSize>0){var Ke=f.array.slice(_.value,_.value+G.rleCompressedSize),Pt=bu(Ke),vn=Qa(Pt.buffer);_.value+=G.rleCompressedSize}for(var Bt=0,Ve=new Array(ge.length),Ne=0;Ne<Ve.length;++Ne)Ve[Ne]=new Array;for(var vt=0;vt<f.lines;++vt)for(var $e=0;$e<ge.length;++$e)Ve[$e].push(Bt),Bt+=ge[$e].width*f.type*2;Yn(Qe,Ve,ge,Je,xa,j);for(var Ne=0;Ne<ge.length;++Ne){var Ce=ge[Ne];if(!Ce.decoded)switch(Ce.compression){case 2:for(var Ye=0,wt=0,vt=0;vt<f.lines;++vt){for(var Ga=Ve[Ne][Ye],Ot=0;Ot<Ce.width;++Ot){for(var Ya=0;Ya<2*Ce.type;++Ya)j[Ga++]=vn[wt+Ya*Ce.width*Ce.height];wt++}Ye++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(j.buffer)}function Fa(f,p){for(var _=new Uint8Array(f),j=0;_[p.value+j]!=0;)j+=1;var G=new TextDecoder().decode(_.slice(p.value,p.value+j));return p.value=p.value+j+1,G}function ei(f,p,_){var j=new TextDecoder().decode(new Uint8Array(f).slice(p.value,p.value+_));return p.value=p.value+_,j}function mn(f,p){var _=At(f,p),j=et(f,p);return[_,j]}function Zn(f,p){var _=et(f,p),j=et(f,p);return[_,j]}function At(f,p){var _=f.getInt32(p.value,!0);return p.value=p.value+4,_}function et(f,p){var _=f.getUint32(p.value,!0);return p.value=p.value+4,_}function sa(f,p){var _=f[p.value];return p.value=p.value+1,_}function z(f,p){var _=f.getUint8(p.value);return p.value=p.value+1,_}const W=function(f,p){let _;return"getBigInt64"in DataView.prototype?_=Number(f.getBigInt64(p.value,!0)):_=f.getUint32(p.value+4,!0)+Number(f.getUint32(p.value,!0)<<32),p.value+=8,_};function de(f,p){var _=f.getFloat32(p.value,!0);return p.value+=4,_}function we(f,p){return Xl.toHalfFloat(de(f,p))}function ae(f){var p=(f&31744)>>10,_=f&1023;return(f>>15?-1:1)*(p?p===31?_?NaN:1/0:Math.pow(2,p-15)*(1+_/1024):6103515625e-14*(_/1024))}function ht(f,p){var _=f.getUint16(p.value,!0);return p.value+=2,_}function Ft(f,p){return ae(ht(f,p))}function Ln(f,p,_,j){for(var G=_.value,B=[];_.value<G+j-1;){var ee=Fa(p,_),P=At(f,_),k=z(f,_);_.value+=3;var F=At(f,_),ie=At(f,_);B.push({name:ee,pixelType:P,pLinear:k,xSampling:F,ySampling:ie})}return _.value+=1,B}function Xn(f,p){var _=de(f,p),j=de(f,p),G=de(f,p),B=de(f,p),ee=de(f,p),P=de(f,p),k=de(f,p),F=de(f,p);return{redX:_,redY:j,greenX:G,greenY:B,blueX:ee,blueY:P,whiteX:k,whiteY:F}}function Xt(f,p){var _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],j=z(f,p);return _[j]}function Ct(f,p){var _=et(f,p),j=et(f,p),G=et(f,p),B=et(f,p);return{xMin:_,yMin:j,xMax:G,yMax:B}}function It(f,p){var _=["INCREASING_Y"],j=z(f,p);return _[j]}function oa(f,p){var _=de(f,p),j=de(f,p);return[_,j]}function Ba(f,p){var _=de(f,p),j=de(f,p),G=de(f,p);return[_,j,G]}function Ia(f,p,_,j,G){if(j==="string"||j==="stringvector"||j==="iccProfile")return ei(p,_,G);if(j==="chlist")return Ln(f,p,_,G);if(j==="chromaticities")return Xn(f,_);if(j==="compression")return Xt(f,_);if(j==="box2i")return Ct(f,_);if(j==="lineOrder")return It(f,_);if(j==="float")return de(f,_);if(j==="v2f")return oa(f,_);if(j==="v3f")return Ba(f,_);if(j==="int")return At(f,_);if(j==="rational")return mn(f,_);if(j==="timecode")return Zn(f,_);if(j==="preview")return _.value+=G,"skipped";_.value+=G}function Bi(f,p,_){const j={};if(f.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";j.version=f.getUint8(4);const G=f.getUint8(5);j.spec={singleTile:!!(G&2),longName:!!(G&4),deepFormat:!!(G&8),multiPart:!!(G&16)},_.value=8;for(var B=!0;B;){var ee=Fa(p,_);if(ee==0)B=!1;else{var P=Fa(p,_),k=et(f,_),F=Ia(f,p,_,P,k);F===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${P}'.`):j[ee]=F}}if((G&-5)!=0)throw console.error("EXRHeader:",j),"THREE.EXRLoader: provided file is currently unsupported.";return j}function ti(f,p,_,j,G){const B={size:0,viewer:p,array:_,offset:j,width:f.dataWindow.xMax-f.dataWindow.xMin+1,height:f.dataWindow.yMax-f.dataWindow.yMin+1,channels:f.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:f.channels[0].pixelType,uncompress:null,getter:null,format:null,[xi?"colorSpace":"encoding"]:null};switch(f.compression){case"NO_COMPRESSION":B.lines=1,B.uncompress=Ja;break;case"RLE_COMPRESSION":B.lines=1,B.uncompress=Ha;break;case"ZIPS_COMPRESSION":B.lines=1,B.uncompress=on;break;case"ZIP_COMPRESSION":B.lines=16,B.uncompress=on;break;case"PIZ_COMPRESSION":B.lines=32,B.uncompress=$l;break;case"PXR24_COMPRESSION":B.lines=16,B.uncompress=fn;break;case"DWAA_COMPRESSION":B.lines=32,B.uncompress=dn;break;case"DWAB_COMPRESSION":B.lines=256,B.uncompress=dn;break;default:throw"EXRLoader.parse: "+f.compression+" is unsupported"}if(B.scanlineBlockSize=B.lines,B.type==1)switch(G){case Va:B.getter=Ft,B.inputSize=2;break;case ra:B.getter=ht,B.inputSize=2;break}else if(B.type==2)switch(G){case Va:B.getter=de,B.inputSize=4;break;case ra:B.getter=we,B.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+B.type+" for "+f.compression+".";B.blockCount=(f.dataWindow.yMax+1)/B.scanlineBlockSize;for(var ee=0;ee<B.blockCount;ee++)W(p,j);B.outputChannels=B.channels==3?4:B.channels;const P=B.width*B.height*B.outputChannels;switch(G){case Va:B.byteArray=new Float32Array(P),B.channels<B.outputChannels&&B.byteArray.fill(1,0,P);break;case ra:B.byteArray=new Uint16Array(P),B.channels<B.outputChannels&&B.byteArray.fill(15360,0,P);break;default:console.error("THREE.EXRLoader: unsupported type: ",G);break}return B.bytesPerLine=B.width*B.inputSize*B.channels,B.outputChannels==4?B.format=Kl:B.format=Pp,xi?B.colorSpace="srgb-linear":B.encoding=3e3,B}const pn=new DataView(l),wa=new Uint8Array(l),hn={value:0},Vt=Bi(pn,l,hn),Re=ti(Vt,pn,wa,hn,this.type),Vn={value:0},rt={R:0,G:1,B:2,A:3,Y:0};for(let f=0;f<Re.height/Re.scanlineBlockSize;f++){const p=et(pn,hn);Re.size=et(pn,hn),Re.lines=p+Re.scanlineBlockSize>Re.height?Re.height-p:Re.scanlineBlockSize;const j=Re.size<Re.lines*Re.bytesPerLine?Re.uncompress(Re):Ja(Re);hn.value+=Re.size;for(let G=0;G<Re.scanlineBlockSize;G++){const B=G+f*Re.scanlineBlockSize;if(B>=Re.height)break;for(let ee=0;ee<Re.channels;ee++){const P=rt[Vt.channels[ee].name];for(let k=0;k<Re.width;k++){Vn.value=(G*(Re.channels*Re.width)+ee*Re.width+k)*Re.inputSize;const F=(Re.height-1-B)*(Re.width*Re.outputChannels)+k*Re.outputChannels+P;Re.byteArray[F]=Re.getter(j,Vn)}}}}return{header:Vt,width:Re.width,height:Re.height,data:Re.byteArray,format:Re.format,[xi?"colorSpace":"encoding"]:Re[xi?"colorSpace":"encoding"],type:this.type}}setDataType(l){return this.type=l,this}load(l,c,r,o){function d(y,v){xi?y.colorSpace=v.colorSpace:y.encoding=v.encoding,y.minFilter=Ma,y.magFilter=Ma,y.generateMipmaps=!1,y.flipY=!1,c&&c(y,v)}return super.load(l,d,r,o)}}function sv(u,l,c,r){var o;return o=class extends Gu{constructor(d){super({vertexShader:l,fragmentShader:c,...d});for(const y in u)this.uniforms[y]=new Wp(u[y]),Object.defineProperty(this,y,{get(){return this.uniforms[y].value},set(v){this.uniforms[y].value=v}});this.uniforms=kp.clone(this.uniforms)}},o.key=Cu.generateUUID(),o}const ov=()=>parseInt(Wf.replace(/\D+/g,"")),fv=ov(),Zf=sv({screenspace:!1,color:new Bn("black"),opacity:1,thickness:.05,size:new qt},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   #include <clipping_planes_pars_vertex>
   uniform float thickness;
   uniform bool screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     #include <clipping_planes_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   #include <clipping_planes_pars_fragment>
   void main(){
     #include <clipping_planes_fragment>
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${fv>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function dv({color:u="black",opacity:l=1,transparent:c=!1,screenspace:r=!1,toneMapped:o=!0,polygonOffset:d=!1,polygonOffsetFactor:y=0,renderOrder:v=0,thickness:h=.05,angle:g=Math.PI,clippingPlanes:E,...S}){const M=D.useRef(null),[N]=D.useState(()=>new Zf({side:$p})),{gl:H}=St(),Z=H.getDrawingBufferSize(new qt);D.useMemo(()=>Jc({OutlinesMaterial:Zf}),[]);const w=D.useRef(0),R=D.useRef(null);return D.useLayoutEffect(()=>{const T=M.current;if(!T)return;const L=T.parent;if(L&&L.geometry&&(w.current!==g||R.current!==L.geometry)){var I;w.current=g,R.current=L.geometry;let q=(I=T.children)==null?void 0:I[0];q&&(g&&q.geometry.dispose(),T.remove(q)),L.skeleton?(q=new e0,q.material=N,q.bind(L.skeleton,L.bindMatrix),T.add(q)):L.isInstancedMesh?(q=new t0(L.geometry,N,L.count),q.instanceMatrix=L.instanceMatrix,T.add(q)):(q=new wu,q.material=N,T.add(q)),q.geometry=g?Bh(L.geometry,g):L.geometry,q.morphTargetInfluences=L.morphTargetInfluences,q.morphTargetDictionary=L.morphTargetDictionary}}),D.useLayoutEffect(()=>{const T=M.current;if(!T)return;const L=T.children[0];if(L){L.renderOrder=v;const I=T.parent;ba(L,{morphTargetInfluences:I.morphTargetInfluences,morphTargetDictionary:I.morphTargetDictionary}),ba(L.material,{transparent:c,thickness:h,color:u,opacity:l,size:Z,screenspace:r,toneMapped:o,polygonOffset:d,polygonOffsetFactor:y,clippingPlanes:E,clipping:E&&E.length>0})}}),D.useEffect(()=>()=>{const T=M.current;if(!T)return;const L=T.children[0];L&&(g&&L.geometry.dispose(),T.remove(L))},[]),D.createElement("group",Il({ref:M},S))}function mv(u,l,c){const r=St(N=>N.size),o=St(N=>N.viewport),d=typeof u=="number"?u:r.width*o.dpr,y=r.height*o.dpr,v=(typeof u=="number"?c:u)||{},{samples:h=0,depth:g,...E}=v,S=g??v.depthBuffer,M=D.useMemo(()=>{const N=new qc(d,y,{minFilter:Ma,magFilter:Ma,type:ra,...E});return S&&(N.depthTexture=new a0(d,y,Va)),N.samples=h,N},[]);return D.useLayoutEffect(()=>{M.setSize(d,y),h&&(M.samples=h)},[h,M,d,y]),D.useEffect(()=>()=>M.dispose(),[]),M}const pv=u=>typeof u=="function",hv=D.forwardRef(({envMap:u,resolution:l=256,frames:c=1/0,children:r,makeDefault:o,...d},y)=>{const v=St(({set:w})=>w),h=St(({camera:w})=>w),g=St(({size:w})=>w),E=D.useRef(null);D.useImperativeHandle(y,()=>E.current,[]);const S=D.useRef(null),M=mv(l);D.useLayoutEffect(()=>{d.manual||E.current.updateProjectionMatrix()},[g,d]),D.useLayoutEffect(()=>{E.current.updateProjectionMatrix()}),D.useLayoutEffect(()=>{if(o){const w=h;return v(()=>({camera:E.current})),()=>v(()=>({camera:w}))}},[E,o,v]);let N=0,H=null;const Z=pv(r);return sn(w=>{Z&&(c===1/0||N<c)&&(S.current.visible=!1,w.gl.setRenderTarget(M),H=w.scene.background,u&&(w.scene.background=u),w.gl.render(w.scene,E.current),w.scene.background=H,w.gl.setRenderTarget(null),S.current.visible=!0,N++)}),D.createElement(D.Fragment,null,D.createElement("orthographicCamera",Il({left:g.width/-2,right:g.width/2,top:g.height/2,bottom:g.height/-2,ref:E},d),!Z&&r),D.createElement("group",{ref:S},Z&&r(M.texture)))}),vv=D.forwardRef((u={enableDamping:!0},l)=>{const{domElement:c,camera:r,makeDefault:o,onChange:d,onStart:y,onEnd:v,...h}=u,g=St(T=>T.invalidate),E=St(T=>T.camera),S=St(T=>T.gl),M=St(T=>T.events),N=St(T=>T.set),H=St(T=>T.get),Z=c||M.connected||S.domElement,w=r||E,R=D.useMemo(()=>new uv(w),[w]);return D.useEffect(()=>{R.connect(Z);const T=L=>{g(),d&&d(L)};return R.addEventListener("change",T),y&&R.addEventListener("start",y),v&&R.addEventListener("end",v),()=>{R.dispose(),R.removeEventListener("change",T),y&&R.removeEventListener("start",y),v&&R.removeEventListener("end",v)}},[d,y,v,R,g,Z]),D.useEffect(()=>{if(o){const T=H().controls;return N({controls:R}),()=>N({controls:T})}},[o,R]),sn(()=>R.update(),-1),D.createElement("primitive",Il({ref:l,object:R,enableDamping:!0},h))}),yv=({focus:u=0,size:l=25,samples:c=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${l})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${u});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${c}; i ++) {
    offset = (vogelDiskSample(j, ${c}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${c}; i++) {
    vogelSample = vogelDiskSample(j, ${c}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${l}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${c}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function Lf(u,l,c){l.traverse(r=>{r.material&&(u.properties.remove(r.material),r.material.dispose==null||r.material.dispose())}),u.info.programs.length=0,u.compile(l,c)}function gv({focus:u=0,samples:l=10,size:c=25}){const r=St(y=>y.gl),o=St(y=>y.scene),d=St(y=>y.camera);return D.useEffect(()=>{const y=gu.shadowmap_pars_fragment;return gu.shadowmap_pars_fragment=gu.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+yv({size:c,samples:l,focus:u})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),Lf(r,o,d),()=>{gu.shadowmap_pars_fragment=y,Lf(r,o,d)}},[u,c,l]),null}const Sv=D.forwardRef(({children:u,enabled:l=!0,speed:c=1,rotationIntensity:r=1,floatIntensity:o=1,floatingRange:d=[-.1,.1],autoInvalidate:y=!1,...v},h)=>{const g=D.useRef(null);D.useImperativeHandle(h,()=>g.current,[]);const E=D.useRef(Math.random()*1e4);return sn(S=>{var M,N;if(!l||c===0)return;y&&S.invalidate();const H=E.current+S.clock.elapsedTime;g.current.rotation.x=Math.cos(H/4*c)/8*r,g.current.rotation.y=Math.sin(H/4*c)/8*r,g.current.rotation.z=Math.sin(H/4*c)/20*r;let Z=Math.sin(H/4*c)/10;Z=Cu.mapLinear(Z,-.1,.1,(M=d?.[0])!==null&&M!==void 0?M:-.1,(N=d?.[1])!==null&&N!==void 0?N:.1),g.current.position.y=Z*o,g.current.updateMatrix()}),D.createElement("group",v,D.createElement("group",{ref:g,matrixAutoUpdate:!1},u))}),Cd=(u,l,c)=>{let r;switch(u){case Au:r=new Uint8ClampedArray(l*c*4);break;case ra:r=new Uint16Array(l*c*4);break;case c0:r=new Uint32Array(l*c*4);break;case r0:r=new Int8Array(l*c*4);break;case u0:r=new Int16Array(l*c*4);break;case i0:r=new Int32Array(l*c*4);break;case Va:r=new Float32Array(l*c*4);break;default:throw new Error("Unsupported data type")}return r};let Mu;const Ev=(u,l,c,r)=>{if(Mu!==void 0)return Mu;const o=new qc(1,1,r);l.setRenderTarget(o);const d=new wu(new Zc,new l0({color:16777215}));l.render(d,c),l.setRenderTarget(null);const y=Cd(u,o.width,o.height);return l.readRenderTargetPixels(o,0,0,o.width,o.height,y),o.dispose(),d.geometry.dispose(),d.material.dispose(),Mu=y[0]!==0,Mu};class Ic{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(l){this._width=l.width,this._height=l.height,this._type=l.type,this._colorSpace=l.colorSpace;const c={format:Kl,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:l.renderTargetOptions?.anisotropy!==void 0?l.renderTargetOptions?.anisotropy:1,generateMipmaps:l.renderTargetOptions?.generateMipmaps!==void 0?l.renderTargetOptions?.generateMipmaps:!1,magFilter:l.renderTargetOptions?.magFilter!==void 0?l.renderTargetOptions?.magFilter:Ma,minFilter:l.renderTargetOptions?.minFilter!==void 0?l.renderTargetOptions?.minFilter:Ma,samples:l.renderTargetOptions?.samples!==void 0?l.renderTargetOptions?.samples:void 0,wrapS:l.renderTargetOptions?.wrapS!==void 0?l.renderTargetOptions?.wrapS:wn,wrapT:l.renderTargetOptions?.wrapT!==void 0?l.renderTargetOptions?.wrapT:wn};if(this._material=l.material,l.renderer?this._renderer=l.renderer:(this._renderer=Ic.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Gc,this._camera=new zi,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Ev(this._type,this._renderer,this._camera,c)){let r;switch(this._type){case ra:r=this._renderer.extensions.has("EXT_color_buffer_float")?Va:void 0;break}r!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Va}`),this._type=r):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new wu(new Zc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new qc(this.width,this.height,c),this._renderTarget.texture.mapping=l.renderTargetOptions?.mapping!==void 0?l.renderTargetOptions?.mapping:Ou}static instantiateRenderer(){const l=new If;return l.setSize(128,128),l}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(l){throw this._renderer.setRenderTarget(null),l}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const l=Cd(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,l),l}toDataTexture(l){const c=new n0(this.toArray(),this.width,this.height,Kl,this._type,l?.mapping||Ou,l?.wrapS||wn,l?.wrapT||wn,l?.magFilter||Ma,l?.minFilter||Ma,l?.anisotropy||1,zu);return c.generateMipmaps=l?.generateMipmaps!==void 0?l?.generateMipmaps:!1,c}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(l){this.disposeOnDemandRenderer(),l&&this.renderTarget.dispose(),this.material instanceof Gu&&Object.values(this.material.uniforms).forEach(c=>{c.value instanceof Vl&&c.value.dispose()}),Object.values(this.material).forEach(c=>{c instanceof Vl&&c.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(l){this._width=l,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(l){this._height=l,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(l){this._renderTarget=l,this._width=l.width,this._height=l.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class Od extends Error{}class jd extends Error{}const Ni=(u,l,c)=>{const r=new RegExp(`${l}="([^"]*)"`,"i").exec(u);if(r)return r[1];const o=new RegExp(`<${l}[^>]*>([\\s\\S]*?)</${l}>`,"i").exec(u);if(o){const d=o[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return d&&d.length===3?d.map(y=>y.replace(/<\/?rdf:li>/g,"")):o[1].trim()}if(c!==void 0)return c;throw new Error(`Can't find ${l} in gainmap metadata`)},bv=u=>{let l;typeof TextDecoder<"u"?l=new TextDecoder().decode(u):l=u.toString();let c=l.indexOf("<x:xmpmeta");for(;c!==-1;){const r=l.indexOf("x:xmpmeta>",c),o=l.slice(c,r+10);try{const d=Ni(o,"hdrgm:GainMapMin","0"),y=Ni(o,"hdrgm:GainMapMax"),v=Ni(o,"hdrgm:Gamma","1"),h=Ni(o,"hdrgm:OffsetSDR","0.015625"),g=Ni(o,"hdrgm:OffsetHDR","0.015625"),E=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(o),S=E?E[1]:"0",M=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(o);if(!M)throw new Error("Incomplete gainmap metadata");const N=M[1];return{gainMapMin:Array.isArray(d)?d.map(H=>parseFloat(H)):[parseFloat(d),parseFloat(d),parseFloat(d)],gainMapMax:Array.isArray(y)?y.map(H=>parseFloat(H)):[parseFloat(y),parseFloat(y),parseFloat(y)],gamma:Array.isArray(v)?v.map(H=>parseFloat(H)):[parseFloat(v),parseFloat(v),parseFloat(v)],offsetSdr:Array.isArray(h)?h.map(H=>parseFloat(H)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(g)?g.map(H=>parseFloat(H)):[parseFloat(g),parseFloat(g),parseFloat(g)],hdrCapacityMin:parseFloat(S),hdrCapacityMax:parseFloat(N)}}catch{}c=l.indexOf("<x:xmpmeta",r)}};class _v{options;constructor(l){this.options={debug:l&&l.debug!==void 0?l.debug:!1,extractFII:l&&l.extractFII!==void 0?l.extractFII:!0,extractNonFII:l&&l.extractNonFII!==void 0?l.extractNonFII:!0}}extract(l){return new Promise((c,r)=>{const o=this.options.debug,d=new DataView(l.buffer);if(d.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const y=d.byteLength;let v=2,h=0,g;for(;v<y;){if(++h>250){r(new Error(`Found no marker after ${h} loops `));return}if(d.getUint8(v)!==255){r(new Error(`Not a valid marker at offset 0x${v.toString(16)}, found: 0x${d.getUint8(v).toString(16)}`));return}if(g=d.getUint8(v+1),o&&console.log(`Marker: ${g.toString(16)}`),g===226){o&&console.log("Found APP2 marker (0xffe2)");const E=v+4;if(d.getUint32(E)===1297106432){const S=E+4;let M;if(d.getUint16(S)===18761)M=!1;else if(d.getUint16(S)===19789)M=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(d.getUint16(S+2,!M)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const N=d.getUint32(S+4,!M);if(N<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const H=S+N,Z=d.getUint16(H,!M),w=H+2;let R=0;for(let q=w;q<w+12*Z;q+=12)d.getUint16(q,!M)===45057&&(R=d.getUint32(q+8,!M));const L=H+2+Z*12+4,I=[];for(let q=L;q<L+R*16;q+=16){const V={MPType:d.getUint32(q,!M),size:d.getUint32(q+4,!M),dataOffset:d.getUint32(q+8,!M),dependantImages:d.getUint32(q+12,!M),start:-1,end:-1,isFII:!1};V.dataOffset?(V.start=S+V.dataOffset,V.isFII=!1):(V.start=0,V.isFII=!0),V.end=V.start+V.size,I.push(V)}if(this.options.extractNonFII&&I.length){const q=new Blob([d]),V=[];for(const ce of I){if(ce.isFII&&!this.options.extractFII)continue;const Y=q.slice(ce.start,ce.end+1,"image/jpeg");V.push(Y)}c(V)}}}v+=2+d.getUint16(v+2)}})}}const Mv=async u=>{const l=bv(u);if(!l)throw new jd("Gain map XMP metadata not found");const r=await new _v({extractFII:!0,extractNonFII:!0}).extract(u);if(r.length!==2)throw new Od("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:l}},Xf=u=>new Promise((l,c)=>{const r=document.createElement("img");r.onload=()=>{l(r)},r.onerror=o=>{c(o)},r.src=URL.createObjectURL(u)});class Tv extends s0{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(l,c){super(c),this._config=l,l.renderer&&(this._renderer=l.renderer),this._internalLoadingManager=new o0}setRenderer(l){return this._renderer=l,this}setRenderTargetOptions(l){return this._renderTargetOptions=l,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const l=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Vl,sdr:new Vl});return this._config.createQuadRenderer({width:16,height:16,type:ra,colorSpace:zu,material:l,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(l,c,r){const o=c?new Blob([c],{type:"image/jpeg"}):void 0,d=new Blob([l],{type:"image/jpeg"});let y,v,h=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([o?Xf(o):Promise.resolve(void 0),Xf(d)]);v=g[0],y=g[1],h=r==="flipY"}else{const g=await Promise.all([o?createImageBitmap(o,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:r||"flipY"})]);v=g[0],y=g[1]}return{sdrImage:y,gainMapImage:v,needsFlip:h}}createTextures(l,c,r){const o=new Vl(c||new ImageData(2,2),Ou,wn,wn,Ma,vf,Kl,Au,1,zu);o.flipY=r,o.needsUpdate=!0;const d=new Vl(l,Ou,wn,wn,Ma,vf,Kl,Au,1,Yc);return d.flipY=r,d.needsUpdate=!0,{gainMap:o,sdr:d}}updateQuadRenderer(l,c,r,o,d){l.width=c.width,l.height=c.height,l.material.gainMap=r,l.material.sdr=o,l.material.gainMapMin=d.gainMapMin,l.material.gainMapMax=d.gainMapMax,l.material.offsetHdr=d.offsetHdr,l.material.offsetSdr=d.offsetSdr,l.material.gamma=d.gamma,l.material.hdrCapacityMin=d.hdrCapacityMin,l.material.hdrCapacityMax=d.hdrCapacityMax,l.material.maxDisplayBoost=Math.pow(2,d.hdrCapacityMax),l.material.needsUpdate=!0}}const xv=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Nv=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Rv extends Gu{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:l,offsetHdr:c,offsetSdr:r,gainMapMin:o,gainMapMax:d,maxDisplayBoost:y,hdrCapacityMin:v,hdrCapacityMax:h,sdr:g,gainMap:E}){super({name:"GainMapDecoderMaterial",vertexShader:xv,fragmentShader:Nv,uniforms:{sdr:{value:g},gainMap:{value:E},gamma:{value:new Ie(1/l[0],1/l[1],1/l[2])},offsetHdr:{value:new Ie().fromArray(c)},offsetSdr:{value:new Ie().fromArray(r)},gainMapMin:{value:new Ie().fromArray(o)},gainMapMax:{value:new Ie().fromArray(d)},weightFactor:{value:(Math.log2(y)-v)/(h-v)}},blending:f0,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=y,this._hdrCapacityMin=v,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(l){this.uniforms.sdr.value=l}get gainMap(){return this.uniforms.gainMap.value}set gainMap(l){this.uniforms.gainMap.value=l}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(l){this.uniforms.offsetHdr.value.fromArray(l)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(l){this.uniforms.offsetSdr.value.fromArray(l)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(l){this.uniforms.gainMapMin.value.fromArray(l)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(l){this.uniforms.gainMapMax.value.fromArray(l)}get gamma(){const l=this.uniforms.gamma.value;return[1/l.x,1/l.y,1/l.z]}set gamma(l){const c=this.uniforms.gamma.value;c.x=1/l[0],c.y=1/l[1],c.z=1/l[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(l){this._hdrCapacityMin=l,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(l){this._hdrCapacityMax=l,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(l){this._maxDisplayBoost=Math.max(1,Math.min(65504,l)),this.calculateWeight()}calculateWeight(){const l=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,l))}}class Dd extends Tv{constructor(l,c){super({renderer:l,createMaterial:r=>new Rv(r),createQuadRenderer:r=>new Ic(r)},c)}async render(l,c,r,o){const{sdrImage:d,gainMapImage:y,needsFlip:v}=await this.processImages(r,o,"flipY"),{gainMap:h,sdr:g}=this.createTextures(d,y,v);this.updateQuadRenderer(l,d,h,g,c),l.render()}}class zv extends Dd{load([l,c,r],o,d,y){const v=this.prepareQuadRenderer();let h,g,E;const S=async()=>{if(h&&g&&E){try{await this.render(v,E,h,g)}catch(K){this.manager.itemError(l),this.manager.itemError(c),this.manager.itemError(r),typeof y=="function"&&y(K),v.disposeOnDemandRenderer();return}typeof o=="function"&&o(v),this.manager.itemEnd(l),this.manager.itemEnd(c),this.manager.itemEnd(r),v.disposeOnDemandRenderer()}};let M=!0,N=0,H=0,Z=!0,w=0,R=0,T=!0,L=0,I=0;const q=()=>{if(typeof d=="function"){const K=N+w+L,J=H+R+I,te=M&&Z&&T;d(new ProgressEvent("progress",{lengthComputable:te,loaded:J,total:K}))}};this.manager.itemStart(l),this.manager.itemStart(c),this.manager.itemStart(r);const V=new xu(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(l,async K=>{if(typeof K=="string")throw new Error("Invalid sdr buffer");h=K,await S()},K=>{M=K.lengthComputable,H=K.loaded,N=K.total,q()},K=>{this.manager.itemError(l),typeof y=="function"&&y(K)});const ce=new xu(this._internalLoadingManager);ce.setResponseType("arraybuffer"),ce.setRequestHeader(this.requestHeader),ce.setPath(this.path),ce.setWithCredentials(this.withCredentials),ce.load(c,async K=>{if(typeof K=="string")throw new Error("Invalid gainmap buffer");g=K,await S()},K=>{Z=K.lengthComputable,R=K.loaded,w=K.total,q()},K=>{this.manager.itemError(c),typeof y=="function"&&y(K)});const Y=new xu(this._internalLoadingManager);return Y.setRequestHeader(this.requestHeader),Y.setPath(this.path),Y.setWithCredentials(this.withCredentials),Y.load(r,async K=>{if(typeof K!="string")throw new Error("Invalid metadata string");E=JSON.parse(K),await S()},K=>{T=K.lengthComputable,I=K.loaded,L=K.total,q()},K=>{this.manager.itemError(r),typeof y=="function"&&y(K)}),v}}class Av extends Dd{load(l,c,r,o){const d=this.prepareQuadRenderer(),y=new xu(this._internalLoadingManager);return y.setResponseType("arraybuffer"),y.setRequestHeader(this.requestHeader),y.setPath(this.path),y.setWithCredentials(this.withCredentials),this.manager.itemStart(l),y.load(l,async v=>{if(typeof v=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(v);let g,E,S;try{const M=await Mv(h);g=M.sdr,E=M.gainMap,S=M.metadata}catch(M){if(M instanceof jd||M instanceof Od)console.warn(`Failure to reconstruct an HDR image from ${l}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),S={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},g=h;else throw M}try{await this.render(d,S,g.buffer,E?.buffer)}catch(M){this.manager.itemError(l),typeof o=="function"&&o(M),d.disposeOnDemandRenderer();return}typeof c=="function"&&c(d),this.manager.itemEnd(l),d.disposeOnDemandRenderer()},r,v=>{this.manager.itemError(l),typeof o=="function"&&o(v)}),d}}const Di={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Ud="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ql=u=>Array.isArray(u),Pc=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function qu({files:u=Pc,path:l="",preset:c=void 0,colorSpace:r=void 0,extensions:o}={}){c&&(Wc(c),u=Di[c],l=Ud);const d=Ql(u),{extension:y,isCubemap:v}=kc(u),h=$c(y);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+u);const g=St(N=>N.gl);D.useLayoutEffect(()=>{if(y!=="webp"&&y!=="jpg"&&y!=="jpeg")return;function N(){Jl.clear(h,d?[u]:u)}g.domElement.addEventListener("webglcontextlost",N,{once:!0})},[u,g.domElement]);const E=Jl(h,d?[u]:u,N=>{(y==="webp"||y==="jpg"||y==="jpeg")&&N.setRenderer(g),N.setPath==null||N.setPath(l),o&&o(N)});let S=d?E[0]:E;if(y==="jpg"||y==="jpeg"||y==="webp"){var M;S=(M=S.renderTarget)==null?void 0:M.texture}return S.mapping=v?d0:m0,S.colorSpace=r??(v?"srgb":"srgb-linear"),S}const Cv={files:Pc,path:"",preset:void 0,extensions:void 0};qu.preload=u=>{const l={...Cv,...u};let{files:c,path:r=""}=l;const{preset:o,extensions:d}=l;o&&(Wc(o),c=Di[o],r=Ud);const{extension:y}=kc(c);if(y==="webp"||y==="jpg"||y==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const v=$c(y);if(!v)throw new Error("useEnvironment: Unrecognized file extension: "+c);Jl.preload(v,Ql(c)?[c]:c,h=>{h.setPath==null||h.setPath(r),d&&d(h)})};const Ov={files:Pc,preset:void 0};qu.clear=u=>{const l={...Ov,...u};let{files:c}=l;const{preset:r}=l;r&&(Wc(r),c=Di[r]);const{extension:o}=kc(c),d=$c(o);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+c);Jl.clear(d,Ql(c)?[c]:c)};function Wc(u){if(!(u in Di))throw new Error("Preset must be one of: "+Object.keys(Di).join(", "))}function kc(u){var l;const c=Ql(u)&&u.length===6,r=Ql(u)&&u.length===3&&u.some(y=>y.endsWith("json")),o=Ql(u)?u[0]:u;return{extension:c?"cube":r?"webp":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":o.startsWith("data:image/jpeg")?"jpg":(l=o.split(".").pop())==null||(l=l.split("?"))==null||(l=l.shift())==null?void 0:l.toLowerCase(),isCubemap:c,isGainmap:r}}function $c(u){return u==="cube"?p0:u==="hdr"?rv:u==="exr"?cv:u==="jpg"||u==="jpeg"?Av:u==="webp"?zv:null}const jv=u=>u.current&&u.current.isScene,Dv=u=>jv(u)?u.current:u;function es(u,l,c,r,o={}){var d,y,v,h;o={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...o};const g=Dv(l||c),E=g.background,S=g.environment,M={backgroundBlurriness:g.backgroundBlurriness,backgroundIntensity:g.backgroundIntensity,backgroundRotation:(d=(y=g.backgroundRotation)==null||y.clone==null?void 0:y.clone())!==null&&d!==void 0?d:[0,0,0],environmentIntensity:g.environmentIntensity,environmentRotation:(v=(h=g.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&v!==void 0?v:[0,0,0]};return u!=="only"&&(g.environment=r),u&&(g.background=r),ba(g,o),()=>{u!=="only"&&(g.environment=S),u&&(g.background=E),ba(g,M)}}function ts({scene:u,background:l=!1,map:c,...r}){const o=St(d=>d.scene);return D.useLayoutEffect(()=>{if(c)return es(l,u,o,c,r)}),null}function Hd({background:u=!1,scene:l,blur:c,backgroundBlurriness:r,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:y,environmentRotation:v,...h}){const g=qu(h),E=St(S=>S.scene);return D.useLayoutEffect(()=>es(u,l,E,g,{backgroundBlurriness:c??r,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:y,environmentRotation:v})),D.useEffect(()=>()=>{g.dispose()},[g]),null}function Uv({children:u,near:l=.1,far:c=1e3,resolution:r=256,frames:o=1,map:d,background:y=!1,blur:v,backgroundBlurriness:h,backgroundIntensity:g,backgroundRotation:E,environmentIntensity:S,environmentRotation:M,scene:N,files:H,path:Z,preset:w=void 0,extensions:R}){const T=St(Y=>Y.gl),L=St(Y=>Y.scene),I=D.useRef(null),[q]=D.useState(()=>new Gc),V=D.useMemo(()=>{const Y=new h0(r);return Y.texture.type=ra,Y},[r]);D.useEffect(()=>()=>{V.dispose()},[V]),D.useLayoutEffect(()=>{if(o===1){const Y=T.autoClear;T.autoClear=!0,I.current.update(T,q),T.autoClear=Y}return es(y,N,L,V.texture,{backgroundBlurriness:v??h,backgroundIntensity:g,backgroundRotation:E,environmentIntensity:S,environmentRotation:M})},[u,q,V.texture,N,L,y,o,T]);let ce=1;return sn(()=>{if(o===1/0||ce<o){const Y=T.autoClear;T.autoClear=!0,I.current.update(T,q),T.autoClear=Y,ce++}}),D.createElement(D.Fragment,null,Mh(D.createElement(D.Fragment,null,u,D.createElement("cubeCamera",{ref:I,args:[l,c,V]}),H||w?D.createElement(Hd,{background:!0,files:H,preset:w,path:Z,extensions:R}):d?D.createElement(ts,{background:!0,map:d,extensions:R}):null),q))}function Hv(u){var l,c,r,o;const d=qu(u),y=u.map||d;D.useMemo(()=>Jc({GroundProjectedEnvImpl:Wh}),[]),D.useEffect(()=>()=>{d.dispose()},[d]);const v=D.useMemo(()=>[y],[y]),h=(l=u.ground)==null?void 0:l.height,g=(c=u.ground)==null?void 0:c.radius,E=(r=(o=u.ground)==null?void 0:o.scale)!==null&&r!==void 0?r:1e3;return D.createElement(D.Fragment,null,D.createElement(ts,Il({},u,{map:y})),D.createElement("groundProjectedEnvImpl",{args:v,scale:E,height:h,radius:g}))}function Bv(u){return u.ground?D.createElement(Hv,u):u.map?D.createElement(ts,u):u.children?D.createElement(Uv,u):D.createElement(Hd,u)}const Vf=ca/2-.5,Pl=(u,l)=>[u-Vf,0,l-Vf],Ri=(u,l)=>Math.abs(Math.sin(u*12.9898+l*78.233)*43758.5453)%1,Ea=(u,l)=>Math.random()*(l-u)+u,st=new v0(1,1,1),Ll=new y0(1,1,1,8),Rc=new g0(1,1,4),Bd=new S0(1,8,8),Dn=Wl.memo(({position:u,scale:l})=>x.jsx("mesh",{geometry:st,position:u,scale:l,children:x.jsx("meshStandardMaterial",{color:"#bfdbfe",emissive:"#bfdbfe",emissiveIntensity:.2,roughness:.1,metalness:.8})})),wv=({position:u})=>{const l=D.useRef(null);return sn(c=>{l.current&&l.current.children.forEach((r,o)=>{const d=r;d.position.y+=.01+o*.005,d.scale.addScalar(.005);const y=d.material;y&&(y.opacity-=.005,d.position.y>1.5&&(d.position.y=0,d.scale.setScalar(.1+Math.random()*.1),y.opacity=.6))})}),x.jsxs("group",{position:u,children:[x.jsx("mesh",{geometry:Ll,castShadow:!0,receiveShadow:!0,position:[0,.5,0],scale:[.2,1,.2],children:x.jsx("meshStandardMaterial",{color:"#4b5563"})}),x.jsx("group",{ref:l,position:[0,1,0],children:[0,1,2].map(c=>x.jsx("mesh",{geometry:Bd,position:[Math.random()*.1,c*.4,Math.random()*.1],scale:.2,children:x.jsx("meshStandardMaterial",{color:"#d1d5db",transparent:!0,opacity:.6,flatShading:!0})},c))})]})},Qf=Wl.memo(({type:u,baseColor:l,x:c,y:r,opacity:o=1,transparent:d=!1})=>{const y=Ri(c,r),v=Math.floor(y*100),h=Math.floor(y*4)*(Math.PI/2),g=D.useMemo(()=>{const Z=new Bn(l);return Z.offsetHSL(y*.1-.05,0,y*.2-.1),Z},[l,y]),E=D.useMemo(()=>new Sa({color:g,flatShading:!0,opacity:o,transparent:d,roughness:.8}),[g,o,d]),S=D.useMemo(()=>new Sa({color:new Bn(g).multiplyScalar(.7),flatShading:!0,opacity:o,transparent:d}),[g,o,d]),M=D.useMemo(()=>new Sa({color:new Bn(g).multiplyScalar(.5).offsetHSL(0,0,-.1),flatShading:!0,opacity:o,transparent:d}),[g,o,d]),N={castShadow:!0,receiveShadow:!0},H=-.3;return x.jsx("group",{rotation:[0,h,0],position:[0,H,0],children:(()=>{switch(u){case _e.Residential:return v<33?x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[0,.3,0],scale:[.7,.6,.6]}),x.jsx("mesh",{...N,material:M,geometry:Rc,position:[0,.75,0],scale:[.6,.4,.6],rotation:[0,Math.PI/4,0]}),x.jsx(Dn,{position:[.2,.3,.31],scale:[.15,.2,.05]}),x.jsx(Dn,{position:[-.2,.3,.31],scale:[.15,.2,.05]}),x.jsx("mesh",{...N,material:S,geometry:st,position:[0,.1,.32],scale:[.15,.2,.05]})]}):v<66?x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[-.1,.35,0],scale:[.6,.7,.8]}),x.jsx("mesh",{...N,material:S,geometry:st,position:[.25,.25,.1],scale:[.4,.5,.6]}),x.jsx(Dn,{position:[-.1,.5,.41],scale:[.4,.2,.05]})]}):x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[0,.5,0],scale:[.5,1,.6]}),x.jsx("mesh",{...N,material:M,geometry:st,position:[0,1.05,0],scale:[.55,.1,.65]}),x.jsx(Dn,{position:[0,.7,.31],scale:[.3,.2,.05]}),x.jsx(Dn,{position:[0,.3,.31],scale:[.3,.2,.05]})]});case _e.Commercial:if(v<40){const R=1.5+y*1.5;return x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[0,R/2,0],scale:[.7,R,.7]}),Array.from({length:Math.floor(R*3)}).map((T,L)=>x.jsx(Dn,{position:[0,.2+L*.3,0],scale:[.72,.15,.72]},L)),x.jsx("mesh",{...N,material:S,geometry:st,position:[0,R+.1,0],scale:[.5,.2,.5]})]})}else return v<70?x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[0,.4,0],scale:[.9,.8,.8]}),x.jsx(Dn,{position:[0,.3,.41],scale:[.8,.4,.05]}),x.jsx("mesh",{...N,material:new Sa({color:y>.5?"#ef4444":"#3b82f6"}),geometry:st,position:[0,.55,.5],scale:[.9,.1,.2],rotation:[Math.PI/6,0,0]})]}):x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[-.2,.5,-.2],scale:[.5,1,.5]}),x.jsx("mesh",{...N,material:S,geometry:st,position:[.1,.3,.1],scale:[.7,.6,.7]}),x.jsx(Dn,{position:[.1,.3,.46],scale:[.6,.3,.05]}),x.jsx("mesh",{...N,material:new Sa({color:"#9ca3af"}),geometry:st,position:[.2,.65,.2],scale:[.2,.1,.2]})]});case _e.Industrial:return v<50?x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[0,.4,0],scale:[.9,.8,.8]}),x.jsx("mesh",{...N,material:M,geometry:st,position:[-.2,.9,0],scale:[.4,.2,.8],rotation:[0,0,Math.PI/4]}),x.jsx("mesh",{...N,material:M,geometry:st,position:[.2,.9,0],scale:[.4,.2,.8],rotation:[0,0,Math.PI/4]}),x.jsx(wv,{position:[.3,.4,.3]})]}):x.jsxs(x.Fragment,{children:[x.jsx("mesh",{...N,material:E,geometry:st,position:[-.2,.3,0],scale:[.5,.6,.9]}),x.jsx("mesh",{...N,material:S,geometry:Ll,position:[.25,.4,-.2],scale:[.2,.8,.2]}),x.jsx("mesh",{...N,material:S,geometry:Ll,position:[.25,.4,.25],scale:[.2,.8,.2]}),x.jsx("mesh",{...N,material:new Sa({color:"#6b7280"}),geometry:st,position:[.25,.7,0],scale:[.05,.05,.5]})]});case _e.Park:const Z=1+Math.floor(y*3),w=[[-.2,-.2],[.2,.2],[-.2,.2],[.2,-.2]];return x.jsxs("group",{position:[0,-H-.29,0],children:[" ",x.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],position:[0,.01,0],children:[x.jsx("planeGeometry",{args:[.9,.9]}),x.jsx("meshStandardMaterial",{color:"#86efac"})]}),v<30&&x.jsxs("group",{position:[0,.05,0],children:[x.jsx("mesh",{material:new Sa({color:"#cbd5e1"}),geometry:Ll,scale:[.4,.1,.4],castShadow:!0,receiveShadow:!0}),x.jsx("mesh",{material:new Sa({color:"#3b82f6",roughness:.1}),geometry:Ll,position:[0,.06,0],scale:[.3,.05,.3]})]}),Array.from({length:Z}).map((R,T)=>{const L=w[T%w.length],I=.5+Ri(c+T,r-T)*.5,q=new Bn("#166534").offsetHSL(0,0,Ri(c,r+T)*.2);return x.jsxs("group",{position:[L[0],0,L[1]],scale:I,rotation:[0,Ri(T,c)*Math.PI,0],children:[x.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new Sa({color:"#78350f"}),geometry:Ll,position:[0,.15,0],scale:[.1,.3,.1]}),x.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new Sa({color:q,flatShading:!0}),geometry:Rc,position:[0,.4,0],scale:[.4,.5,.4]}),x.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new Sa({color:q,flatShading:!0}),geometry:Rc,position:[0,.65,0],scale:[.3,.4,.3]})]},T)})]});case _e.Road:return null;default:return null}})()})}),Kf=["#ef4444","#3b82f6","#eab308","#ffffff","#1f2937","#f97316"],Gv=({grid:u})=>{const l=D.useMemo(()=>{const y=[];return u.forEach(v=>v.forEach(h=>{h.buildingType===_e.Road&&y.push({x:h.x,y:h.y})})),y},[u]),c=Math.min(l.length,30),r=D.useRef(null),o=D.useRef(new Float32Array(0)),d=D.useMemo(()=>new ed,[]);return D.useMemo(()=>new Float32Array(0),[]),D.useEffect(()=>{if(l.length<2)return;o.current=new Float32Array(c*6);const y=new Float32Array(c*3);for(let v=0;v<c;v++){const h=l[Math.floor(Math.random()*l.length)];o.current[v*6+0]=h.x,o.current[v*6+1]=h.y,o.current[v*6+2]=h.x,o.current[v*6+3]=h.y,o.current[v*6+4]=1,o.current[v*6+5]=Ea(.01,.03);const g=new Bn(Kf[Math.floor(Math.random()*Kf.length)]);y[v*3]=g.r,y[v*3+1]=g.g,y[v*3+2]=g.b}r.current&&(r.current.instanceColor=new td(y,3))},[l,c]),sn(()=>{if(!(!r.current||l.length<2||o.current.length===0)){for(let y=0;y<c;y++){const v=y*6;let h=o.current[v],g=o.current[v+1],E=o.current[v+2],S=o.current[v+3],M=o.current[v+4];const N=o.current[v+5];if(M+=N,M>=1){h=E,g=S,M=0;const J=l.filter(te=>Math.abs(te.x-h)===1&&te.y===g||Math.abs(te.y-g)===1&&te.x===h);if(J.length>0){const te=J.length>1?J.filter(ue=>Math.abs(ue.x-o.current[v])>.1||Math.abs(ue.y-o.current[v+1])>.1):J,be=te.length>0?te[Math.floor(Math.random()*te.length)]:J[0];E=be.x,S=be.y}else{const te=l[Math.floor(Math.random()*l.length)];h=te.x,g=te.y,E=te.x,S=te.y}}o.current[v]=h,o.current[v+1]=g,o.current[v+2]=E,o.current[v+3]=S,o.current[v+4]=M;const H=Cu.lerp(h,E,M),Z=Cu.lerp(g,S,M),w=E-h,R=S-g,T=Math.atan2(R,w),L=.15,I=Math.sqrt(w*w+R*R)||1,q=-R/I*L,V=w/I*L,[ce,Y,K]=Pl(H+q,Z+V);d.position.set(ce,-.3+.075,K),d.rotation.set(0,-T,0),d.scale.set(.5,.15,.3),d.updateMatrix(),r.current.setMatrixAt(y,d.matrix)}r.current.instanceMatrix.needsUpdate=!0}}),l.length<2?null:x.jsx("instancedMesh",{ref:r,args:[st,void 0,c],castShadow:!0,children:x.jsx("meshStandardMaterial",{roughness:.5,metalness:.3})})},Jf=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#ffffff"],Yv=({population:u,grid:l})=>{const c=Math.min(Math.floor(u/2),300),r=D.useRef(null),o=D.useMemo(()=>{const v=[];return l.forEach(h=>h.forEach(g=>{(g.buildingType===_e.Road||g.buildingType===_e.Park||g.buildingType===_e.None)&&v.push({x:g.x,y:g.y})})),v},[l]),d=D.useRef(new Float32Array(0)),y=D.useMemo(()=>new ed,[]);return D.useEffect(()=>{if(c===0||o.length===0)return;d.current=new Float32Array(c*6);const v=new Float32Array(c*3);for(let h=0;h<c;h++){const g=o[Math.floor(Math.random()*o.length)],E=g.x+Ea(-.4,.4),S=g.y+Ea(-.4,.4);d.current[h*6+0]=E,d.current[h*6+1]=S;const M=o[Math.floor(Math.random()*o.length)];d.current[h*6+2]=M.x+Ea(-.4,.4),d.current[h*6+3]=M.y+Ea(-.4,.4),d.current[h*6+4]=Ea(.005,.015),d.current[h*6+5]=Math.random()*Math.PI*2;const N=new Bn(Jf[Math.floor(Math.random()*Jf.length)]);v[h*3]=N.r,v[h*3+1]=N.g,v[h*3+2]=N.b}r.current&&(r.current.instanceColor=new td(v,3))},[c,o]),sn(v=>{if(!r.current||c===0||d.current.length===0)return;const h=v.clock.elapsedTime;for(let g=0;g<c;g++){const E=g*6;let S=d.current[E],M=d.current[E+1],N=d.current[E+2],H=d.current[E+3];const Z=d.current[E+4],w=d.current[E+5],R=N-S,T=H-M,L=Math.sqrt(R*R+T*T);if(L<.1){if(o.length>0){const te=o[Math.floor(Math.random()*o.length)];N=te.x+Ea(-.4,.4),H=te.y+Ea(-.4,.4),d.current[E+2]=N,d.current[E+3]=H}}else S+=R/L*Z,M+=T/L*Z,d.current[E]=S,d.current[E+1]=M;const[I,q,V]=Pl(S,M),ce=Math.abs(Math.sin(h*10+w))*.03,Y=.2,K=.08;y.position.set(I,-.35+Y/2+ce,V),y.rotation.set(0,-Math.atan2(T,R),0),y.scale.set(K,Y,K),y.updateMatrix(),r.current.setMatrixAt(g,y.matrix)}r.current.instanceMatrix.needsUpdate=!0}),c===0?null:x.jsx("instancedMesh",{ref:r,args:[st,void 0,c],castShadow:!0,children:x.jsx("meshStandardMaterial",{roughness:.8})})},zc=({position:u,scale:l,speed:c})=>{const r=D.useRef(null);sn((d,y)=>{r.current&&(r.current.position.x+=c*y,r.current.position.x>ca*1.5&&(r.current.position.x=-ca*1.5))});const o=D.useMemo(()=>Array.from({length:5+Math.random()*5}).map(()=>({pos:[Ea(-1,1),Ea(-.5,.5),Ea(-1,1)],scale:Ea(.5,1.2)})),[]);return x.jsx("group",{ref:r,position:u,scale:l,children:o.map((d,y)=>x.jsx("mesh",{geometry:Bd,position:d.pos,scale:d.scale,castShadow:!0,children:x.jsx("meshStandardMaterial",{color:"white",flatShading:!0,opacity:.9,transparent:!0})},y))})},Ac=({position:u,speed:l,offset:c})=>{const r=D.useRef(null);return sn(o=>{if(r.current){const d=o.clock.elapsedTime+c;r.current.position.x=u[0]+Math.sin(d*l)*ca,r.current.position.z=u[1]+Math.cos(d*l)*ca/2,r.current.rotation.y=-d*l+Math.PI,r.current.scale.y=1+Math.sin(d*15)*.3}}),x.jsxs("group",{ref:r,position:[u[0],u[2],u[1]],children:[x.jsx("mesh",{geometry:st,scale:[.2,.05,.05],position:[.1,0,0],rotation:[0,Math.PI/4,0],children:x.jsx("meshBasicMaterial",{color:"#333"})}),x.jsx("mesh",{geometry:st,scale:[.2,.05,.05],position:[-.1,0,0],rotation:[0,-Math.PI/4,0],children:x.jsx("meshBasicMaterial",{color:"#333"})})]})},qv=()=>x.jsxs("group",{raycast:()=>null,children:[x.jsx(zc,{position:[-12,8,4],scale:1.5,speed:.3}),x.jsx(zc,{position:[5,9,-8],scale:1.2,speed:.5}),x.jsx(zc,{position:[15,7,10],scale:1.8,speed:.2}),x.jsxs("group",{position:[0,0,0],scale:.8,children:[x.jsx(Ac,{position:[0,0,10],speed:.6,offset:0}),x.jsx(Ac,{position:[0,0,10],speed:.6,offset:1.2}),x.jsx(Ac,{position:[0,0,10],speed:.6,offset:2.5})]}),x.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.6,0],receiveShadow:!0,children:[x.jsx("planeGeometry",{args:[ca*4,ca*4]}),x.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.1,metalness:.5,opacity:.8,transparent:!0})]})]}),Zv=Wl.memo(({x:u,y:l,grid:c,yOffset:r})=>{const o=D.useMemo(()=>new Sa({color:"#fbbf24"}),[]),d=D.useMemo(()=>new Zc(.1,.5),[]),y=l>0&&c[l-1][u].buildingType===_e.Road,v=l<ca-1&&c[l+1][u].buildingType===_e.Road,h=u>0&&c[l][u-1].buildingType===_e.Road,g=u<ca-1&&c[l][u+1].buildingType===_e.Road;return[y,v,h,g].filter(Boolean).length===0?x.jsx("mesh",{rotation:[-Math.PI/2,0,0],position:[0,r,0],geometry:d,material:o}):x.jsxs("group",{rotation:[-Math.PI/2,0,0],position:[0,r,0],children:[(y||v)&&(h||g)&&x.jsx("mesh",{position:[0,0,.005],material:o,children:x.jsx("planeGeometry",{args:[.12,.12]})}),y&&x.jsx("mesh",{position:[0,.25,0],geometry:d,material:o}),v&&x.jsx("mesh",{position:[0,-.25,0],geometry:d,material:o}),h&&x.jsx("mesh",{position:[-.25,0,0],rotation:[0,0,Math.PI/2],geometry:d,material:o}),g&&x.jsx("mesh",{position:[.25,0,0],rotation:[0,0,Math.PI/2],geometry:d,material:o})]})}),Lv=Wl.memo(({type:u,x:l,y:c,grid:r,onHover:o,onLeave:d,onClick:y})=>{const[v,h,g]=Pl(l,c);let E="#10b981",S=-.3,M=.5;if(u===_e.None){const H=Ri(l,c);E=H>.7?"#059669":H>.3?"#10b981":"#34d399",S=-.3-H*.1}else u===_e.Road?(E="#374151",S=-.29):(E="#d1d5db",S=-.28);const N=S-M/2;return x.jsxs("mesh",{position:[v,N,g],receiveShadow:!0,castShadow:!0,onPointerEnter:H=>{H.stopPropagation(),o(l,c)},onPointerOut:H=>{H.stopPropagation(),d()},onPointerDown:H=>{H.stopPropagation(),H.button===0&&y(l,c)},children:[x.jsx("boxGeometry",{args:[1,M,1]}),x.jsx("meshStandardMaterial",{color:E,flatShading:!0,roughness:1}),u===_e.Road&&x.jsx(Zv,{x:l,y:c,grid:r,yOffset:M/2+.001})]})}),Xv=({x:u,y:l,color:c})=>{const[r,o,d]=Pl(u,l);return x.jsxs("mesh",{position:[r,-.25,d],rotation:[-Math.PI/2,0,0],raycast:()=>null,children:[x.jsx("planeGeometry",{args:[1,1]}),x.jsx("meshBasicMaterial",{color:c,transparent:!0,opacity:.4,side:kf,depthTest:!1}),x.jsx(dv,{thickness:.05,color:"white"})]})},Vv=({grid:u,onTileClick:l,hoveredTool:c,population:r})=>{const[o,d]=D.useState(null),y=D.useCallback((M,N)=>{d({x:M,y:N})},[]),v=D.useCallback(()=>{d(null)},[]),h=o&&u[o.y][o.x].buildingType===_e.None&&c!==_e.None,g=h?Oi[c].color:"white",E=c===_e.None,S=o?Pl(o.x,o.y):[0,0,0];return x.jsx("div",{className:"absolute inset-0 bg-sky-900 touch-none",children:x.jsxs(Hh,{shadows:!0,dpr:[1,1.5],gl:{antialias:!0},children:[x.jsx(hv,{makeDefault:!0,zoom:45,position:[20,20,20],near:-100,far:200}),x.jsx(vv,{enableRotate:!0,enableZoom:!0,minZoom:20,maxZoom:120,maxPolarAngle:Math.PI/2.2,minPolarAngle:.1,target:[0,-.5,0]}),x.jsx("ambientLight",{intensity:.5,color:"#cceeff"}),x.jsx("directionalLight",{castShadow:!0,position:[15,20,10],intensity:2,color:"#fffbeb","shadow-mapSize":[2048,2048],"shadow-camera-left":-15,"shadow-camera-right":15,"shadow-camera-top":15,"shadow-camera-bottom":-15}),x.jsx(Bv,{preset:"city"}),x.jsx(qv,{}),x.jsxs("group",{children:[u.map((M,N)=>M.map((H,Z)=>{const[w,R,T]=Pl(Z,N);return x.jsxs(Wl.Fragment,{children:[x.jsx(Lv,{type:H.buildingType,x:Z,y:N,grid:u,onHover:y,onLeave:v,onClick:l}),x.jsx("group",{position:[w,0,T],raycast:()=>null,children:H.buildingType!==_e.None&&H.buildingType!==_e.Road&&x.jsx(Qf,{type:H.buildingType,baseColor:Oi[H.buildingType].color,x:Z,y:N})})]},`${Z}-${N}`)})),x.jsxs("group",{raycast:()=>null,children:[x.jsx(Gv,{grid:u}),x.jsx(Yv,{population:r,grid:u}),h&&o&&x.jsx("group",{position:[S[0],0,S[2]],children:x.jsx(Sv,{speed:3,rotationIntensity:0,floatIntensity:.1,floatingRange:[0,.1],children:x.jsx(Qf,{type:c,baseColor:g,x:o.x,y:o.y,transparent:!0,opacity:.7})})}),o&&x.jsx(Xv,{x:o.x,y:o.y,color:E?"#ef4444":h?"#ffffff":"#000000"})]})]}),x.jsx(gv,{size:10,samples:8})]})})},Qv=[_e.None,_e.Road,_e.Residential,_e.Commercial,_e.Industrial,_e.Park],Kv=({type:u,isSelected:l,onClick:c,money:r})=>{const o=Oi[u],d=r>=o.cost,y=u===_e.None,v=o.color;return x.jsxs("button",{onClick:c,disabled:!y&&!d,className:`
        relative flex flex-col items-center justify-center rounded-lg border-2 transition-all shadow-lg backdrop-blur-sm shrink-0
        w-14 h-14 md:w-16 md:h-16
        ${l?"border-white bg-white/20 scale-110 z-10":"border-gray-600 bg-gray-900/80 hover:bg-gray-800"}
        ${!y&&!d?"opacity-50 cursor-not-allowed":"cursor-pointer"}
      `,title:o.description,children:[x.jsxs("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded mb-0.5 md:mb-1 border border-black/30 shadow-inner flex items-center justify-center overflow-hidden",style:{backgroundColor:y?"transparent":v},children:[y&&x.jsx("div",{className:"w-full h-full bg-red-600 text-white flex justify-center items-center font-bold text-base md:text-lg",children:""}),u===_e.Road&&x.jsx("div",{className:"w-full h-2 bg-gray-800 transform -rotate-45"})]}),x.jsx("span",{className:"text-[8px] md:text-[10px] font-bold text-white uppercase tracking-wider drop-shadow-md leading-none",children:o.name}),o.cost>0&&x.jsxs("span",{className:`text-[8px] md:text-[10px] font-mono leading-none ${d?"text-green-300":"text-red-400"}`,children:["$",o.cost]})]})},Jv=({stats:u,selectedTool:l,onSelectTool:c,newsFeed:r})=>{const o=D.useRef(null);return D.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[r]),x.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between p-2 md:p-4 font-sans z-10",children:[x.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start pointer-events-auto gap-2 w-full max-w-full",children:x.jsxs("div",{className:"bg-gray-900/90 text-white p-2 md:p-3 rounded-xl border border-gray-700 shadow-2xl backdrop-blur-md flex gap-3 md:gap-6 items-center justify-between md:justify-start w-full md:w-auto",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Treasury"}),x.jsxs("span",{className:"text-lg md:text-2xl font-black text-green-400 font-mono drop-shadow-md",children:["$",u.money.toLocaleString()]})]}),x.jsx("div",{className:"w-px h-6 md:h-8 bg-gray-700"}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Citizens"}),x.jsx("span",{className:"text-base md:text-xl font-bold text-blue-300 font-mono drop-shadow-md",children:u.population.toLocaleString()})]}),x.jsx("div",{className:"w-px h-6 md:h-8 bg-gray-700"}),x.jsxs("div",{className:"flex flex-col items-end",children:[x.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Day"}),x.jsx("span",{className:"text-base md:text-lg font-bold text-white font-mono",children:u.day})]})]})}),x.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:justify-between md:items-end pointer-events-auto mt-auto gap-2 w-full max-w-full",children:[x.jsxs("div",{className:"flex gap-1 md:gap-2 bg-gray-900/80 p-1 md:p-2 rounded-2xl border border-gray-600/50 backdrop-blur-xl shadow-2xl w-full md:w-auto overflow-x-auto no-scrollbar justify-start md:justify-start",children:[x.jsx("div",{className:"flex gap-1 md:gap-2 min-w-max px-1",children:Qv.map(d=>x.jsx(Kv,{type:d,isSelected:l===d,onClick:()=>c(d),money:u.money},d))}),x.jsx("div",{className:"text-[8px] text-gray-500 uppercase writing-mode-vertical flex items-center justify-center font-bold tracking-widest border-l border-gray-700 pl-1 ml-1 select-none",children:"Build"})]}),x.jsxs("div",{className:"w-full md:w-80 h-32 md:h-48 bg-black/80 text-white rounded-xl border border-gray-700/80 backdrop-blur-xl shadow-2xl flex flex-col overflow-hidden relative",children:[x.jsxs("div",{className:"bg-gray-800/90 px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest text-gray-300 border-b border-gray-600 flex justify-between items-center",children:[x.jsx("span",{children:"City Feed"}),x.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})]}),x.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[linear-gradient(to_bottom,rgba(255,255,255,0)_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px] opacity-30 z-20"}),x.jsxs("div",{ref:o,className:"flex-1 overflow-y-auto p-2 md:p-3 space-y-2 text-[10px] md:text-xs font-mono scroll-smooth mask-image-b z-10",children:[r.length===0&&x.jsx("div",{className:"text-gray-500 italic text-center mt-10",children:"No active news stream."}),r.map(d=>x.jsxs("div",{className:`
                border-l-2 pl-2 py-1 transition-all animate-fade-in leading-tight relative
                ${d.type==="positive"?"border-green-500 text-green-200 bg-green-900/20":""}
                ${d.type==="negative"?"border-red-500 text-red-200 bg-red-900/20":""}
                ${d.type==="neutral"?"border-blue-400 text-blue-100 bg-blue-900/20":""}
              `,children:[x.jsx("span",{className:"opacity-70 text-[8px] absolute top-0.5 right-1",children:new Date(Number(d.id.split(".")[0])).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),d.text]},d.id))]})]})]})]})},Fv=({onStart:u})=>x.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-white font-sans p-6 bg-black/30 backdrop-blur-sm transition-all duration-1000",children:x.jsxs("div",{className:"max-w-md w-full bg-slate-900/90 p-8 rounded-2xl border border-slate-700 shadow-2xl backdrop-blur-xl relative overflow-hidden animate-fade-in",children:[x.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-cyan-500/20 rounded-full blur-3xl pointer-events-none"}),x.jsx("div",{className:"absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/20 rounded-full blur-3xl pointer-events-none"}),x.jsxs("div",{className:"relative z-10",children:[x.jsx("h1",{className:"text-5xl font-black mb-2 bg-linear-to-br from-white via-cyan-200 to-blue-400 bg-clip-text text-transparent tracking-tight",children:"SkyMetropolis"}),x.jsx("p",{className:"text-slate-400 mb-8 text-sm font-medium uppercase tracking-widest",children:"Isometric City Builder"}),x.jsx("button",{onClick:u,className:"w-full py-4 bg-linear-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold rounded-xl shadow-lg shadow-cyan-900/20 transform transition-all hover:scale-[1.02] active:scale-[0.98] text-lg tracking-wide",children:"Start Building"})]})]})}),Iv=()=>{const u=[];for(let l=0;l<ca;l++){const c=[];for(let r=0;r<ca;r++)c.push({x:r,y:l,buildingType:_e.None});u.push(c)}return u};function Pv(){const[u,l]=D.useState(!1),[c,r]=D.useState(Iv),[o,d]=D.useState({money:b0,population:0,day:1}),[y,v]=D.useState(_e.Road),[h,g]=D.useState([]),E=D.useRef(c),S=D.useRef(o);D.useEffect(()=>{E.current=c},[c]),D.useEffect(()=>{S.current=o},[o]);const M=D.useCallback(Z=>{g(w=>[...w.slice(-12),Z])},[]);D.useEffect(()=>{u&&M({id:Date.now().toString(),text:"Welcome to SkyMetropolis. Terrain generation complete.",type:"positive"})},[u,M]),D.useEffect(()=>{if(!u)return;const Z=setInterval(()=>{let w=0,R=0,T={};E.current.flat().forEach(q=>{if(q.buildingType!==_e.None){const V=Oi[q.buildingType];w+=V.incomeGen,R+=V.popGen,T[q.buildingType]=(T[q.buildingType]||0)+1}});const L=T[_e.Residential]||0,I=L*50;d(q=>{let V=q.population+R;return V>I&&(V=I),L===0&&q.population>0&&(V=Math.max(0,q.population-5)),{money:q.money+w,population:V,day:q.day+1}})},E0);return()=>clearInterval(Z)},[u]);const N=D.useCallback((Z,w)=>{if(!u)return;const R=E.current,T=S.current,L=y;if(Z<0||Z>=ca||w<0||w>=ca)return;const I=R[w][Z],q=Oi[L];if(L===_e.None){if(I.buildingType!==_e.None)if(T.money>=5){const ce=R.map(Y=>[...Y]);ce[w][Z]={...I,buildingType:_e.None},r(ce),d(Y=>({...Y,money:Y.money-5}))}else M({id:Date.now().toString(),text:"Cannot afford demolition costs.",type:"negative"});return}if(I.buildingType===_e.None)if(T.money>=q.cost){d(ce=>({...ce,money:ce.money-q.cost}));const V=R.map(ce=>[...ce]);V[w][Z]={...I,buildingType:L},r(V)}else M({id:Date.now().toString()+Math.random(),text:`Treasury insufficient for ${q.name}.`,type:"negative"})},[y,M,u]),H=()=>{l(!0)};return x.jsxs("div",{className:"relative w-screen h-screen overflow-hidden selection:bg-transparent selection:text-transparent bg-sky-900",children:[x.jsx(Vv,{grid:c,onTileClick:N,hoveredTool:y,population:o.population}),!u&&x.jsx(Fv,{onStart:H}),u&&x.jsx(Jv,{stats:o,selectedTool:y,onSelectTool:v,newsFeed:h}),x.jsx("style",{children:`
        @keyframes fade-in { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .animate-fade-in { animation: fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        .mask-image-b { -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%); mask-image: linear-gradient(to bottom, transparent 0%, black 15%); }
        
        /* Vertical text for toolbar label */
        .writing-mode-vertical { writing-mode: vertical-rl; text-orientation: mixed; }
        
        /* Custom scrollbar for news */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }
        `})]})}const t1=wp(Pv);export{t1 as default};
