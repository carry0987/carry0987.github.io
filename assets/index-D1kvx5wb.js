function b(...t){console.error(...t)}function O(t=null,r=window.location.href){const n=r.indexOf("#");if(n===-1)return null;const s=r.substring(n+1);if(t===null){const c=s.split("&")[0];return c.includes("=")?null:decodeURIComponent(c)}const o=new URLSearchParams(s).get(t);return o===null?null:decodeURIComponent(o)}function P(t,r,n=!0){let s,a=[];if(typeof t=="object"){if(s=t.url,Array.isArray(t.ignore))a=t.ignore.map(e=>e.startsWith("?")||e.startsWith("&")?e.substring(1):e);else if(typeof t.ignore=="string"){let e=t.ignore;(e.startsWith("?")||e.startsWith("&"))&&(e=e.substring(1)),a.push(e)}}else s=t;const o=new URL(s);if(r===null)return o.search="",o.toString();let c=o.search.substring(1);const l=c.length>0?c.split("&"):[],g=[],h=[];for(const e of l)a.includes(e)?g.push(e):h.push(e);const f=new URLSearchParams(h.join("&"));for(const[e,u]of Object.entries(r)){const i=u===null?"":String(u);!n&&f.has(e)||f.set(e,i)}const d=g.concat(f.toString().split("&").filter(e=>e)).join("&");return o.search=d?"?"+d:"",o.toString()}function T(t,r=null,n=!0){let s,a=[];if(typeof t=="object"){if(s=t.url,Array.isArray(t.ignore))a=t.ignore.map(e=>e.startsWith("#")||e.startsWith("&")?e.substring(1):e);else if(typeof t.ignore=="string"){let e=t.ignore;(e.startsWith("#")||e.startsWith("&"))&&(e=e.substring(1)),a.push(e)}}else s=t;const o=new URL(s);if(r===null)return o.hash="",o.toString();if(typeof r=="string"){const e=o.hash.substring(1),u=e.length>0?e.split("&"):[],i=[];for(const S of u)a.includes(S)&&i.push(S);const m=i.length>0?[...i,r]:[r];return o.hash="#"+m.join("&"),o.toString()}let c=o.hash.substring(1);const l=c.length>0?c.split("&"):[],g=[],h=[];for(const e of l)a.includes(e)?g.push(e):h.push(e);const f=new URLSearchParams(h.join("&"));for(const[e,u]of Object.entries(r)){const i=u===null?"":String(u);!n&&f.has(e)||f.set(e,i)}const d=g.concat(f.toString().split("&").filter(e=>e)).join("&");return o.hash=d?"#"+d:"",o.toString()}function H(t,r,n=!0){n&&(r=JSON.stringify(r)),window.localStorage.setItem(t,r)}function F(t,r=!0){const n=window.localStorage.getItem(t);if(n===null)return null;if(r)try{return JSON.parse(n)}catch(s){b("Error while parsing stored json value: ",s)}return n}function W(t){window.localStorage.removeItem(t)}function y(t,r=new FormData){const{data:n,parentKey:s=""}=t;if(n instanceof FormData)n.forEach((a,o)=>{r.append(o,a)});else if(n!==null&&typeof n=="object")if(n instanceof Blob||n instanceof File){const a=s||"file";r.append(a,n)}else Object.keys(n).forEach(a=>{const o=n[a],c=s?`${s}[${a}]`:a;o!==null&&typeof o=="object"?y({data:o,parentKey:c},r):o!==null&&r.append(c,String(o))});else n!==null&&r.append(s,n);return r}function j(t,r=""){return t instanceof FormData?t:y({data:t,parentKey:r})}function U(t){const r={};return t.forEach((n,s)=>{typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n===null?r[s]=n:r[s]=n.toString()}),r}function E(t){const r={};return t instanceof FormData?U(t):(typeof t=="object"&&Object.entries(t).forEach(([n,s])=>{typeof s=="string"||typeof s=="number"||typeof s=="boolean"||s===null?r[n]=s:r[n]=JSON.stringify(s)}),r)}async function L(t){const{url:r,method:n="GET",headers:s={},cache:a="no-cache",mode:o="cors",credentials:c="same-origin",body:l=null,beforeSend:g=null,success:h=null,error:f=null}=t;let p=r;const d=s instanceof Headers?s:new Headers(s),e={method:n,mode:o,headers:d,cache:a,credentials:c};if(l&&l!==null&&n.toUpperCase()==="GET"){const i=E(l);p=P(typeof r=="string"?r:r.toString(),i,!0)}else if(l&&l!==null&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let i=l;l instanceof FormData||(i=JSON.stringify(l),e.headers instanceof Headers||(e.headers=new Headers(e.headers)),e.headers.append("Content-Type","application/json")),e.body=i}let u;if(typeof p=="string"||p instanceof URL)u=new Request(p,e);else if(p instanceof Request)u=p;else throw new Error("Invalid URL type");try{const i=await new Promise(S=>{g?.(),S(u)}),m=await fetch(i);if(m.ok){if(typeof h=="function"){const w=await m.clone().json();h?.(w)}}else throw new Error(`HTTP error! status: ${m.status}`);return m}catch(i){const m=i instanceof Error?i:new Error(String(i));throw f?.(m),m}}async function R(t){const{url:r,data:n,method:s="POST",headers:a,cache:o,mode:c,credentials:l,success:g,error:h,beforeSend:f,encode:p=!0}=t,d={url:r,method:s,headers:a,cache:o,mode:c,credentials:l,body:p&&s.toUpperCase()!=="GET"?j(n):n,beforeSend:f,success:g,error:h};return(await L(d)).json()}const D=R;export{T as a,O as b,D as f,F as g,W as r,H as s};
