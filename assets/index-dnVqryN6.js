import{a as u,o as i,w as Be}from"./chunk-WWGJGFF6-CJwpp1BS.js";import{S as De,g as K,ax as Fe,P as Ze,W as qe,aj as Ke,ay as $e,az as de,aA as Je,G as Qe,f as ze,u as re,e as V,aB as et,aC as tt,M as Ae,x as he,r as Re,A as fe,t as nt,B as Ee,a as oe,b as rt,c as ot,z as st,C as at,V as $,aD as it}from"./three.module-DkShHL9a.js";import{c as Le}from"./createLucideIcon-LQgJ85oz.js";import{T as ct}from"./triangle-alert-CDBo2zQu.js";import{S as lt,R as ut,P as dt}from"./smartphone-CT37Evd3.js";const ht=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ft=Le("house",ht);const pt=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],xt=Le("trophy",pt);var c=(n=>(n.MENU="MENU",n.PLAYING="PLAYING",n.WON="WON",n.GAME_OVER="GAME_OVER",n))(c||{});const f=2,H=.6,Ne=.15,Ge=.96,se=.8,mt=15,S=[[1,1,1,1,1,1,1,1,1,1],[1,2,0,0,1,0,0,4,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,1,1,4,1,0,1,0,1],[1,0,0,0,0,1,0,0,0,1],[1,1,1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1,3,1],[1,1,1,1,1,1,1,1,1,1]],J=1e3,wt=.3,ae=40,yt=.4,vt=()=>{const n=document.createElement("canvas");n.width=32,n.height=32;const m=n.getContext("2d");if(m){const y=m.createRadialGradient(16,16,0,16,16,16);y.addColorStop(0,"rgba(255, 255, 255, 1)"),y.addColorStop(.4,"rgba(255, 255, 255, 0.5)"),y.addColorStop(1,"rgba(255, 255, 255, 0)"),m.fillStyle=y,m.fillRect(0,0,32,32)}return new at(n)},gt=({gameState:n,onGameStateChange:m,hasPermission:R})=>{const y=u.useRef(null),O=u.useRef(null),B=u.useRef(null),Q=u.useRef(null),E=u.useRef(null),C=u.useRef(null),l=u.useRef({x:0,y:0,z:0}),o=u.useRef({x:0,y:H,z:0}),z=u.useRef({x:0,z:0}),pe=u.useRef(0),k=u.useRef(null),ee=u.useRef(null),ie=u.useRef(null),T=u.useRef(null),W=u.useRef([]),_=u.useRef(null),Y=u.useRef([]),X=u.useRef(null);return u.useEffect(()=>{if(!y.current)return;const N=new De,D=new K(131589);N.background=D,N.fog=new Fe(D,10,60),O.current=N;const P=new Ze(45,window.innerWidth/window.innerHeight,.1,100);P.position.set(0,22,18),P.lookAt(0,0,0),B.current=P;const g=new qe({antialias:!0,alpha:!1});g.setSize(window.innerWidth,window.innerHeight),g.shadowMap.enabled=!0,g.shadowMap.type=Ke,g.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.current.appendChild(g.domElement),Q.current=g;const L=new $e(16777215,.1);N.add(L);const d=new de(65535,1.5,50);d.position.set(0,15,0),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.bias=-1e-4,N.add(d),k.current=d;const b=new Je(100,40,17476,4369);b.position.y=-8,N.add(b),T.current=b;const h=new Qe;N.add(h),C.current=h;const U=[];let I={x:0,z:0},F={x:0,z:0};const Pe=new ze(f,f,f),Ie=new re({color:1710638,roughness:.2,metalness:.8,emissive:255,emissiveIntensity:.1}),je=new ze(f,.5,f),Se=new re({color:328965,roughness:.5,metalness:.5}),xe=S[0].length*f/2-f/2,me=S.length*f/2-f/2;S.forEach((A,j)=>{A.forEach((r,p)=>{const t=p*f-xe,e=j*f-me;if(r!==4){const s=new V(je,Se);s.position.set(t,-.25,e),s.receiveShadow=!0,h.add(s)}if(r===1){const s=new V(Pe,Ie);s.position.set(t,0,e),s.castShadow=!0,s.receiveShadow=!0,h.add(s);const a=new et().setFromObject(s);a.expandByScalar(-.1),U.push(a)}else if(r===2){I={x:t,z:e};const s=new tt(.5,.8,32),a=new Ae({color:65280,side:he}),x=new V(s,a);x.rotation.x=-Math.PI/2,x.position.set(t,-f/2+.3,e),h.add(x)}else if(r===3){F={x:t,z:e};const s=new Re(.3,.3,40,16,1,!0),a=new Ae({color:16711935,transparent:!0,opacity:.3,blending:fe,side:he,depthWrite:!1}),x=new V(s,a);x.position.set(t,20,e),h.add(x),ie.current=a;const w=new Re(.8,1,.2,32),M=new re({color:16711935,emissive:16711935,emissiveIntensity:2}),v=new V(w,M);v.position.set(t,-f/2+.3,e),h.add(v);const G=new de(16711935,2,8);G.position.set(t,1,e),h.add(G)}})});const Oe=new nt(H,32,32),Ce=new re({color:65535,metalness:.6,roughness:.2,emissive:35071,emissiveIntensity:.5}),Z=new V(Oe,Ce);Z.castShadow=!0,o.current={x:I.x,y:0,z:I.z},Z.position.set(I.x,0,I.z);const we=new de(35071,2,12);Z.add(we),ee.current=we,h.add(Z),E.current=Z;const ye=[];for(let A=0;A<J;A++)ye.push({active:!1,x:0,y:0,z:0,vx:0,vy:0,vz:0,life:0,maxLife:1,color:new K,sizeScale:1});W.current=ye;const te=new Ee,Te=new Float32Array(J*3),_e=new Float32Array(J*3);te.setAttribute("position",new oe(Te,3)),te.setAttribute("color",new oe(_e,3));const ke=new rt({size:wt,vertexColors:!0,map:vt(),blending:fe,depthWrite:!1,transparent:!0,opacity:.8}),Ve=new ot(te,ke);h.add(Ve),_.current=te;const ce=new Ee,He=new Float32Array(ae*2*3),We=new Float32Array(ae*2);ce.setAttribute("position",new oe(He,3)),ce.setAttribute("alpha",new oe(We,1));const Ye=new st({uniforms:{color:{value:new K(65535)}},vertexShader:`
        attribute float alpha;
        varying float vAlpha;
        void main() {
          vAlpha = alpha;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform vec3 color;
        varying float vAlpha;
        void main() {
          gl_FragColor = vec4(color, vAlpha);
        }
      `,transparent:!0,depthWrite:!1,blending:fe,side:he}),le=new V(ce,Ye);le.frustumCulled=!1,h.add(le),X.current=le;const ve=(A,j,r,p,t,e,s)=>{let a=0;for(let x=0;x<J;x++)if(!W.current[x].active){const w=W.current[x];w.active=!0,w.x=A,w.y=j,w.z=r;const M=Math.random()*Math.PI*2,v=Math.random()*Math.PI,G=Math.random()*e;if(w.vx=Math.sin(v)*Math.cos(M)*G+(Math.random()-.5)*s,w.vy=Math.cos(v)*G+(Math.random()-.5)*s,w.vz=Math.sin(v)*Math.sin(M)*G+(Math.random()-.5)*s,w.life=1,w.maxLife=.5+Math.random()*.5,w.color.copy(p),a++,a>=t)break}},Xe=()=>{if(n!==c.PLAYING)return;const A=z.current.x,j=z.current.z,r=Math.round((o.current.x+xe)/f),p=Math.round((o.current.z+me)/f),t=S.length,e=S[0].length;let s=!1;if((p<0||p>=t||r<0||r>=e||S[p][r]===4)&&(s=!0),s)l.current.y-=.05,o.current.y+=l.current.y,o.current.x+=l.current.x,o.current.z+=l.current.z,o.current.y<-10&&m(c.GAME_OVER);else{o.current.y=0,l.current.y=0,l.current.x+=j*Ne,l.current.z+=A*Ne,l.current.x*=Ge,l.current.z*=Ge,l.current.x=Math.max(Math.min(l.current.x,se),-se),l.current.z=Math.max(Math.min(l.current.z,se),-se);let a=o.current.x+l.current.x,x=o.current.z+l.current.z;const w=(M,v)=>{const G=new it(new $(M,0,v),H);for(const q of U)if(q.intersectsSphere(G))return!0;return!1};if(w(a,o.current.z)){const M=o.current.x+(l.current.x>0?H:-H);ve(M,0,o.current.z,new K(16711935),15,.2,.1),l.current.x*=-.5,a=o.current.x}else o.current.x=a;if(w(o.current.x,x)){const M=o.current.z+(l.current.z>0?H:-H);ve(o.current.x,0,M,new K(16711935),15,.2,.1),l.current.z*=-.5,x=o.current.z}else o.current.z=x}E.current&&(E.current.position.set(o.current.x,o.current.y,o.current.z),E.current.rotation.x-=l.current.z*.2,E.current.rotation.z+=l.current.x*.2),s||Math.sqrt(Math.pow(o.current.x-F.x,2)+Math.pow(o.current.z-F.z,2))<1&&m(c.WON)},ge=()=>{requestAnimationFrame(ge);const A=Date.now()*.001;if(C.current&&(C.current.rotation.x+=(z.current.x*.5-C.current.rotation.x)*.1,C.current.rotation.z+=(-z.current.z*.5-C.current.rotation.z)*.1),k.current){const r=Math.sin(A*.8)*.3;k.current.intensity=1.5+r;const p=-z.current.z*25,t=-z.current.x*25;k.current.position.x+=(p-k.current.position.x)*.05,k.current.position.z+=(t-k.current.position.z)*.05}if(T.current){const r=z.current.z*8,p=-z.current.x*8;T.current.position.x+=(r-T.current.position.x)*.05,T.current.position.z+=(p-T.current.position.z)*.05,T.current.rotation.z=-z.current.z*.15,T.current.rotation.x=z.current.x*.15}const j=Math.sin(A*3);if(ee.current&&(ee.current.intensity=2+j*.5,ee.current.distance=12+j*2),E.current){const r=E.current.material;r.emissiveIntensity=.6+j*.2}if(ie.current&&(ie.current.opacity=.3+Math.sin(A*4)*.15),_.current){const r=_.current.attributes.position.array,p=_.current.attributes.color.array;for(let t=0;t<J;t++){const e=W.current[t];if(e.active){e.x+=e.vx,e.y+=e.vy,e.z+=e.vz,e.life-=.02,r[t*3]=e.x,r[t*3+1]=e.y,r[t*3+2]=e.z;const s=e.life/e.maxLife;p[t*3]=e.color.r*s,p[t*3+1]=e.color.g*s,p[t*3+2]=e.color.b*s,e.life<=0&&(e.active=!1,r[t*3]=0,r[t*3+1]=-1e3,r[t*3+2]=0)}else r[t*3]=0,r[t*3+1]=-1e3,r[t*3+2]=0}_.current.attributes.position.needsUpdate=!0,_.current.attributes.color.needsUpdate=!0}if(n===c.PLAYING&&E.current){const r=E.current.position.clone();r.y+=.05,Y.current.push(r),Y.current.length>ae&&Y.current.shift()}if(X.current&&Y.current.length>1){const r=X.current.geometry,p=r.attributes.position,t=r.attributes.alpha,e=Y.current,s=e.length;for(let a=0;a<s;a++){const x=e[a],w=a<s-1?e[a+1]:null,M=a>0?e[a-1]:null;let v=new $(1,0,0);w?v.subVectors(w,x):M&&v.subVectors(x,M),v.normalize();const G=new $(-v.z,0,v.x).multiplyScalar(yt*.5),q=new $().addVectors(x,G),ue=new $().subVectors(x,G),ne=a*2;p.setXYZ(ne,q.x,q.y,q.z),p.setXYZ(ne+1,ue.x,ue.y,ue.z);const Me=a/(s-1);t.setX(ne,Me),t.setX(ne+1,Me)}for(let a=s*2;a<ae*2;a++)p.setXYZ(a,0,0,0),t.setX(a,0);r.setDrawRange(0,s*2),p.needsUpdate=!0,t.needsUpdate=!0}Xe(),g.render(N,P)},be=()=>{P.aspect=window.innerWidth/window.innerHeight,P.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",be);const Ue=requestAnimationFrame(ge);return()=>{window.removeEventListener("resize",be),cancelAnimationFrame(Ue),y.current&&y.current.removeChild(g.domElement),g.dispose(),_.current&&_.current.dispose(),X.current&&(X.current.geometry.dispose(),X.current.material.dispose())}},[n,m]),u.useEffect(()=>{const N=()=>{const L=S[0].length*f/2-f/2,d=S.length*f/2-f/2;let b={x:0,z:0};S.forEach((h,U)=>{h.forEach((I,F)=>{I===2&&(b={x:F*f-L,z:U*f-d})})}),o.current={x:b.x,y:0,z:b.z},l.current={x:0,y:0,z:0},W.current&&W.current.forEach(h=>h.active=!1),Y.current=[]};n===c.PLAYING&&N();const D=L=>{if(!R)return;let{beta:d,gamma:b}=L;if(d===null||b===null)return;const h=30;d>90&&(d=90),d<-90&&(d=-90);const U=Math.min(Math.max(d/h,-1),1),I=Math.min(Math.max(b/h,-1),1);z.current={x:U,z:I}},P=L=>{if(!R)return;const d=L.accelerationIncludingGravity;if(!d)return;if(Math.sqrt((d.x||0)**2+(d.y||0)**2+(d.z||0)**2)>mt){const h=Date.now();h-pe.current>1e3&&(pe.current=h,N())}},g=L=>{if(R)return;const d=L.clientY/window.innerHeight*2-1,b=L.clientX/window.innerWidth*2-1;z.current={x:d,z:b}};return window.addEventListener("deviceorientation",D),window.addEventListener("devicemotion",P),window.addEventListener("mousemove",g),()=>{window.removeEventListener("deviceorientation",D),window.removeEventListener("devicemotion",P),window.removeEventListener("mousemove",g)}},[R,n]),i.jsx("div",{ref:y,className:"absolute inset-0 z-0"})},bt=({gameState:n,onStart:m,onReset:R,onMenu:y,needsPermission:O,onRequestPermission:B})=>n===c.PLAYING?i.jsxs("div",{className:"absolute top-4 left-0 right-0 flex justify-between px-6 pointer-events-none z-10",children:[i.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"TILT to Move"}),i.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"SHAKE to Reset"})]}):i.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 border border-cyan-500 p-8 rounded-2xl shadow-[0_0_30px_rgba(6,182,212,0.3)] text-center max-w-sm w-full mx-4",children:[n===c.WON&&i.jsxs("div",{className:"mb-6 animate-bounce",children:[i.jsx(xt,{className:"w-16 h-16 text-yellow-400 mx-auto mb-2"}),i.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-linear-to-r from-yellow-300 to-yellow-600",children:"VICTORY!"})]}),n===c.GAME_OVER&&i.jsxs("div",{className:"mb-6",children:[i.jsx(ct,{className:"w-16 h-16 text-red-500 mx-auto mb-2 animate-pulse"}),i.jsx("h2",{className:"text-3xl font-bold text-red-500",children:"YOU FELL!"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Watch out for the holes!"})]}),n===c.MENU&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-4xl font-black text-cyan-400 mb-2 tracking-wider drop-shadow-lg",children:"NEON MAZE"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Navigate the ball to the pink beam."})]}),i.jsxs("div",{className:"space-y-4",children:[O&&n===c.MENU?i.jsxs("button",{onClick:B,className:"w-full group flex items-center justify-center gap-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95",children:[i.jsx(lt,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),"Enable Sensors & Play"]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:n===c.GAME_OVER?R:m,className:"w-full group flex items-center justify-center gap-2 bg-linear-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95 shadow-lg",children:[n===c.WON||n===c.GAME_OVER?i.jsx(ut,{}):i.jsx(dt,{}),n===c.WON?"Play Again":n===c.GAME_OVER?"Try Again":"Start Game"]}),(n===c.WON||n===c.GAME_OVER)&&i.jsxs("button",{onClick:y,className:"w-full group flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold py-3 px-6 rounded-xl transition-all active:scale-95",children:[i.jsx(ft,{className:"w-5 h-5"}),"Main Menu"]})]}),!O&&n===c.MENU&&i.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Desktop: Use mouse to tilt board.",i.jsx("br",{}),"Mobile: Tilt device to move."]})]})]})});function Mt(){const[n,m]=u.useState(c.MENU),[R,y]=u.useState(!1),[O,B]=u.useState(!1);u.useEffect(()=>{const o=typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function";B(o),o||y(!0)},[]);const Q=async()=>{if(O)try{await DeviceOrientationEvent.requestPermission()==="granted"?(y(!0),m(c.PLAYING)):alert("Motion permissions are required to play.")}catch(o){console.error(o),y(!0),m(c.PLAYING)}else y(!0),m(c.PLAYING)},E=()=>{O&&!R?Q():m(c.PLAYING)},C=()=>{m(c.PLAYING)},l=()=>{m(c.MENU)};return i.jsxs("div",{className:"relative w-full h-screen overflow-hidden bg-black select-none",children:[i.jsx(gt,{gameState:n,onGameStateChange:m,hasPermission:R}),i.jsx(bt,{gameState:n,onStart:E,onReset:C,onMenu:l,needsPermission:O&&!R,onRequestPermission:Q})]})}const Gt={fullscreen:!0};function Lt(){return[{title:"Neon Gyro Maze | Carry"},{property:"og:title",content:"Neon Gyro Maze"},{name:"description",content:"A neon-themed maze game controlled by tilting your device. Navigate the glowing ball through the maze using your gyroscope."}]}const Pt=Be(Mt);export{Pt as default,Gt as handle,Lt as meta};
