var v=Object.defineProperty;var m=(h,t,s)=>t in h?v(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var a=(h,t,s)=>m(h,typeof t!="symbol"?t+"":t,s);import{r as f,j as c}from"./app-CkNKPkcx.js";import{S as w}from"./stats.esm-BlRy9uj9.js";class p{constructor(t){a(this,"options");a(this,"x");a(this,"y");a(this,"vx");a(this,"vy");a(this,"radius");a(this,"color");a(this,"candrod");this.options=t;const{x:s,y:o,r:n,color:i}=t;this.x=s,this.y=o,this.vx=0,this.vy=0,this.radius=n,this.color=i,this.candrod=!0}paint(t){t.beginPath(),t.arc(this.x,this.y,this.radius-1,0,Math.PI*2),t.fillStyle=this.color,t.fill()}run(t,s){const o=t.getContext("2d");if(!o)throw new Error("Canvas context is null");if(!this.candrod)return this.paint(o);const n=12,i=9.8,e=.5,r=.8,l=t.width/20;this.vx+=this.vx>0?-e*s:e*s,this.vy=this.vy+i*s,this.x+=s*this.vx*l,this.y+=s*this.vy*l,(this.y>t.height-n||this.y<n)&&(this.y=this.y<n?n:t.height-n,this.vy=-this.vy*r),(this.x>t.width-n||this.x<n)&&(this.x=this.x<n?n:t.width-n,this.vx=-this.vx*r),this.paint(o)}setSpeed(t,s){this.vx=t,this.vy=s}}class g{constructor(){a(this,"balls",[]);a(this,"canvas");a(this,"stats");a(this,"RAF",(window.requestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}).bind(window));a(this,"animate",()=>{if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas,s=t.getContext("2d");if(!s)throw new Error("Canvas context is null");s.clearRect(0,0,t.width,t.height),s.save(),s.fillStyle="rgba(255,255,255,0.2)",s.fillRect(0,0,t.width,t.height),s.restore();let o=16/1e3;return this.collision(),this.balls.forEach(n=>{n.run(t,o)}),this.stats.update(),this.RAF(this.animate)});this.stats=new w,this.stats.setMode(0),this.renderStats(),this.init(),this.animate(),this.setListener()}renderStats(){this.stats.dom.style.position="absolute",this.stats.dom.style.left="unset",this.stats.dom.style.right="0",this.stats.dom.style.top="0",document.body.appendChild(this.stats.dom)}init(){const t=document.querySelector("#cas");if(!t)throw new Error("Canvas element not found");t.width=window.innerWidth,t.height=window.innerHeight,this.canvas=t;const s=12;for(let o=0;o<100;o++){let n=new p({x:this.getRandom(s,t.width-s),y:this.getRandom(s,t.height-s),r:s,color:`rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 1)`});this.balls.push(n)}}collision(){const t=this.balls,s=.8;for(let o=0;o<t.length;o++)for(let n=0;n<t.length;n++){let i=t[o],e=t[n];if(i!==e){let r=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));if(Math.ceil(r)<i.radius+e.radius+2){let l=((i.vx-e.vx)*Math.pow(i.x-e.x,2)+(i.vy-e.vy)*(i.x-e.x)*(i.y-e.y))/Math.pow(r,2),d=((i.vy-e.vy)*Math.pow(i.y-e.y,2)+(i.vx-e.vx)*(i.x-e.x)+(i.y-e.y))/Math.pow(r,2);i.vx=(i.vx-l)*s,i.vy=(i.vy-d)*s,e.vx=(e.vx+l)*s,e.vy=(e.vy+d)*s;let x=(i.radius+e.radius+2-r)/2,y=x*(i.x-e.x)/r,u=x*(i.y-e.y)/r;i.x=i.x+y,i.y=i.y+u,e.x=e.x-y,e.y=e.y-u}}}}setListener(){if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas;t.addEventListener("click",s=>{let o=s.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-t.offsetLeft,n=s.clientY+document.body.scrollTop+document.documentElement.scrollTop-t.offsetTop;this.balls.forEach(function(i){i.vx=(o-i.x)/40,i.vy=(n-i.y)/40})})}getRandom(t,s){return Math.random()*(s-t)+t}}function R(){return document.body.addEventListener("contextmenu",h=>{h.preventDefault()}),f.useEffect(()=>{new g},[]),c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"tips",children:"Left click to create a gravity point"}),c.jsx("canvas",{id:"cas",className:"bg-[#0A3136]"})]})}export{R as default};
