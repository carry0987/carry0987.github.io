import{a as u,o as a,w as Ke}from"./chunk-WWGJGFF6-CJwpp1BS.js";import{S as $e,g as J,ax as Je,P as Qe,W as et,aj as tt,ay as nt,az as xe,aA as rt,G as ot,f as Le,u as ae,e as H,aB as st,aC as at,M as Pe,x as we,r as Ie,A as ve,t as it,B as Se,a as ie,b as ct,c as lt,z as ut,C as dt,V as B,aD as ft}from"./three.module-DkShHL9a.js";import{c as Oe}from"./createLucideIcon-LQgJ85oz.js";import{T as ht}from"./triangle-alert-CDBo2zQu.js";import{S as mt,R as pt,P as xt}from"./smartphone-CT37Evd3.js";const wt=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],vt=Oe("house",wt);const yt=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],gt=Oe("trophy",yt);var i=(o=>(o.MENU="MENU",o.PLAYING="PLAYING",o.WON="WON",o.GAME_OVER="GAME_OVER",o))(i||{});const p=2,D=.6,je=.15,Ce=.96,ce=.8,bt=15,C=[[1,1,1,1,1,1,1,1,1,1],[1,2,0,0,1,0,0,4,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,1,1,4,1,0,1,0,1],[1,0,0,0,0,1,0,0,0,1],[1,1,1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1,3,1],[1,1,1,1,1,1,1,1,1,1]],Q=1e3,Mt=.3,le=40,zt=.4,At=()=>{const o=document.createElement("canvas");o.width=32,o.height=32;const w=o.getContext("2d");if(w){const y=w.createRadialGradient(16,16,0,16,16,16);y.addColorStop(0,"rgba(255, 255, 255, 1)"),y.addColorStop(.4,"rgba(255, 255, 255, 0.5)"),y.addColorStop(1,"rgba(255, 255, 255, 0)"),w.fillStyle=y,w.fillRect(0,0,32,32)}return new dt(o)},Rt=({gameState:o,onGameStateChange:w,hasPermission:A})=>{const y=u.useRef(null),O=u.useRef(null),F=u.useRef(null),ee=u.useRef(null),R=u.useRef(null),P=u.useRef(null),d=u.useRef({x:0,y:0,z:0}),s=u.useRef({x:0,y:D,z:0}),x=u.useRef({x:0,z:0}),ye=u.useRef(0),te=u.useRef(!1),T=u.useRef(null),ne=u.useRef(null),ue=u.useRef(null),_=u.useRef(null),X=u.useRef([]),k=u.useRef(null),Y=u.useRef([]),W=u.useRef(null);return u.useEffect(()=>{if(!y.current)return;const E=new $e,U=new J(131589);E.background=U,E.fog=new Je(U,10,60),O.current=E;const N=new Qe(45,window.innerWidth/window.innerHeight,.1,100);N.position.set(0,22,18),N.lookAt(0,0,0),F.current=N;const b=new et({antialias:!0,alpha:!1});b.setSize(window.innerWidth,window.innerHeight),b.shadowMap.enabled=!0,b.shadowMap.type=tt,b.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.current.appendChild(b.domElement),ee.current=b;const I=new nt(16777215,.1);E.add(I);const f=new xe(65535,1.5,50);f.position.set(0,15,0),f.castShadow=!0,f.shadow.mapSize.width=2048,f.shadow.mapSize.height=2048,f.shadow.bias=-1e-4,E.add(f),T.current=f;const M=new rt(100,40,17476,4369);M.position.y=-8,E.add(M),_.current=M;const h=new ot;E.add(h),P.current=h;const Z=[];let S={x:0,z:0},q={x:0,z:0};const _e=new Le(p,p,p),ge=new ae({color:1710638,roughness:.2,metalness:.8,emissive:255,emissiveIntensity:.1}),ke=new Le(p,.5,p),V=new ae({color:328965,roughness:.5,metalness:.5});V.onBeforeCompile=m=>{m.uniforms.tiltX={value:0},m.uniforms.tiltZ={value:0},m.uniforms.time={value:0},V.userData.uniforms=m.uniforms,m.fragmentShader=`
        uniform float tiltX;
        uniform float tiltZ;
        uniform float time;
      `+m.fragmentShader,m.fragmentShader=m.fragmentShader.replace("#include <emissivemap_fragment>",`
        #include <emissivemap_fragment>
        
        vec2 tiltDir = vec2(tiltZ, tiltX); 
        float tiltLen = length(tiltDir);
        
        if (tiltLen > 0.1) {
          float pulse = sin(time * 5.0) * 0.5 + 0.5;
          vec3 tiltColor = vec3(0.0, 1.0, 1.0) * tiltLen * 0.5; 
          totalEmissiveRadiance += tiltColor * pulse;
        }
        `)};const be=C[0].length*p/2-p/2,Me=C.length*p/2-p/2;C.forEach((m,G)=>{m.forEach((v,j)=>{const g=j*p-be,r=G*p-Me;if(v!==4){const t=new H(ke,V);t.position.set(g,-.25,r),t.receiveShadow=!0,h.add(t)}if(v===1){const t=new H(_e,ge);t.position.set(g,0,r),t.castShadow=!0,t.receiveShadow=!0,h.add(t);const e=new st().setFromObject(t);e.expandByScalar(-.1),Z.push(e)}else if(v===2){S={x:g,z:r};const t=new at(.5,.8,32),e=new Pe({color:65280,side:we}),n=new H(t,e);n.rotation.x=-Math.PI/2,n.position.set(g,-p/2+.3,r),h.add(n)}else if(v===3){q={x:g,z:r};const t=new Ie(.3,.3,40,16,1,!0),e=new Pe({color:16711935,transparent:!0,opacity:.3,blending:ve,side:we,depthWrite:!1}),n=new H(t,e);n.position.set(g,20,r),h.add(n),ue.current=e;const c=new Ie(.8,1,.2,32),l=new ae({color:16711935,emissive:16711935,emissiveIntensity:2}),z=new H(c,l);z.position.set(g,-p/2+.3,r),h.add(z);const L=new xe(16711935,2,8);L.position.set(g,1,r),h.add(L)}})});const Te=new it(D,32,32),Ve=new ae({color:65535,metalness:.6,roughness:.2,emissive:35071,emissiveIntensity:.5}),K=new H(Te,Ve);K.castShadow=!0,s.current={x:S.x,y:0,z:S.z},K.position.set(S.x,0,S.z);const ze=new xe(35071,2,12);K.add(ze),ne.current=ze,h.add(K),R.current=K;const Ae=[];for(let m=0;m<Q;m++)Ae.push({active:!1,x:0,y:0,z:0,vx:0,vy:0,vz:0,life:0,maxLife:1,color:new J,sizeScale:1});X.current=Ae;const re=new Se,He=new Float32Array(Q*3),De=new Float32Array(Q*3);re.setAttribute("position",new ie(He,3)),re.setAttribute("color",new ie(De,3));const Xe=new ct({size:Mt,vertexColors:!0,map:At(),blending:ve,depthWrite:!1,transparent:!0,opacity:.8}),Ye=new lt(re,Xe);h.add(Ye),k.current=re;const de=new Se,We=new Float32Array(le*2*3),Ze=new Float32Array(le*2);de.setAttribute("position",new ie(We,3)),de.setAttribute("alpha",new ie(Ze,1));const Be=new ut({uniforms:{color:{value:new J(65535)}},vertexShader:`
        attribute float alpha;
        varying float vAlpha;
        void main() {
          vAlpha = alpha;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform vec3 color;
        varying float vAlpha;
        void main() {
          gl_FragColor = vec4(color, vAlpha);
        }
      `,transparent:!0,depthWrite:!1,blending:ve,side:we}),fe=new H(de,Be);fe.frustumCulled=!1,h.add(fe),W.current=fe;const Re=(m,G,v,j,g,r,t)=>{let e=0;for(let n=0;n<Q;n++)if(!X.current[n].active){const c=X.current[n];c.active=!0,c.x=m,c.y=G,c.z=v;const l=Math.random()*Math.PI*2,z=Math.random()*Math.PI,L=Math.random()*r;if(c.vx=Math.sin(z)*Math.cos(l)*L+(Math.random()-.5)*t,c.vy=Math.cos(z)*L+(Math.random()-.5)*t,c.vz=Math.sin(z)*Math.sin(l)*L+(Math.random()-.5)*t,c.life=1,c.maxLife=.5+Math.random()*.5,c.color.copy(j),e++,e>=g)break}},Fe=()=>{if(o!==i.PLAYING)return;const m=x.current.x,G=x.current.z,v=Math.round((s.current.x+be)/p),j=Math.round((s.current.z+Me)/p),g=C.length,r=C[0].length;let t=!1;if((j<0||j>=g||v<0||v>=r||C[j][v]===4)&&(t=!0),t)d.current.y-=.05,s.current.y+=d.current.y,s.current.x+=d.current.x,s.current.z+=d.current.z,s.current.y<-10&&w(i.GAME_OVER);else{s.current.y=0,d.current.y=0,d.current.x+=G*je,d.current.z+=m*je,d.current.x*=Ce,d.current.z*=Ce,d.current.x=Math.max(Math.min(d.current.x,ce),-ce),d.current.z=Math.max(Math.min(d.current.z,ce),-ce);let e=s.current.x+d.current.x,n=s.current.z+d.current.z;const c=(l,z)=>{const L=new ft(new B(l,0,z),D);for(const oe of Z)if(oe.intersectsSphere(L))return!0;return!1};if(c(e,s.current.z)){const l=s.current.x+(d.current.x>0?D:-D);Re(l,0,s.current.z,new J(16711935),15,.2,.1),d.current.x*=-.5,e=s.current.x}else s.current.x=e;if(c(s.current.x,n)){const l=s.current.z+(d.current.z>0?D:-D);Re(s.current.x,0,l,new J(16711935),15,.2,.1),d.current.z*=-.5,n=s.current.z}else s.current.z=n}R.current&&(R.current.position.set(s.current.x,s.current.y,s.current.z),R.current.rotation.x-=d.current.z*.2,R.current.rotation.z+=d.current.x*.2),t||Math.sqrt(Math.pow(s.current.x-q.x,2)+Math.pow(s.current.z-q.z,2))<1&&w(i.WON)},Ee=()=>{requestAnimationFrame(Ee);const G=(navigator.getGamepads?navigator.getGamepads():[])[0];if(G){const t=G.axes[0],e=G.axes[1];(Math.abs(t)>.1||Math.abs(e)>.1)&&(te.current=!0),te.current&&(x.current={x:Math.abs(e)<.1?0:e,z:Math.abs(t)<.1?0:t})}const v=Date.now()*.001;if(V.userData.uniforms&&(V.userData.uniforms.time.value=v,V.userData.uniforms.tiltX.value=x.current.x,V.userData.uniforms.tiltZ.value=x.current.z),P.current){P.current.rotation.x+=(x.current.x*.5-P.current.rotation.x)*.1,P.current.rotation.z+=(-x.current.z*.5-P.current.rotation.z)*.1;const t=1-Math.sqrt(x.current.x**2+x.current.z**2)*.1;P.current.scale.y+=(t-P.current.scale.y)*.1}const j=Math.sqrt(x.current.x**2+x.current.z**2);if(ge.emissiveIntensity=.1+j*.8,T.current){const r=Math.sin(v*.8)*.3;T.current.intensity=1.5+r;const t=-x.current.z*25,e=-x.current.x*25;T.current.position.x+=(t-T.current.position.x)*.05,T.current.position.z+=(e-T.current.position.z)*.05}if(_.current){const r=x.current.z*8,t=-x.current.x*8;_.current.position.x+=(r-_.current.position.x)*.05,_.current.position.z+=(t-_.current.position.z)*.05,_.current.rotation.z=-x.current.z*.15,_.current.rotation.x=x.current.x*.15}const g=Math.sin(v*3);if(ne.current&&(ne.current.intensity=2+g*.5,ne.current.distance=12+g*2),R.current){const r=R.current.material;r.emissiveIntensity=.6+g*.2}if(ue.current&&(ue.current.opacity=.3+Math.sin(v*4)*.15),k.current){const r=k.current.attributes.position.array,t=k.current.attributes.color.array;for(let e=0;e<Q;e++){const n=X.current[e];if(n.active){n.x+=n.vx,n.y+=n.vy,n.z+=n.vz,n.life-=.02,r[e*3]=n.x,r[e*3+1]=n.y,r[e*3+2]=n.z;const c=n.life/n.maxLife;t[e*3]=n.color.r*c,t[e*3+1]=n.color.g*c,t[e*3+2]=n.color.b*c,n.life<=0&&(n.active=!1,r[e*3]=0,r[e*3+1]=-1e3,r[e*3+2]=0)}else r[e*3]=0,r[e*3+1]=-1e3,r[e*3+2]=0}k.current.attributes.position.needsUpdate=!0,k.current.attributes.color.needsUpdate=!0}if(o===i.PLAYING&&R.current){const r=R.current.position.clone();r.y+=.05,Y.current.push(r),Y.current.length>le&&Y.current.shift()}if(W.current&&Y.current.length>1){const r=W.current.geometry,t=r.attributes.position,e=r.attributes.alpha,n=Y.current,c=n.length;for(let l=0;l<c;l++){const z=n[l],L=l<c-1?n[l+1]:null,oe=l>0?n[l-1]:null;let $=new B(1,0,0);L?$.subVectors(L,z):oe&&$.subVectors(z,oe),$.normalize();const Ne=new B(-$.z,0,$.x).multiplyScalar(zt*.5),me=new B().addVectors(z,Ne),pe=new B().subVectors(z,Ne),se=l*2;t.setXYZ(se,me.x,me.y,me.z),t.setXYZ(se+1,pe.x,pe.y,pe.z);const Ge=l/(c-1);e.setX(se,Ge),e.setX(se+1,Ge)}for(let l=c*2;l<le*2;l++)t.setXYZ(l,0,0,0),e.setX(l,0);r.setDrawRange(0,c*2),t.needsUpdate=!0,e.needsUpdate=!0}Fe(),b.render(E,N)},Ue=()=>{const m=window.innerWidth/window.innerHeight,G=new B(0,22,18);let v=1;m<1&&(v=Math.max(1,1.2/m)),N.position.copy(G).multiplyScalar(v),N.lookAt(0,0,0)},he=()=>{N.aspect=window.innerWidth/window.innerHeight,N.updateProjectionMatrix(),b.setSize(window.innerWidth,window.innerHeight),Ue()};window.addEventListener("resize",he),he();const qe=requestAnimationFrame(Ee);return()=>{window.removeEventListener("resize",he),cancelAnimationFrame(qe),y.current&&y.current.removeChild(b.domElement),b.dispose(),k.current&&k.current.dispose(),W.current&&(W.current.geometry.dispose(),W.current.material.dispose())}},[o,w]),u.useEffect(()=>{const E=()=>{const I=C[0].length*p/2-p/2,f=C.length*p/2-p/2;let M={x:0,z:0};C.forEach((h,Z)=>{h.forEach((S,q)=>{S===2&&(M={x:q*p-I,z:Z*p-f})})}),s.current={x:M.x,y:0,z:M.z},d.current={x:0,y:0,z:0},X.current&&X.current.forEach(h=>h.active=!1),Y.current=[]};o===i.PLAYING&&E();const U=I=>{if(te.current=!1,!A)return;let{beta:f,gamma:M}=I;if(f===null||M===null)return;const h=30;f>90&&(f=90),f<-90&&(f=-90);const Z=Math.min(Math.max(f/h,-1),1),S=Math.min(Math.max(M/h,-1),1);x.current={x:Z,z:S}},N=I=>{if(!A)return;const f=I.accelerationIncludingGravity;if(!f)return;if(Math.sqrt((f.x||0)**2+(f.y||0)**2+(f.z||0)**2)>bt){const h=Date.now();h-ye.current>1e3&&(ye.current=h,E())}},b=I=>{if(te.current=!1,A)return;const f=I.clientY/window.innerHeight*2-1,M=I.clientX/window.innerWidth*2-1;x.current={x:f,z:M}};return window.addEventListener("deviceorientation",U),window.addEventListener("devicemotion",N),window.addEventListener("mousemove",b),()=>{window.removeEventListener("deviceorientation",U),window.removeEventListener("devicemotion",N),window.removeEventListener("mousemove",b)}},[A,o]),a.jsx("div",{ref:y,className:"absolute inset-0 z-0"})},Et=({gameState:o,onStart:w,onReset:A,onMenu:y,needsPermission:O,onRequestPermission:F})=>o===i.PLAYING?a.jsxs("div",{className:"absolute top-4 left-0 right-0 flex justify-between px-6 pointer-events-none z-10",children:[a.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"TILT to Move"}),a.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"SHAKE to Reset"})]}):a.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gray-900 border border-cyan-500 p-8 rounded-2xl shadow-[0_0_30px_rgba(6,182,212,0.3)] text-center max-w-sm w-full mx-4",children:[o===i.WON&&a.jsxs("div",{className:"mb-6 animate-bounce",children:[a.jsx(gt,{className:"w-16 h-16 text-yellow-400 mx-auto mb-2"}),a.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-linear-to-r from-yellow-300 to-yellow-600",children:"VICTORY!"})]}),o===i.GAME_OVER&&a.jsxs("div",{className:"mb-6",children:[a.jsx(ht,{className:"w-16 h-16 text-red-500 mx-auto mb-2 animate-pulse"}),a.jsx("h2",{className:"text-3xl font-bold text-red-500",children:"YOU FELL!"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Watch out for the holes!"})]}),o===i.MENU&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-4xl font-black text-cyan-400 mb-2 tracking-wider drop-shadow-lg",children:"NEON MAZE"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Navigate the ball to the pink beam."})]}),a.jsxs("div",{className:"space-y-4",children:[O&&o===i.MENU?a.jsxs("button",{onClick:F,className:"w-full group flex items-center justify-center gap-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95",children:[a.jsx(mt,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),"Enable Sensors & Play"]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:o===i.GAME_OVER?A:w,className:"w-full group flex items-center justify-center gap-2 bg-linear-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95 shadow-lg",children:[o===i.WON||o===i.GAME_OVER?a.jsx(pt,{}):a.jsx(xt,{}),o===i.WON?"Play Again":o===i.GAME_OVER?"Try Again":"Start Game"]}),(o===i.WON||o===i.GAME_OVER)&&a.jsxs("button",{onClick:y,className:"w-full group flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold py-3 px-6 rounded-xl transition-all active:scale-95",children:[a.jsx(vt,{className:"w-5 h-5"}),"Main Menu"]})]}),!O&&o===i.MENU&&a.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Desktop: Use mouse to tilt board.",a.jsx("br",{}),"Mobile: Tilt device to move."]})]})]})});function Nt(){const[o,w]=u.useState(i.MENU),[A,y]=u.useState(!1),[O,F]=u.useState(!1);u.useEffect(()=>{const s=typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function";F(s),s||y(!0)},[]);const ee=async()=>{if(O)try{await DeviceOrientationEvent.requestPermission()==="granted"?(y(!0),w(i.PLAYING)):alert("Motion permissions are required to play.")}catch(s){console.error(s),y(!0),w(i.PLAYING)}else y(!0),w(i.PLAYING)},R=()=>{O&&!A?ee():w(i.PLAYING)},P=()=>{w(i.PLAYING)},d=()=>{w(i.MENU)};return a.jsxs("div",{className:"relative w-full h-screen overflow-hidden bg-black select-none",children:[a.jsx(Rt,{gameState:o,onGameStateChange:w,hasPermission:A}),a.jsx(Et,{gameState:o,onStart:R,onReset:P,onMenu:d,needsPermission:O&&!A,onRequestPermission:ee})]})}const jt={fullscreen:!0};function Ct(){return[{title:"Neon Gyro Maze | Carry"},{property:"og:title",content:"Neon Gyro Maze"},{name:"description",content:"A neon-themed maze game controlled by tilting your device. Navigate the glowing ball through the maze using your gyroscope."}]}const Ot=Ke(Nt);export{Ot as default,jt as handle,Ct as meta};
