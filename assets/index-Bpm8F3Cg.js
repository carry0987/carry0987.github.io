import{a as g,p as t,w as je}from"./chunk-WWGJGFF6-B6u1Qf49.js";import{c as b}from"./createLucideIcon-DTDhPEOD.js";import{A as ve}from"./arrow-left-BA1BmZXV.js";import{I as P}from"./image-2teTneuk.js";import{X as oe}from"./x-BoKuTvzl.js";import{W as Ne,D as ke,L as Se,G as Ce,T as z}from"./index-DdCA84YG.js";import{C as Ee}from"./clock-BYjh2l7s.js";import{U as $e}from"./upload-DAO8iJOt.js";import{T as Re}from"./trash-2-SEUNApwH.js";const Me=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Te=b("battery",Me);const Ie=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],G=b("chevron-left",Ie);const Ae=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],X=b("ellipsis-vertical",Ae);const ze=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],J=b("ellipsis",ze);const Pe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],D=b("mic",Pe);const Le=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Y=b("phone",Le);const De=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Q=b("play",De);const _e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fe=b("plus",_e);const Ue=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Oe=b("refresh-cw",Ue);const Ve=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ge=b("save",Ve);const He=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],Be=b("signal",He);const We=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],H=b("smile",We);const qe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ke=b("sparkles",qe);const Xe=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Je=b("type",Xe);const Ye=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Qe=b("video",Ye);const Ze=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],et=b("wifi",Ze);function tt(e,r){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const a=document.implementation.createHTMLDocument(),s=a.createElement("base"),i=a.createElement("a");return a.head.appendChild(s),a.body.appendChild(i),r&&(s.href=r),i.href=e,i.href}const rt=(()=>{let e=0;const r=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${r()}${e}`)})();function R(e){const r=[];for(let a=0,s=e.length;a<s;a++)r.push(e[a]);return r}let I=null;function de(e={}){return I||(e.includeStyleProperties?(I=e.includeStyleProperties,I):(I=R(window.getComputedStyle(document.documentElement)),I))}function _(e,r){const s=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(r);return s?parseFloat(s.replace("px","")):0}function at(e){const r=_(e,"border-left-width"),a=_(e,"border-right-width");return e.clientWidth+r+a}function st(e){const r=_(e,"border-top-width"),a=_(e,"border-bottom-width");return e.clientHeight+r+a}function ue(e,r={}){const a=r.width||at(e),s=r.height||st(e);return{width:a,height:s}}function nt(){let e,r;try{r=process}catch{}const a=r&&r.env?r.env.devicePixelRatio:null;return a&&(e=parseInt(a,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const N=16384;function it(e){(e.width>N||e.height>N)&&(e.width>N&&e.height>N?e.width>e.height?(e.height*=N/e.width,e.width=N):(e.width*=N/e.height,e.height=N):e.width>N?(e.height*=N/e.width,e.width=N):(e.width*=N/e.height,e.height=N))}function F(e){return new Promise((r,a)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>r(s))})},s.onerror=a,s.crossOrigin="anonymous",s.decoding="async",s.src=e})}async function lt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(r=>`data:image/svg+xml;charset=utf-8,${r}`)}async function ct(e,r,a){const s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),n=document.createElementNS(s,"foreignObject");return i.setAttribute("width",`${r}`),i.setAttribute("height",`${a}`),i.setAttribute("viewBox",`0 0 ${r} ${a}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),i.appendChild(n),n.appendChild(e),lt(i)}const j=(e,r)=>{if(e instanceof r)return!0;const a=Object.getPrototypeOf(e);return a===null?!1:a.constructor.name===r.name||j(a,r)};function ot(e){const r=e.getPropertyValue("content");return`${e.cssText} content: '${r.replace(/'|"/g,"")}';`}function dt(e,r){return de(r).map(a=>{const s=e.getPropertyValue(a),i=e.getPropertyPriority(a);return`${a}: ${s}${i?" !important":""};`}).join(" ")}function ut(e,r,a,s){const i=`.${e}:${r}`,n=a.cssText?ot(a):dt(a,s);return document.createTextNode(`${i}{${n}}`)}function Z(e,r,a,s){const i=window.getComputedStyle(e,a),n=i.getPropertyValue("content");if(n===""||n==="none")return;const l=rt();try{r.className=`${r.className} ${l}`}catch{return}const c=document.createElement("style");c.appendChild(ut(l,a,i,s)),r.appendChild(c)}function xt(e,r,a){Z(e,r,":before",a),Z(e,r,":after",a)}const ee="application/font-woff",te="image/jpeg",mt={woff:ee,woff2:ee,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:te,jpeg:te,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ht(e){const r=/\.([^./]*?)$/g.exec(e);return r?r[1]:""}function q(e){const r=ht(e).toLowerCase();return mt[r]||""}function ft(e){return e.split(/,/)[1]}function W(e){return e.search(/^(data:)/)!==-1}function gt(e,r){return`data:${r};base64,${e}`}async function xe(e,r,a){const s=await fetch(e,r);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const i=await s.blob();return new Promise((n,l)=>{const c=new FileReader;c.onerror=l,c.onloadend=()=>{try{n(a({res:s,result:c.result}))}catch(u){l(u)}},c.readAsDataURL(i)})}const B={};function pt(e,r,a){let s=e.replace(/\?.*/,"");return a&&(s=e),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),r?`[${r}]${s}`:s}async function K(e,r,a){const s=pt(e,r,a.includeQueryParams);if(B[s]!=null)return B[s];a.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const n=await xe(e,a.fetchRequestInit,({res:l,result:c})=>(r||(r=l.headers.get("Content-Type")||""),ft(c)));i=gt(n,r)}catch(n){i=a.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;n&&(l=typeof n=="string"?n:n.message),l&&console.warn(l)}return B[s]=i,i}async function yt(e){const r=e.toDataURL();return r==="data:,"?e.cloneNode(!1):F(r)}async function bt(e,r){if(e.currentSrc){const n=document.createElement("canvas"),l=n.getContext("2d");n.width=e.clientWidth,n.height=e.clientHeight,l?.drawImage(e,0,0,n.width,n.height);const c=n.toDataURL();return F(c)}const a=e.poster,s=q(a),i=await K(a,s,r);return F(i)}async function wt(e,r){var a;try{if(!((a=e?.contentDocument)===null||a===void 0)&&a.body)return await U(e.contentDocument.body,r,!0)}catch{}return e.cloneNode(!1)}async function jt(e,r){return j(e,HTMLCanvasElement)?yt(e):j(e,HTMLVideoElement)?bt(e,r):j(e,HTMLIFrameElement)?wt(e,r):e.cloneNode(me(e))}const vt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",me=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Nt(e,r,a){var s,i;if(me(r))return r;let n=[];return vt(e)&&e.assignedNodes?n=R(e.assignedNodes()):j(e,HTMLIFrameElement)&&(!((s=e.contentDocument)===null||s===void 0)&&s.body)?n=R(e.contentDocument.body.childNodes):n=R(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),n.length===0||j(e,HTMLVideoElement)||await n.reduce((l,c)=>l.then(()=>U(c,a)).then(u=>{u&&r.appendChild(u)}),Promise.resolve()),r}function kt(e,r,a){const s=r.style;if(!s)return;const i=window.getComputedStyle(e);i.cssText?(s.cssText=i.cssText,s.transformOrigin=i.transformOrigin):de(a).forEach(n=>{let l=i.getPropertyValue(n);n==="font-size"&&l.endsWith("px")&&(l=`${Math.floor(parseFloat(l.substring(0,l.length-2)))-.1}px`),j(e,HTMLIFrameElement)&&n==="display"&&l==="inline"&&(l="block"),n==="d"&&r.getAttribute("d")&&(l=`path(${r.getAttribute("d")})`),s.setProperty(n,l,i.getPropertyPriority(n))})}function St(e,r){j(e,HTMLTextAreaElement)&&(r.innerHTML=e.value),j(e,HTMLInputElement)&&r.setAttribute("value",e.value)}function Ct(e,r){if(j(e,HTMLSelectElement)){const s=Array.from(r.children).find(i=>e.value===i.getAttribute("value"));s&&s.setAttribute("selected","")}}function Et(e,r,a){return j(r,Element)&&(kt(e,r,a),xt(e,r,a),St(e,r),Ct(e,r)),r}async function $t(e,r){const a=e.querySelectorAll?e.querySelectorAll("use"):[];if(a.length===0)return e;const s={};for(let n=0;n<a.length;n++){const c=a[n].getAttribute("xlink:href");if(c){const u=e.querySelector(c),m=document.querySelector(c);!u&&m&&!s[c]&&(s[c]=await U(m,r,!0))}}const i=Object.values(s);if(i.length){const n="http://www.w3.org/1999/xhtml",l=document.createElementNS(n,"svg");l.setAttribute("xmlns",n),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const c=document.createElementNS(n,"defs");l.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);e.appendChild(l)}return e}async function U(e,r,a){return!a&&r.filter&&!r.filter(e)?null:Promise.resolve(e).then(s=>jt(s,r)).then(s=>Nt(e,s,r)).then(s=>Et(e,s,r)).then(s=>$t(s,r))}const he=/url\((['"]?)([^'"]+?)\1\)/g,Rt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Mt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Tt(e){const r=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${r})(['"]?\\))`,"g")}function It(e){const r=[];return e.replace(he,(a,s,i)=>(r.push(i),a)),r.filter(a=>!W(a))}async function At(e,r,a,s,i){try{const n=a?tt(r,a):r,l=q(r);let c;return i||(c=await K(n,l,s)),e.replace(Tt(r),`$1${c}$3`)}catch{}return e}function zt(e,{preferredFontFormat:r}){return r?e.replace(Mt,a=>{for(;;){const[s,,i]=Rt.exec(a)||[];if(!i)return"";if(i===r)return`src: ${s};`}}):e}function fe(e){return e.search(he)!==-1}async function ge(e,r,a){if(!fe(e))return e;const s=zt(e,a);return It(s).reduce((n,l)=>n.then(c=>At(c,l,r,a)),Promise.resolve(s))}async function A(e,r,a){var s;const i=(s=r.style)===null||s===void 0?void 0:s.getPropertyValue(e);if(i){const n=await ge(i,null,a);return r.style.setProperty(e,n,r.style.getPropertyPriority(e)),!0}return!1}async function Pt(e,r){await A("background",e,r)||await A("background-image",e,r),await A("mask",e,r)||await A("-webkit-mask",e,r)||await A("mask-image",e,r)||await A("-webkit-mask-image",e,r)}async function Lt(e,r){const a=j(e,HTMLImageElement);if(!(a&&!W(e.src))&&!(j(e,SVGImageElement)&&!W(e.href.baseVal)))return;const s=a?e.src:e.href.baseVal,i=await K(s,q(s),r);await new Promise((n,l)=>{e.onload=n,e.onerror=r.onImageErrorHandler?(...u)=>{try{n(r.onImageErrorHandler(...u))}catch(m){l(m)}}:l;const c=e;c.decode&&(c.decode=n),c.loading==="lazy"&&(c.loading="eager"),a?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Dt(e,r){const s=R(e.childNodes).map(i=>pe(i,r));await Promise.all(s).then(()=>e)}async function pe(e,r){j(e,Element)&&(await Pt(e,r),await Lt(e,r),await Dt(e,r))}function _t(e,r){const{style:a}=e;r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.width&&(a.width=`${r.width}px`),r.height&&(a.height=`${r.height}px`);const s=r.style;return s!=null&&Object.keys(s).forEach(i=>{a[i]=s[i]}),e}const re={};async function ae(e){let r=re[e];if(r!=null)return r;const s=await(await fetch(e)).text();return r={url:e,cssText:s},re[e]=r,r}async function se(e,r){let a=e.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,n=(a.match(/url\([^)]+\)/g)||[]).map(async l=>{let c=l.replace(s,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),xe(c,r.fetchRequestInit,({result:u})=>(a=a.replace(l,`url(${u})`),[l,u]))});return Promise.all(n).then(()=>a)}function ne(e){if(e==null)return[];const r=[],a=/(\/\*[\s\S]*?\*\/)/gi;let s=e.replace(a,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(s);if(u===null)break;r.push(u[0])}s=s.replace(i,"");const n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(l,"gi");for(;;){let u=n.exec(s);if(u===null){if(u=c.exec(s),u===null)break;n.lastIndex=c.lastIndex}else c.lastIndex=n.lastIndex;r.push(u[0])}return r}async function Ft(e,r){const a=[],s=[];return e.forEach(i=>{if("cssRules"in i)try{R(i.cssRules||[]).forEach((n,l)=>{if(n.type===CSSRule.IMPORT_RULE){let c=l+1;const u=n.href,m=ae(u).then(h=>se(h,r)).then(h=>ne(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?c+=1:i.cssRules.length)}catch(k){console.error("Error inserting rule from remote css",{rule:p,error:k})}})).catch(h=>{console.error("Error loading remote css",h.toString())});s.push(m)}})}catch(n){const l=e.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&s.push(ae(i.href).then(c=>se(c,r)).then(c=>ne(c).forEach(u=>{l.insertRule(u,l.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",n)}}),Promise.all(s).then(()=>(e.forEach(i=>{if("cssRules"in i)try{R(i.cssRules||[]).forEach(n=>{a.push(n)})}catch(n){console.error(`Error while reading CSS rules from ${i.href}`,n)}}),a))}function Ut(e){return e.filter(r=>r.type===CSSRule.FONT_FACE_RULE).filter(r=>fe(r.style.getPropertyValue("src")))}async function Ot(e,r){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const a=R(e.ownerDocument.styleSheets),s=await Ft(a,r);return Ut(s)}function ye(e){return e.trim().replace(/["']/g,"")}function Vt(e){const r=new Set;function a(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(n=>{r.add(ye(n))}),Array.from(s.children).forEach(n=>{n instanceof HTMLElement&&a(n)})}return a(e),r}async function Gt(e,r){const a=await Ot(e,r),s=Vt(e);return(await Promise.all(a.filter(n=>s.has(ye(n.style.fontFamily))).map(n=>{const l=n.parentStyleSheet?n.parentStyleSheet.href:null;return ge(n.cssText,l,r)}))).join(`
`)}async function Ht(e,r){const a=r.fontEmbedCSS!=null?r.fontEmbedCSS:r.skipFonts?null:await Gt(e,r);if(a){const s=document.createElement("style"),i=document.createTextNode(a);s.appendChild(i),e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s)}}async function Bt(e,r={}){const{width:a,height:s}=ue(e,r),i=await U(e,r,!0);return await Ht(i,r),await pe(i,r),_t(i,r),await ct(i,a,s)}async function Wt(e,r={}){const{width:a,height:s}=ue(e,r),i=await Bt(e,r),n=await F(i),l=document.createElement("canvas"),c=l.getContext("2d"),u=r.pixelRatio||nt(),m=r.canvasWidth||a,h=r.canvasHeight||s;return l.width=m*u,l.height=h*u,r.skipAutoScale||it(l),l.style.width=`${m}`,l.style.height=`${h}`,r.backgroundColor&&(c.fillStyle=r.backgroundColor,c.fillRect(0,0,l.width,l.height)),c.drawImage(n,0,0,l.width,l.height),l}async function qt(e,r={}){return(await Wt(e,r)).toDataURL()}const ie={time:"12:34",batteryLevel:85,partnerName:"å¯¶è² â¤ï¸",partnerAvatar:"https://picsum.photos/100/100",myAvatar:"https://picsum.photos/101/101"},le=[{id:"1",text:"å—¨ï¼ä»Šå¤©æ™šä¸Šè¦åƒä»€éº¼ï¼Ÿ",isSender:!1,timestamp:"12:30",isRead:!0},{id:"2",text:"æˆ‘æƒ³åƒç«é‹ ðŸ²",isSender:!0,timestamp:"12:31",isRead:!0}],Kt=[{id:"instagram",name:"Instagram",icon:"camera"},{id:"line",name:"LINE",icon:"message-circle"},{id:"telegram",name:"Telegram",icon:"send"},{id:"tiktok",name:"TikTok",icon:"music"}],Xt=["â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ˜¡","ðŸ‘"],ce=e=>{const r=Math.floor(e/60),a=e%60;return`${r}:${a.toString().padStart(2,"0")}`},be=g.forwardRef(({platform:e,messages:r,settings:a,onUpdateMessage:s},i)=>{const[n,l]=g.useState(null),[c,u]=g.useState(null),m=d=>{if(e!=="instagram")return;const x=setTimeout(()=>{l(d)},500);u(x)},h=()=>{c&&(clearTimeout(c),u(null))},p=d=>{if(n){const E=r.find(S=>S.id===n)?.reaction===d?void 0:d;s(n,{reaction:E}),l(null)}};g.useEffect(()=>{const d=x=>{n&&!x.target.closest(".reaction-picker")&&l(null)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[n]);const k=()=>{switch(e){case"instagram":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-100 text-black",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(G,{size:28}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:a.partnerAvatar,alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-200"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold leading-tight",children:a.partnerName}),t.jsx("p",{className:"text-[10px] text-gray-400 leading-tight",children:"Active now"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-5 text-black",children:[t.jsx(Y,{size:24}),t.jsx(Qe,{size:26})]})]});case"line":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-[#202732] text-white",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(G,{size:24}),t.jsx("h3",{className:"text-lg font-medium",children:a.partnerName})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Y,{size:20}),t.jsx(X,{size:20})]})]});case"telegram":return t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[#517da2] text-white",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ve,{size:24}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:a.partnerAvatar,alt:"avatar",className:"w-9 h-9 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold leading-tight",children:a.partnerName}),t.jsx("p",{className:"text-[11px] text-gray-200 opacity-80 leading-tight",children:"last seen recently"})]})]})]}),t.jsx(X,{size:22})]});case"tiktok":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black text-white border-b border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(G,{size:24}),t.jsx("div",{className:"text-center",children:t.jsx("h3",{className:"text-sm font-bold",children:a.partnerName})})]}),t.jsx(J,{size:24})]})}},$=()=>{switch(e){case"line":return"bg-[#9BB8DB]";case"telegram":return"bg-[#89a2b5]";case"tiktok":return"bg-black";case"instagram":default:return"bg-white"}},C=(d,x,E="bars")=>E==="line"?t.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[t.jsx("div",{className:`p-1.5 rounded-full ${d?"bg-black/20":"bg-gray-200"}`,children:t.jsx(Q,{size:12,fill:"currentColor"})}),t.jsx("div",{className:"flex-1 h-1 bg-gray-300 rounded-full relative overflow-hidden",children:t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 bg-current opacity-50"})}),t.jsx("span",{className:"text-xs font-medium",children:ce(x)})]}):t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-1 rounded-full ${d?"text-white":"text-black"}`,children:t.jsx(Q,{size:14,fill:"currentColor"})}),t.jsx("div",{className:"flex items-end gap-0.5 h-4",children:[...Array(15)].map((S,O)=>t.jsx("div",{className:`w-0.5 rounded-full ${d?"bg-white/80":"bg-black/40"}`,style:{height:`${Math.max(20,Math.random()*100)}%`}},O))}),t.jsx("span",{className:"text-xs",children:ce(x)})]}),y=d=>{const x=d.isSender;if(e==="instagram"){const E=n===d.id;return t.jsxs("div",{className:`flex w-full mb-3 relative group ${x?"justify-end":"justify-start items-end gap-2"}`,children:[!x&&t.jsx("img",{src:a.partnerAvatar,className:"w-7 h-7 rounded-full object-cover mb-1"}),t.jsxs("div",{className:"relative",children:[E&&t.jsx("div",{className:`reaction-picker absolute -top-14 ${x?"right-0":"left-0"} bg-[#262626] rounded-full px-2 py-1.5 flex gap-1 z-30 shadow-xl animate-in zoom-in duration-200`,children:Xt.map(S=>t.jsx("button",{onClick:()=>p(S),className:"w-8 h-8 flex items-center justify-center text-xl hover:scale-125 transition-transform",children:S},S))}),t.jsxs("div",{onMouseDown:()=>m(d.id),onMouseUp:h,onMouseLeave:h,onTouchStart:()=>m(d.id),onTouchEnd:h,onContextMenu:S=>S.preventDefault(),className:`max-w-60 px-4 py-2.5 text-[15px] leading-snug rounded-3xl relative select-none cursor-pointer transition-transform active:scale-95 ${x?"bg-[#3797f0] text-white rounded-br-md":"bg-[#efefef] text-black rounded-bl-md"}`,children:[d.image?t.jsx("img",{src:d.image,className:"rounded-lg max-w-full"}):d.audioDuration?C(x,d.audioDuration,"bars"):d.text,t.jsx("div",{className:`text-[9px] mt-1 text-right ${x?"text-blue-100/80":"text-gray-400"}`,children:d.timestamp})]}),d.reaction&&t.jsx("div",{className:`absolute -bottom-2 ${x?"-left-1":"-right-1"} bg-white border-2 border-white rounded-full p-0.5 w-[22px] h-[22px] flex items-center justify-center shadow-sm z-10 text-[12px]`,children:d.reaction})]})]},d.id)}if(e==="line")return t.jsxs("div",{className:`flex w-full mb-4 ${x?"justify-end":"justify-start items-start gap-2"}`,children:[!x&&t.jsx("img",{src:a.partnerAvatar,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{className:`flex flex-col ${x?"items-end":"items-start"}`,children:[!x&&t.jsx("span",{className:"text-xs text-gray-600 mb-1 ml-1",children:a.partnerName}),t.jsxs("div",{className:"flex items-end gap-1.5",children:[x&&t.jsxs("div",{className:"flex flex-col items-end text-[10px] text-gray-600 min-w-[30px]",children:[d.isRead&&t.jsx("span",{children:"Read"}),t.jsx("span",{children:d.timestamp})]}),t.jsx("div",{className:`max-w-[220px] px-3 py-2 text-[14px] rounded-2xl shadow-sm relative leading-relaxed wrap-break-words ${x?"bg-[#85E249] text-black after:absolute after:top-2 after:-right-1 after:w-3 after:h-3 after:bg-[#85E249] after:rotate-45":"bg-white text-black after:absolute after:top-2 after:-left-1 after:w-3 after:h-3 after:bg-white after:rotate-45"}`,children:d.image?t.jsx("img",{src:d.image,className:"rounded-lg max-w-full"}):d.audioDuration?C(x,d.audioDuration,"line"):d.text}),!x&&t.jsx("span",{className:"text-[10px] text-gray-600 self-end",children:d.timestamp})]})]})]},d.id);if(e==="telegram")return t.jsxs("div",{className:`flex w-full mb-2 ${x?"justify-end":"justify-start gap-2"}`,children:[!x&&t.jsx("img",{src:a.partnerAvatar,className:"w-8 h-8 rounded-full object-cover self-end mb-1"}),t.jsxs("div",{className:`max-w-[75%] px-3 py-1.5 rounded-lg text-[15px] shadow-sm relative min-w-[60px] ${x?"bg-[#eeffde] text-black":"bg-white text-black"}`,children:[t.jsx("div",{className:"wrap-break-words mb-1",children:d.image?t.jsx("img",{src:d.image,className:"rounded-lg max-w-full"}):d.audioDuration?C(x,d.audioDuration,"line"):d.text}),t.jsxs("div",{className:`text-[11px] flex items-center justify-end gap-1 ${x?"text-[#55a060]":"text-gray-400"}`,children:[t.jsx("span",{children:d.timestamp}),x&&t.jsx("span",{className:"font-bold text-[10px]",children:"âœ“âœ“"})]})]})]},d.id);if(e==="tiktok")return t.jsxs("div",{className:`flex w-full mb-3 ${x?"justify-end":"justify-start items-end gap-2"}`,children:[!x&&t.jsx("img",{src:a.partnerAvatar,className:"w-8 h-8 rounded-full object-cover mb-1"}),t.jsxs("div",{className:`max-w-[70%] px-4 py-2.5 text-[15px] rounded-2xl ${x?"bg-[#2CB6D3] text-white rounded-br-sm":"bg-[#383838] text-white rounded-bl-sm"}`,children:[d.image?t.jsx("img",{src:d.image,className:"rounded-lg max-w-full"}):d.audioDuration?C(x,d.audioDuration,"bars"):d.text,t.jsx("div",{className:`text-[9px] mt-1 text-right ${x?"text-white/70":"text-gray-400"}`,children:d.timestamp})]})]},d.id)},w=()=>{switch(e){case"instagram":return t.jsx("div",{className:"px-4 py-3 bg-white flex items-center gap-3 border-t border-gray-100",children:t.jsxs("div",{className:"bg-[#efefef] flex-1 rounded-full px-4 py-2.5 flex items-center gap-2",children:[t.jsx("div",{className:"bg-blue-500 rounded-full p-1 text-white",children:t.jsx(P,{size:12,fill:"white"})}),t.jsx("span",{className:"text-gray-400 text-sm",children:"Message..."}),t.jsxs("div",{className:"ml-auto flex gap-3 text-gray-500",children:[t.jsx(D,{size:20}),t.jsx(P,{size:20}),t.jsx(H,{size:20})]})]})});case"line":return t.jsxs("div",{className:"px-3 py-2 bg-white flex items-center gap-3",children:[t.jsx(J,{size:24,className:"text-gray-400"}),t.jsx(P,{size:24,className:"text-gray-400"}),t.jsx("div",{className:"flex-1 bg-gray-100 rounded-2xl px-3 py-2 text-sm text-gray-400",children:"Aa"}),t.jsx(D,{size:20,className:"text-gray-400"})]});case"telegram":return t.jsxs("div",{className:"px-2 py-2 bg-white flex items-center gap-2",children:[t.jsx(H,{size:28,className:"text-gray-400 p-1"}),t.jsx("div",{className:"flex-1 text-lg text-gray-400 pl-1",children:"Message"}),t.jsx(P,{size:28,className:"text-gray-400 p-1"}),t.jsx(D,{size:28,className:"text-gray-400 p-1"})]});case"tiktok":return t.jsxs("div",{className:"px-4 py-3 bg-black border-t border-gray-800 flex items-center gap-3",children:[t.jsx("div",{className:"flex-1 bg-[#252525] rounded-full px-4 py-2.5 flex items-center",children:t.jsx("span",{className:"text-gray-500 text-sm",children:"Send a message..."})}),t.jsx("div",{className:"text-gray-400",children:t.jsx(H,{size:24})})]})}},f=e==="line"?"bg-[#202732] text-white":e==="tiktok"?"bg-black text-white":e==="telegram"?"bg-[#517da2] text-white":"bg-white text-black";return t.jsx("div",{className:"w-full flex justify-center py-4 bg-gray-100 min-h-full",children:t.jsxs("div",{ref:i,className:"relative w-[375px] h-[812px] bg-white shadow-2xl overflow-hidden flex flex-col font-sans",style:{fontFamily:e==="line"?"sans-serif":"inherit"},children:[t.jsxs("div",{className:`px-5 py-2 flex justify-between items-end text-sm font-semibold h-11 ${f} z-10`,children:[t.jsx("div",{className:"tracking-wide",children:a.time}),t.jsxs("div",{className:"flex gap-1.5 items-center",children:[t.jsx(Be,{size:16,className:"fill-current"}),t.jsx(et,{size:16}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:"text-xs font-normal",children:[a.batteryLevel,"%"]}),t.jsx(Te,{size:18,className:"fill-current"})]})]})]}),t.jsx("div",{className:"z-10",children:k()}),t.jsx("div",{className:`flex-1 overflow-y-auto no-scrollbar p-4 flex flex-col ${a.backgroundImage?"bg-no-repeat bg-cover bg-center":$()}`,style:a.backgroundImage?{backgroundImage:`url(${a.backgroundImage})`}:{},children:r.map(y)}),t.jsxs("div",{className:"z-10 relative",children:[w(),t.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-32 h-1 rounded-full ${e==="tiktok"||e==="line"?"bg-white/20":"bg-black/20"}`})]})]})})});be.displayName="ChatPreview";const Jt=({settings:e,setSettings:r,messages:a,setMessages:s,platform:i,setPlatform:n,onGenerateAI:l,onDownload:c,onReset:u})=>{const[m,h]=g.useState("text"),[p,k]=g.useState(""),[$,C]=g.useState(10),[y,w]=g.useState(!0),[f,d]=g.useState(null),[x,E]=g.useState(e.time);g.useEffect(()=>{f||E(e.time)},[e.time,f]);const S=()=>{if(!(m==="text"&&!p.trim()))if(f)s(a.map(o=>{if(o.id===f){const v={id:o.id,isSender:y,timestamp:x,isRead:o.isRead,reaction:o.reaction};return o.image,m==="text"?v.text=p:v.audioDuration=$,v}return o})),L();else{const o={id:Date.now().toString(),isSender:y,timestamp:x,isRead:!0};m==="text"?(o.text=p,k("")):o.audioDuration=$,s([...a,o])}},O=o=>{d(o.id),w(o.isSender),E(o.timestamp),o.audioDuration?(h("voice"),C(o.audioDuration),k("")):(h("text"),k(o.text||""))},L=()=>{d(null),k(""),C(10),h("text"),w(!0),E(e.time)},V=(o,v)=>{if(o.target.files&&o.target.files[0]){const M=URL.createObjectURL(o.target.files[0]);if(v==="message")if(f)s(a.map(T=>T.id===f?{id:T.id,isSender:y,image:M,timestamp:x,isRead:T.isRead,reaction:T.reaction}:T)),L();else{const T={id:Date.now().toString(),image:M,isSender:y,timestamp:x,isRead:!0};s([...a,T])}else v==="partner"?r({...e,partnerAvatar:M}):v==="me"?r({...e,myAvatar:M}):v==="background"&&r({...e,backgroundImage:M})}},we=(o,v)=>{o.stopPropagation(),s(a.filter(M=>M.id!==v)),f===v&&L()};return t.jsxs("div",{className:"h-full flex flex-col gap-6 p-4 sm:p-6 overflow-y-auto bg-white border-r border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-linear-to-r from-blue-600 to-purple-600",children:"FakeChat GenAI"}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-full",title:"Reset",children:t.jsx(Oe,{size:18})})})]}),t.jsx("div",{className:"flex p-1 bg-gray-100 rounded-xl",children:Kt.map(o=>t.jsx("button",{onClick:()=>n(o.id),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${i===o.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:o.name},o.id))}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Settings"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Time"}),t.jsx("input",{type:"time",value:e.time,onChange:o=>r({...e,time:o.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Battery %"}),t.jsx("input",{type:"number",min:"1",max:"100",value:e.batteryLevel,onChange:o=>r({...e,batteryLevel:parseInt(o.target.value)}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Partner Name"}),t.jsx("input",{type:"text",value:e.partnerName,onChange:o=>r({...e,partnerName:o.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Partner Avatar"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:e.partnerAvatar,className:"w-10 h-10 rounded-full object-cover border"}),t.jsxs("label",{className:"cursor-pointer bg-gray-50 hover:bg-gray-100 text-gray-600 px-3 py-1.5 rounded-md text-xs border border-gray-200 transition",children:["Change",t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:o=>V(o,"partner")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Chat Background"}),t.jsxs("div",{className:"flex items-center gap-3",children:[e.backgroundImage?t.jsxs("div",{className:"relative w-10 h-10",children:[t.jsx("img",{src:e.backgroundImage,className:"w-full h-full rounded-lg object-cover border"}),t.jsx("button",{onClick:()=>r({...e,backgroundImage:void 0}),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 hover:bg-red-600",children:t.jsx(oe,{size:10})})]}):t.jsx("div",{className:"w-10 h-10 rounded-lg border border-dashed border-gray-300 flex items-center justify-center bg-gray-50",children:t.jsx(P,{size:16,className:"text-gray-400"})}),t.jsxs("label",{className:"cursor-pointer bg-gray-50 hover:bg-gray-100 text-gray-600 px-3 py-1.5 rounded-md text-xs border border-gray-200 transition",children:["Upload",t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:o=>V(o,"background")})]})]})]})]})]}),t.jsx("hr",{className:"border-gray-100"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:f?"Editing Message":"Messages"}),t.jsxs("button",{onClick:l,className:"flex items-center gap-1.5 text-xs font-medium text-purple-600 bg-purple-50 hover:bg-purple-100 px-3 py-1.5 rounded-full transition-colors",children:[t.jsx(Ne,{size:14}),"AI Generate"]})]}),t.jsxs("div",{className:`p-4 rounded-xl border space-y-3 transition-colors ${f?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1 bg-white/50 p-1 rounded-lg flex gap-1 border border-gray-200",children:[t.jsx("button",{onClick:()=>w(!1),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${y?"text-gray-500 hover:bg-gray-100":"bg-white shadow text-gray-900"}`,children:"Them"}),t.jsx("button",{onClick:()=>w(!0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${y?"bg-white shadow text-blue-600":"text-gray-500 hover:bg-gray-100"}`,children:"Me"})]}),t.jsxs("div",{className:"w-24 relative",children:[t.jsx("input",{type:"time",value:x,onChange:o=>E(o.target.value),className:"w-full h-full p-1.5 pl-7 text-xs border border-gray-200 rounded-lg outline-none focus:border-blue-500"}),t.jsx(Ee,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 border-b pb-2 ${f?"border-blue-200":"border-gray-200"}`,children:[t.jsxs("button",{onClick:()=>h("text"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition ${m==="text"?"bg-gray-200 text-gray-900":"text-gray-500 hover:bg-gray-100"}`,children:[t.jsx(Je,{size:14})," Text"]}),t.jsxs("button",{onClick:()=>h("voice"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition ${m==="voice"?"bg-gray-200 text-gray-900":"text-gray-500 hover:bg-gray-100"}`,children:[t.jsx(D,{size:14})," Voice"]})]}),m==="text"?t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{value:p,onChange:o=>k(o.target.value),placeholder:"Type a message...",className:"w-full p-3 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none h-20",onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),S())}}),t.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] text-gray-400",children:[p.length," chars"]})]}):t.jsxs("div",{className:"h-20 flex flex-col justify-center px-2 space-y-2",children:[t.jsx("div",{className:"flex justify-between text-xs text-gray-500",children:t.jsxs("span",{children:["Duration: ",$,"s"]})}),t.jsx("input",{type:"range",min:"1",max:"60",value:$,onChange:o=>C(parseInt(o.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"})]}),t.jsxs("div",{className:"flex justify-between items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer text-gray-500 hover:text-gray-700 p-2",title:"Upload Image",children:[t.jsx($e,{size:18}),t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:o=>V(o,"message")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f&&t.jsx("button",{onClick:L,className:"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium transition",children:"Cancel"}),t.jsxs("button",{onClick:S,disabled:m==="text"&&!p.trim(),className:`${f?"bg-blue-600 hover:bg-blue-700":"bg-black hover:bg-gray-800"} text-white px-4 py-2 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors`,children:[f?t.jsx(Ge,{size:16}):t.jsx(Fe,{size:16}),f?"Update":m==="voice"?"Add Voice":"Add Message"]})]})]})]}),t.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:[a.map(o=>t.jsxs("div",{onClick:()=>O(o),className:`group flex items-center justify-between p-2 rounded-lg border transition cursor-pointer ${f===o.id?"bg-blue-50 border-blue-300 ring-1 ring-blue-300":"hover:bg-gray-50 border-transparent hover:border-gray-100"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${o.isSender?"bg-blue-100 text-blue-700":"bg-gray-200 text-gray-700"}`,children:o.isSender?"Me":"Them"}),t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("p",{className:"text-sm text-gray-600 truncate max-w-[150px]",children:o.image?"ðŸ“· [Image]":o.audioDuration?`ðŸŽ¤ Voice (${o.audioDuration}s)`:o.text}),f===o.id&&t.jsx("span",{className:"text-[10px] text-blue-500 font-medium",children:"Editing..."})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("button",{onClick:v=>we(v,o.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition opacity-0 group-hover:opacity-100",title:"Delete",children:t.jsx(Re,{size:14})})})]},o.id)),a.length===0&&t.jsx("p",{className:"text-center text-xs text-gray-400 py-4",children:"No messages yet."})]})]}),t.jsx("div",{className:"mt-auto pt-6",children:t.jsxs("button",{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2 shadow-lg shadow-blue-200 transition transform active:scale-95",children:[t.jsx(ke,{size:20}),"Download Screenshot"]})})]})},Yt=({isOpen:e,onClose:r,onGenerate:a,isLoading:s})=>{const[i,n]=g.useState(""),[l,c]=g.useState("Casual");if(!e)return null;const u=m=>{m.preventDefault(),i.trim()&&a(i,l)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[t.jsxs("div",{className:"bg-linear-to-r from-purple-600 to-blue-600 p-6 text-white flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[t.jsx(Ke,{size:20}),"AI Script Generator"]}),t.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Powered by Google Gemini"})]}),t.jsx("button",{onClick:r,className:"text-white/80 hover:text-white transition",children:t.jsx(oe,{size:24})})]}),t.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What is the conversation about?"}),t.jsx("textarea",{value:i,onChange:m=>n(m.target.value),placeholder:"e.g., Breaking up over text, planning a surprise party, complaining about work...",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none h-24 resize-none",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tone / Mood"}),t.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[t.jsx("option",{children:"Casual & Funny"}),t.jsx("option",{children:"Romantic"}),t.jsx("option",{children:"Angry / Argument"}),t.jsx("option",{children:"Formal / Business"}),t.jsx("option",{children:"Sad / Emotional"}),t.jsx("option",{children:"Sarcastic"})]})]}),t.jsx("button",{type:"submit",disabled:s||!i.trim(),className:"w-full bg-black text-white py-3 rounded-xl font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition",children:s?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"animate-spin",size:20}),"Generating Magic..."]}):"Generate Script"})]})]})})};var Qt={};const Zt=new Ce({apiKey:Qt.API_KEY}),er=async(e,r,a)=>{const s="gemini-2.5-flash",i=`Generate a realistic chat conversation script in Traditional Chinese (Taiwanese style) between two people.
  Platform style: ${r}.
  Topic: ${e}.
  Mood: ${a}.
  Length: 5-8 messages.
  Include emojis appropriate for the platform.
  Return a JSON array where each item has 'text' (string), 'isSender' (boolean, true for 'Me', false for 'Partner'), and 'timeOffset' (minutes from start).`;try{const n=await Zt.models.generateContent({model:s,contents:i,config:{responseMimeType:"application/json",responseSchema:{type:z.ARRAY,items:{type:z.OBJECT,properties:{text:{type:z.STRING},isSender:{type:z.BOOLEAN},timeOffset:{type:z.INTEGER}},required:["text","isSender","timeOffset"]}}}}),l=JSON.parse(n.text||"[]"),c=new Date;return c.setHours(12,0,0,0),l.map((u,m)=>{const p=new Date(c.getTime()+u.timeOffset*6e4).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return{id:`gen-${Date.now()}-${m}`,text:u.text,isSender:u.isSender,timestamp:p,isRead:!0}})}catch(n){throw console.error("Gemini Generation Error:",n),new Error("Failed to generate conversation.")}},tr=()=>{const[e,r]=g.useState("instagram"),[a,s]=g.useState(le),[i,n]=g.useState(ie),[l,c]=g.useState(!1),[u,m]=g.useState(!1),h=g.useRef(null),p=async()=>{if(h.current)try{const y=await qt(h.current,{pixelRatio:2,skipAutoScale:!0}),w=document.createElement("a");w.download=`fakechat-${e}-${Date.now()}.png`,w.href=y,w.click()}catch(y){console.error("Failed to generate image",y),alert("Could not generate image. Please try again.")}},k=async(y,w)=>{m(!0);try{const f=await er(y,e,w);s(f),c(!1)}catch{alert("AI Generation failed. Please check your API key or try again.")}finally{m(!1)}},$=(y,w)=>{s(f=>f.map(d=>d.id===y?{...d,...w}:d))},C=()=>{confirm("Reset all messages and settings?")&&(s(le),n(ie))};return t.jsxs("div",{className:"flex flex-col lg:flex-row h-screen bg-gray-50 overflow-hidden",children:[t.jsx("div",{className:"w-full lg:w-[450px] lg:shrink-0 h-[50vh] lg:h-full z-20 shadow-xl",children:t.jsx(Jt,{settings:i,setSettings:n,messages:a,setMessages:s,platform:e,setPlatform:r,onGenerateAI:()=>c(!0),onDownload:p,onReset:C})}),t.jsxs("div",{className:"flex-1 h-[50vh] lg:h-full bg-[#f0f2f5] flex items-center justify-center p-4 lg:p-8 overflow-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] bg-size-[16px_16px] opacity-50 pointer-events-none"}),t.jsx(be,{ref:h,platform:e,messages:a,settings:i,onUpdateMessage:$})]}),t.jsx(Yt,{isOpen:l,onClose:()=>c(!1),onGenerate:k,isLoading:u})]})};function ur(){return[{title:"Fake Chat | Carry"},{property:"og:title",content:"Fake Chat"},{name:"description",content:"Fake Chat - Create realistic fake chat screenshots for Instagram, LINE, and Messenger."}]}const xr=je(tr);export{xr as default,ur as meta};
