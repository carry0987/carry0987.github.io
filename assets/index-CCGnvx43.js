import{a as i,o as e,w as le}from"./chunk-WWGJGFF6-CJwpp1BS.js";import{S as ue,g as de,ax as he,P as me,W as xe,aj as fe,ay as we,az as pe,aA as K,G as ye,f as be,u as C,d as ve,e as I,aB as ge,aC as ze,M as J,x as Me,r as Ne,s as Ee,t as Ge,aD as Re,V as Le}from"./three.module-BgmjT5ok.js";import{c as Ae}from"./createLucideIcon-LQgJ85oz.js";import{S as Ie,R as Se,P as je}from"./smartphone-CT37Evd3.js";const Pe=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Oe=Ae("trophy",Pe);var c=(n=>(n.MENU="MENU",n.PLAYING="PLAYING",n.WON="WON",n.GAME_OVER="GAME_OVER",n))(c||{});const o=2,q=.6,Q=.15,$=.96,T=.8,ke=15,M=[[1,1,1,1,1,1,1,1,1,1],[1,2,0,0,1,0,0,0,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,1,1,1,1,0,1,0,1],[1,0,0,0,0,1,0,0,0,1],[1,1,1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1,3,1],[1,1,1,1,1,1,1,1,1,1]],Ce=({gameState:n,onGameStateChange:h,hasPermission:p})=>{const u=i.useRef(null),N=i.useRef(null),H=i.useRef(null),P=i.useRef(null),E=i.useRef(null),v=i.useRef(null),t=i.useRef({x:0,z:0}),a=i.useRef({x:0,y:q,z:0}),A=i.useRef({x:0,z:0}),B=i.useRef(0);return i.useRef({x:0,y:0}),i.useEffect(()=>{if(!u.current)return;const m=new ue;m.background=new de(328965),m.fog=new he(328965,10,50),N.current=m;const y=new me(45,window.innerWidth/window.innerHeight,.1,100);y.position.set(0,20,15),y.lookAt(0,0,0),H.current=y;const d=new xe({antialias:!0,alpha:!1});d.setSize(window.innerWidth,window.innerHeight),d.shadowMap.enabled=!0,d.shadowMap.type=fe,u.current.appendChild(d.domElement),P.current=d;const O=new we(16777215,.3);m.add(O);const l=new pe(16777215,1);l.position.set(10,20,10),l.castShadow=!0,l.shadow.mapSize.width=2048,l.shadow.mapSize.height=2048,m.add(l);const r=new K(65535,2,20);r.position.set(0,5,0),m.add(r);const s=new ye;m.add(s),v.current=s;const w=[];let x={x:0,z:0},G={x:0,z:0};const Y=new be(o,o,o),ee=new C({color:1710638,roughness:.1,metalness:.8,emissive:986925,emissiveIntensity:.2}),te=new ve(M[0].length*o,M.length*o),ne=new C({color:1118481,roughness:.8,metalness:.2}),k=new I(te,ne);k.rotation.x=-Math.PI/2,k.position.y=-o/2,k.receiveShadow=!0,s.add(k);const V=M[0].length*o/2-o/2,U=M.length*o/2-o/2;M.forEach((W,_)=>{W.forEach((R,j)=>{const b=j*o-V,L=_*o-U;if(R===1){const f=new I(Y,ee);f.position.set(b,0,L),f.castShadow=!0,f.receiveShadow=!0,s.add(f);const g=new ge().setFromObject(f);g.expandByScalar(-.1),w.push(g)}else if(R===2){x={x:b,z:L};const f=new ze(.5,1,32),g=new J({color:65280,side:Me}),z=new I(f,g);z.rotation.x=-Math.PI/2,z.position.set(b,-o/2+.05,L),s.add(z)}else if(R===3){G={x:b,z:L};const f=new Ne(.2,.2,100,16),g=new J({color:16711935,transparent:!0,opacity:.3}),z=new I(f,g);z.position.set(b,50,L),s.add(z);const D=new Ee(.8,1,32),ce=new C({color:16711935,emissive:16711935,emissiveIntensity:2}),Z=new I(D,ce);Z.position.set(b,0,L),s.add(Z)}})});const oe=new Ge(q,32,32),re=new C({color:65535,metalness:.9,roughness:.1,emissive:43690,emissiveIntensity:.4}),S=new I(oe,re);S.castShadow=!0,a.current={x:x.x,y:0,z:x.z},S.position.set(x.x,0,x.z);const se=new K(65535,1,8);S.add(se),s.add(S),E.current=S;const ae=()=>{if(n!==c.PLAYING)return;const W=A.current.x,_=A.current.z;t.current.x+=_*Q,t.current.z+=W*Q,t.current.x*=$,t.current.z*=$,t.current.x=Math.max(Math.min(t.current.x,T),-T),t.current.z=Math.max(Math.min(t.current.z,T),-T);let R=a.current.x+t.current.x,j=a.current.z+t.current.z;const b=(f,g)=>{const z=new Re(new Le(f,0,g),q);for(const D of w)if(D.intersectsSphere(z))return!0;return!1};b(R,a.current.z)?(t.current.x*=-.5,R=a.current.x):a.current.x=R,b(a.current.x,j)?(t.current.z*=-.5,j=a.current.z):a.current.z=j,E.current&&(E.current.position.set(a.current.x,0,a.current.z),E.current.rotation.x-=t.current.z*.2,E.current.rotation.z+=t.current.x*.2),Math.sqrt(Math.pow(a.current.x-G.x,2)+Math.pow(a.current.z-G.z,2))<1&&h(c.WON),(Math.abs(a.current.x)>V+5||Math.abs(a.current.z)>U+5)&&(a.current={x:x.x,y:0,z:x.z},t.current={x:0,z:0})},F=()=>{requestAnimationFrame(F),v.current&&(v.current.rotation.x+=(A.current.x*.5-v.current.rotation.x)*.1,v.current.rotation.z+=(-A.current.z*.5-v.current.rotation.z)*.1),ae(),d.render(m,y)},X=()=>{y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",X);const ie=requestAnimationFrame(F);return()=>{window.removeEventListener("resize",X),cancelAnimationFrame(ie),u.current&&u.current.removeChild(d.domElement),d.dispose()}},[n,h]),i.useEffect(()=>{const m=()=>{const l=M[0].length*o/2-o/2,r=M.length*o/2-o/2;let s={x:0,z:0};M.forEach((w,x)=>{w.forEach((G,Y)=>{G===2&&(s={x:Y*o-l,z:x*o-r})})}),a.current={x:s.x,y:0,z:s.z},t.current={x:0,z:0}};n===c.PLAYING&&m();const y=l=>{if(!p)return;let{beta:r,gamma:s}=l;if(r===null||s===null)return;const w=30;r>90&&(r=90),r<-90&&(r=-90);const x=Math.min(Math.max(r/w,-1),1),G=Math.min(Math.max(s/w,-1),1);A.current={x,z:G}},d=l=>{if(!p)return;const r=l.accelerationIncludingGravity;if(!r)return;if(Math.sqrt((r.x||0)**2+(r.y||0)**2+(r.z||0)**2)>ke){const w=Date.now();w-B.current>1e3&&(B.current=w,m())}},O=l=>{if(p)return;const r=l.clientY/window.innerHeight*2-1,s=l.clientX/window.innerWidth*2-1;A.current={x:r,z:s}};return window.addEventListener("deviceorientation",y),window.addEventListener("devicemotion",d),window.addEventListener("mousemove",O),()=>{window.removeEventListener("deviceorientation",y),window.removeEventListener("devicemotion",d),window.removeEventListener("mousemove",O)}},[p,n]),e.jsx("div",{ref:u,className:"absolute inset-0 z-0"})},Te=({gameState:n,onStart:h,onReset:p,needsPermission:u,onRequestPermission:N})=>n===c.PLAYING?e.jsxs("div",{className:"absolute top-4 left-0 right-0 flex justify-between px-6 pointer-events-none z-10",children:[e.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"TILT to Move"}),e.jsx("div",{className:"text-cyan-400 font-mono text-sm opacity-80 bg-black/50 p-2 rounded",children:"SHAKE to Reset"})]}):e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-900 border border-cyan-500 p-8 rounded-2xl shadow-[0_0_30px_rgba(6,182,212,0.3)] text-center max-w-sm w-full mx-4",children:[n===c.WON&&e.jsxs("div",{className:"mb-6 animate-bounce",children:[e.jsx(Oe,{className:"w-16 h-16 text-yellow-400 mx-auto mb-2"}),e.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-linear-to-r from-yellow-300 to-yellow-600",children:"VICTORY!"})]}),n===c.MENU&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-black text-cyan-400 mb-2 tracking-wider drop-shadow-lg",children:"NEON MAZE"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Navigate the ball to the pink beam."})]}),e.jsxs("div",{className:"space-y-4",children:[u&&n===c.MENU?e.jsxs("button",{onClick:N,className:"w-full group flex items-center justify-center gap-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95",children:[e.jsx(Ie,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),"Enable Sensors & Play"]}):e.jsxs("button",{onClick:h,className:"w-full group flex items-center justify-center gap-2 bg-linear-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-95 shadow-lg",children:[n===c.WON?e.jsx(Se,{}):e.jsx(je,{}),n===c.WON?"Play Again":"Start Game"]}),!u&&e.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Desktop: Use mouse to tilt board.",e.jsx("br",{}),"Mobile: Tilt device to move."]})]})]})});function He(){const[n,h]=i.useState(c.MENU),[p,u]=i.useState(!1),[N,H]=i.useState(!1);i.useEffect(()=>{const t=typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function";H(t),t||u(!0)},[]);const P=async()=>{if(N)try{await DeviceOrientationEvent.requestPermission()==="granted"?(u(!0),h(c.PLAYING)):alert("Motion permissions are required to play.")}catch(t){console.error(t),u(!0),h(c.PLAYING)}else u(!0),h(c.PLAYING)},E=()=>{N&&!p?P():h(c.PLAYING)},v=()=>{h(c.PLAYING)};return e.jsxs("div",{className:"relative w-full h-screen overflow-hidden bg-black select-none",children:[e.jsx(Ce,{gameState:n,onGameStateChange:h,hasPermission:p}),e.jsx(Te,{gameState:n,onStart:E,onReset:v,needsPermission:N&&!p,onRequestPermission:P})]})}const qe={fullscreen:!0};function Be(){return[{title:"Neon Gyro Maze | Carry"},{property:"og:title",content:"Neon Gyro Maze"},{name:"description",content:"A neon-themed maze game controlled by tilting your device. Navigate the glowing ball through the maze using your gyroscope."}]}const Ve=le(He);export{Ve as default,qe as handle,Be as meta};
