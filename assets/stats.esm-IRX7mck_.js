class n{name;fg;bg;min=1/0;max=0;round=Math.round;sizeOptions;dom;constructor(i,e,h){this.name=i,this.fg=e,this.bg=h;const t=this.round(window.devicePixelRatio||1);this.sizeOptions={pr:t,width:80*t,height:48*t,textX:3*t,textY:2*t,graphX:3*t,graphY:15*t,graphWidth:74*t,graphHeight:30*t},this.dom=document.createElement("canvas"),this.dom.width=this.sizeOptions.width,this.dom.height=this.sizeOptions.height,this.dom.style.cssText="width:80px;height:48px";const s=this.dom.getContext("2d");if(!s)throw new Error("Unable to get 2d context");s.font=`bold ${9*t}px Helvetica,Arial,sans-serif`,s.textBaseline="top",s.fillStyle=this.bg,s.fillRect(0,0,this.sizeOptions.width,this.sizeOptions.height),s.fillStyle=this.fg,s.fillText(this.name,this.sizeOptions.textX,this.sizeOptions.textY),s.fillRect(this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth,this.sizeOptions.graphHeight),s.fillStyle=this.bg,s.globalAlpha=.9,s.fillRect(this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth,this.sizeOptions.graphHeight)}update(i,e){this.min=Math.min(this.min,i),this.max=Math.max(this.max,i);const h=this.sizeOptions.pr,t=this.dom.getContext("2d");if(!t)throw new Error("Unable to get 2d context");t.fillStyle=this.bg,t.globalAlpha=1,t.fillRect(0,0,this.sizeOptions.width,this.sizeOptions.graphY),t.fillStyle=this.fg,t.fillText(`${this.round(i)} ${this.name} (${this.round(this.min)}-${this.round(this.max)})`,this.sizeOptions.textX,this.sizeOptions.textY),t.drawImage(this.dom,this.sizeOptions.graphX+h,this.sizeOptions.graphY,this.sizeOptions.graphWidth-h,this.sizeOptions.graphHeight,this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth-h,this.sizeOptions.graphHeight),t.fillRect(this.sizeOptions.graphX+this.sizeOptions.graphWidth-h,this.sizeOptions.graphY,h,this.sizeOptions.graphHeight),t.fillStyle=this.bg,t.globalAlpha=.9,t.fillRect(this.sizeOptions.graphX+this.sizeOptions.graphWidth-h,this.sizeOptions.graphY,h,this.round((1-i/e)*this.sizeOptions.graphHeight))}}class o{static version="1.0.1";performanceInfo=self.performance;mode=0;container;beginTime=(this.performanceInfo||Date).now();prevTime=this.beginTime;frames=0;fpsPanel;msPanel;memPanel;constructor(){this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:90000",this.container.addEventListener("click",i=>{i.preventDefault(),this.showPanel(++this.mode%this.container.children.length)},!1),this.fpsPanel=this.addPanel(new n("FPS","#0ff","#002")),this.msPanel=this.addPanel(new n("MS","#0f0","#020")),"memory"in this.performanceInfo&&(this.memPanel=this.addPanel(new n("MB","#f08","#201"))),this.showPanel(0)}begin(){this.beginTime=(this.performanceInfo||Date).now()}end(){this.frames++;const i=(this.performanceInfo||Date).now();if(this.msPanel.update(i-this.beginTime,200),i>=this.prevTime+1e3&&(this.fpsPanel.update(this.frames*1e3/(i-this.prevTime),100),this.prevTime=i,this.frames=0,this.memPanel)){const e=this.performanceInfo.memory;this.memPanel.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return i}update(){this.beginTime=this.end()}get version(){return o.version}get dom(){return this.container}setMode(i){this.showPanel(i)}addPanel(i){return this.container.appendChild(i.dom),i}showPanel(i){for(let e=0;e<this.container.children.length;e++)this.container.children[e].style.display=e===i?"block":"none";this.mode=i}}export{o as S};
