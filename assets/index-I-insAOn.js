import{w as x,r as v,j as r}from"./chunk-JMJ3UQ3L-DTa-kQyz.js";import{S as u}from"./stats.esm-IRX7mck_.js";class f{options;x;y;vx;vy;radius;color;candrod;constructor(t){this.options=t;const{x:s,y:o,r:n,color:i}=t;this.x=s,this.y=o,this.vx=0,this.vy=0,this.radius=n,this.color=i,this.candrod=!0}paint(t){t.beginPath(),t.arc(this.x,this.y,this.radius-1,0,Math.PI*2),t.fillStyle=this.color,t.fill()}run(t,s){const o=t.getContext("2d");if(!o)throw new Error("Canvas context is null");if(!this.candrod)return this.paint(o);const n=12,i=9.8,e=.5,a=.8,h=t.width/20;this.vx+=this.vx>0?-e*s:e*s,this.vy=this.vy+i*s,this.x+=s*this.vx*h,this.y+=s*this.vy*h,(this.y>t.height-n||this.y<n)&&(this.y=this.y<n?n:t.height-n,this.vy=-this.vy*a),(this.x>t.width-n||this.x<n)&&(this.x=this.x<n?n:t.width-n,this.vx=-this.vx*a),this.paint(o)}setSpeed(t,s){this.vx=t,this.vy=s}}class p{balls=[];canvas;animationId=0;clickHandler;stats;constructor(){this.stats=new u,this.stats.setMode(0),this.renderStats(),this.init(),this.animate(),this.setListener()}renderStats(){this.stats.dom.style.position="absolute",this.stats.dom.style.left="unset",this.stats.dom.style.right="0",this.stats.dom.style.top="0",document.body.appendChild(this.stats.dom)}init(){const t=document.querySelector("#cas");if(!t)throw new Error("Canvas element not found");t.width=window.innerWidth,t.height=window.innerHeight,this.canvas=t;const s=12;for(let o=0;o<100;o++){let n=new f({x:this.getRandom(s,t.width-s),y:this.getRandom(s,t.height-s),r:s,color:`rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 1)`});this.balls.push(n)}}RAF=(window.requestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}).bind(window);animate=()=>{if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas,s=t.getContext("2d");if(!s)throw new Error("Canvas context is null");s.clearRect(0,0,t.width,t.height),s.save(),s.fillStyle="rgba(255,255,255,0.2)",s.fillRect(0,0,t.width,t.height),s.restore();let o=16/1e3;this.collision(),this.balls.forEach(n=>{n.run(t,o)}),this.stats.update(),this.animationId=this.RAF(this.animate)};collision(){const t=this.balls,s=.8;for(let o=0;o<t.length;o++)for(let n=0;n<t.length;n++){let i=t[o],e=t[n];if(i!==e){let a=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));if(Math.ceil(a)<i.radius+e.radius+2){let h=((i.vx-e.vx)*Math.pow(i.x-e.x,2)+(i.vy-e.vy)*(i.x-e.x)*(i.y-e.y))/Math.pow(a,2),c=((i.vy-e.vy)*Math.pow(i.y-e.y,2)+(i.vx-e.vx)*(i.x-e.x)+(i.y-e.y))/Math.pow(a,2);i.vx=(i.vx-h)*s,i.vy=(i.vy-c)*s,e.vx=(e.vx+h)*s,e.vy=(e.vy+c)*s;let d=(i.radius+e.radius+2-a)/2,m=d*(i.x-e.x)/a,y=d*(i.y-e.y)/a;i.x=i.x+m,i.y=i.y+y,e.x=e.x-m,e.y=e.y-y}}}}setListener(){if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas;this.clickHandler=s=>{let o=s.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-t.offsetLeft,n=s.clientY+document.body.scrollTop+document.documentElement.scrollTop-t.offsetTop;this.balls.forEach(function(i){i.vx=(o-i.x)/40,i.vy=(n-i.y)/40})},t.addEventListener("click",this.clickHandler)}dispose(){this.animationId&&cancelAnimationFrame(this.animationId),this.stats.dom&&this.stats.dom.parentNode&&this.stats.dom.parentNode.removeChild(this.stats.dom),this.canvas&&this.clickHandler&&this.canvas.removeEventListener("click",this.clickHandler)}getRandom(t,s){return Math.random()*(s-t)+t}}function b(){return[{title:"Shotball"},{property:"og:title",content:"Shotball"},{name:"description",content:"Use Canvas to creat gravity core"}]}const E={fullscreen:!0},M=x(function(){return v.useEffect(()=>{const t=o=>{o.preventDefault()};document.body.addEventListener("contextmenu",t);const s=new p;return()=>{document.body.removeEventListener("contextmenu",t),s.dispose()}},[]),r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"tips",children:"Left click to create a gravity point"}),r.jsx("canvas",{id:"cas",className:"bg-[#0A3136]"})]})});export{M as default,E as handle,b as meta};
