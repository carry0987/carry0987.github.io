import{a as c,R as H,p as e,w as ue}from"./chunk-FGUA77HG-BxeL2Wrr.js";import{u as C,e as me,a as Q,_ as q,v as fe,b as F,M as pe,C as he}from"./constants-j8IvHXVs.js";import{V as B,a as xe,j as ge,k as ie,l as be,m as ye,e as we,g as D,n as ve,H as je,L as ee,D as Me,o as Se,p as V,q as X,f as Ne,r as ke,s as Re,t as _e,u as T,d as Ie,v as le,w as ce,x as Ce}from"./three.module-BciEV48b.js";import{s as Pe,E as Te}from"./Environment-DqAx_Oog.js";var w=(r=>(r.None="None",r.Road="Road",r.Residential="Residential",r.Commercial="Commercial",r.Industrial="Industrial",r.Park="Park",r))(w||{});const P=15,Ee=2e3,Ge=1e6,U={[w.None]:{type:w.None,cost:0,name:"Bulldoze",description:"Clear a tile",color:"#ef4444",popGen:0,incomeGen:0},[w.Road]:{type:w.Road,cost:10,name:"Road",description:"Connects buildings.",color:"#374151",popGen:0,incomeGen:0},[w.Residential]:{type:w.Residential,cost:100,name:"House",description:"+5 Pop/day",color:"#f87171",popGen:5,incomeGen:0},[w.Commercial]:{type:w.Commercial,cost:200,name:"Shop",description:"+$15/day",color:"#60a5fa",popGen:0,incomeGen:15},[w.Industrial]:{type:w.Industrial,cost:400,name:"Factory",description:"+$40/day",color:"#facc15",popGen:0,incomeGen:40},[w.Park]:{type:w.Park,cost:50,name:"Park",description:"Looks nice.",color:"#4ade80",popGen:1,incomeGen:0}};function ze(r,a=Math.PI/3){const n=Math.cos(a),i=(1+1e-10)*100,t=[new B,new B,new B],o=new B,s=new B,l=new B,m=new B;function d(v){const y=~~(v.x*i),b=~~(v.y*i),p=~~(v.z*i);return`${y},${b},${p}`}const f=r.index?r.toNonIndexed():r,x=f.attributes.position,h={};for(let v=0,y=x.count/3;v<y;v++){const b=3*v,p=t[0].fromBufferAttribute(x,b+0),g=t[1].fromBufferAttribute(x,b+1),S=t[2].fromBufferAttribute(x,b+2);o.subVectors(S,g),s.subVectors(p,g);const j=new B().crossVectors(o,s).normalize();for(let k=0;k<3;k++){const _=t[k],I=d(_);I in h||(h[I]=[]),h[I].push(j)}}const u=new Float32Array(x.count*3),M=new xe(u,3,!1);for(let v=0,y=x.count/3;v<y;v++){const b=3*v,p=t[0].fromBufferAttribute(x,b+0),g=t[1].fromBufferAttribute(x,b+1),S=t[2].fromBufferAttribute(x,b+2);o.subVectors(S,g),s.subVectors(p,g),l.crossVectors(o,s).normalize();for(let j=0;j<3;j++){const k=t[j],_=d(k),I=h[_];m.set(0,0,0);for(let G=0,z=I.length;G<z;G++){const R=I[G];l.dot(R)>n&&m.add(R)}m.normalize(),M.setXYZ(b+j,m.x,m.y,m.z)}}return f.setAttribute("normal",M),f}const te=Pe({screenspace:!1,color:new D("black"),opacity:1,thickness:.05,size:new ie},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   #include <clipping_planes_pars_vertex>
   uniform float thickness;
   uniform bool screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     #include <clipping_planes_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   #include <clipping_planes_pars_fragment>
   void main(){
     #include <clipping_planes_fragment>
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${fe>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function Be({color:r="black",opacity:a=1,transparent:n=!1,screenspace:i=!1,toneMapped:t=!0,polygonOffset:o=!1,polygonOffsetFactor:s=0,renderOrder:l=0,thickness:m=.05,angle:d=Math.PI,clippingPlanes:f,...x}){const h=c.useRef(null),[u]=c.useState(()=>new te({side:ge})),{gl:M}=C(),v=M.getDrawingBufferSize(new ie);c.useMemo(()=>me({OutlinesMaterial:te}),[]);const y=c.useRef(0),b=c.useRef(null);return c.useLayoutEffect(()=>{const p=h.current;if(!p)return;const g=p.parent;if(g&&g.geometry&&(y.current!==d||b.current!==g.geometry)){var S;y.current=d,b.current=g.geometry;let j=(S=p.children)==null?void 0:S[0];j&&(d&&j.geometry.dispose(),p.remove(j)),g.skeleton?(j=new be,j.material=u,j.bind(g.skeleton,g.bindMatrix),p.add(j)):g.isInstancedMesh?(j=new ye(g.geometry,u,g.count),j.instanceMatrix=g.instanceMatrix,p.add(j)):(j=new we,j.material=u,p.add(j)),j.geometry=d?ze(g.geometry,d):g.geometry,j.morphTargetInfluences=g.morphTargetInfluences,j.morphTargetDictionary=g.morphTargetDictionary}}),c.useLayoutEffect(()=>{const p=h.current;if(!p)return;const g=p.children[0];if(g){g.renderOrder=l;const S=p.parent;Q(g,{morphTargetInfluences:S.morphTargetInfluences,morphTargetDictionary:S.morphTargetDictionary}),Q(g.material,{transparent:n,thickness:m,color:r,opacity:a,size:v,screenspace:i,toneMapped:t,polygonOffset:o,polygonOffsetFactor:s,clippingPlanes:f,clipping:f&&f.length>0})}}),c.useEffect(()=>()=>{const p=h.current;if(!p)return;const g=p.children[0];g&&(d&&g.geometry.dispose(),p.remove(g))},[]),c.createElement("group",q({ref:h},x))}function Ae(r,a,n){const i=C(u=>u.size),t=C(u=>u.viewport),o=typeof r=="number"?r:i.width*t.dpr,s=i.height*t.dpr,l=(typeof r=="number"?n:r)||{},{samples:m=0,depth:d,...f}=l,x=d??l.depthBuffer,h=c.useMemo(()=>{const u=new ve(o,s,{minFilter:ee,magFilter:ee,type:je,...f});return x&&(u.depthTexture=new Me(o,s,Se)),u.samples=m,u},[]);return c.useLayoutEffect(()=>{h.setSize(o,s),m&&(h.samples=m)},[m,h,o,s]),c.useEffect(()=>()=>h.dispose(),[]),h}const Fe=r=>typeof r=="function",De=c.forwardRef(({envMap:r,resolution:a=256,frames:n=1/0,children:i,makeDefault:t,...o},s)=>{const l=C(({set:y})=>y),m=C(({camera:y})=>y),d=C(({size:y})=>y),f=c.useRef(null);c.useImperativeHandle(s,()=>f.current,[]);const x=c.useRef(null),h=Ae(a);c.useLayoutEffect(()=>{o.manual||f.current.updateProjectionMatrix()},[d,o]),c.useLayoutEffect(()=>{f.current.updateProjectionMatrix()}),c.useLayoutEffect(()=>{if(t){const y=m;return l(()=>({camera:f.current})),()=>l(()=>({camera:y}))}},[f,t,l]);let u=0,M=null;const v=Fe(i);return F(y=>{v&&(n===1/0||u<n)&&(x.current.visible=!1,y.gl.setRenderTarget(h),M=y.scene.background,r&&(y.scene.background=r),y.gl.render(y.scene,f.current),y.scene.background=M,y.gl.setRenderTarget(null),x.current.visible=!0,u++)}),c.createElement(c.Fragment,null,c.createElement("orthographicCamera",q({left:d.width/-2,right:d.width/2,top:d.height/2,bottom:d.height/-2,ref:f},o),!v&&i),c.createElement("group",{ref:x},v&&i(h.texture)))}),Oe=c.forwardRef((r={enableDamping:!0},a)=>{const{domElement:n,camera:i,makeDefault:t,onChange:o,onStart:s,onEnd:l,...m}=r,d=C(p=>p.invalidate),f=C(p=>p.camera),x=C(p=>p.gl),h=C(p=>p.events),u=C(p=>p.set),M=C(p=>p.get),v=n||h.connected||x.domElement,y=i||f,b=c.useMemo(()=>new pe(y),[y]);return c.useEffect(()=>{b.connect(v);const p=g=>{d(),o&&o(g)};return b.addEventListener("change",p),s&&b.addEventListener("start",s),l&&b.addEventListener("end",l),()=>{b.dispose(),b.removeEventListener("change",p),s&&b.removeEventListener("start",s),l&&b.removeEventListener("end",l)}},[o,s,l,b,d,v]),c.useEffect(()=>{if(t){const p=M().controls;return u({controls:b}),()=>u({controls:p})}},[t,b]),F(()=>b.update(),-1),c.createElement("primitive",q({ref:a,object:b,enableDamping:!0},m))}),Le=({focus:r=0,size:a=25,samples:n=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${a})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${r});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${n}; i ++) {
    offset = (vogelDiskSample(j, ${n}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${n}; i++) {
    vogelSample = vogelDiskSample(j, ${n}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${a}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${n}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function oe(r,a,n){a.traverse(i=>{i.material&&(r.properties.remove(i.material),i.material.dispose==null||i.material.dispose())}),r.info.programs.length=0,r.compile(a,n)}function $e({focus:r=0,samples:a=10,size:n=25}){const i=C(s=>s.gl),t=C(s=>s.scene),o=C(s=>s.camera);return c.useEffect(()=>{const s=V.shadowmap_pars_fragment;return V.shadowmap_pars_fragment=V.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+Le({size:n,samples:a,focus:r})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),oe(i,t,o),()=>{V.shadowmap_pars_fragment=s,oe(i,t,o)}},[r,n,a]),null}const Ue=c.forwardRef(({children:r,enabled:a=!0,speed:n=1,rotationIntensity:i=1,floatIntensity:t=1,floatingRange:o=[-.1,.1],autoInvalidate:s=!1,...l},m)=>{const d=c.useRef(null);c.useImperativeHandle(m,()=>d.current,[]);const f=c.useRef(Math.random()*1e4);return F(x=>{var h,u;if(!a||n===0)return;s&&x.invalidate();const M=f.current+x.clock.elapsedTime;d.current.rotation.x=Math.cos(M/4*n)/8*i,d.current.rotation.y=Math.sin(M/4*n)/8*i,d.current.rotation.z=Math.sin(M/4*n)/20*i;let v=Math.sin(M/4*n)/10;v=X.mapLinear(v,-.1,.1,(h=o?.[0])!==null&&h!==void 0?h:-.1,(u=o?.[1])!==null&&u!==void 0?u:.1),d.current.position.y=v*t,d.current.updateMatrix()}),c.createElement("group",l,c.createElement("group",{ref:d,matrixAutoUpdate:!1},r))}),re=P/2-.5,L=(r,a)=>[r-re,0,a-re],$=(r,a)=>Math.abs(Math.sin(r*12.9898+a*78.233)*43758.5453)%1,E=(r,a)=>Math.random()*(a-r)+r,N=new Ne(1,1,1),O=new ke(1,1,1,8),Y=new Re(1,1,4),de=new _e(1,8,8),A=H.memo(({position:r,scale:a})=>e.jsx("mesh",{geometry:N,position:r,scale:a,children:e.jsx("meshStandardMaterial",{color:"#bfdbfe",emissive:"#bfdbfe",emissiveIntensity:.2,roughness:.1,metalness:.8})})),He=({position:r})=>{const a=c.useRef(null);return F(n=>{a.current&&a.current.children.forEach((i,t)=>{const o=i;o.position.y+=.01+t*.005,o.scale.addScalar(.005);const s=o.material;s&&(s.opacity-=.005,o.position.y>1.5&&(o.position.y=0,o.scale.setScalar(.1+Math.random()*.1),s.opacity=.6))})}),e.jsxs("group",{position:r,children:[e.jsx("mesh",{geometry:O,castShadow:!0,receiveShadow:!0,position:[0,.5,0],scale:[.2,1,.2],children:e.jsx("meshStandardMaterial",{color:"#4b5563"})}),e.jsx("group",{ref:a,position:[0,1,0],children:[0,1,2].map(n=>e.jsx("mesh",{geometry:de,position:[Math.random()*.1,n*.4,Math.random()*.1],scale:.2,children:e.jsx("meshStandardMaterial",{color:"#d1d5db",transparent:!0,opacity:.6,flatShading:!0})},n))})]})},ne=H.memo(({type:r,baseColor:a,x:n,y:i,opacity:t=1,transparent:o=!1})=>{const s=$(n,i),l=Math.floor(s*100),m=Math.floor(s*4)*(Math.PI/2),d=c.useMemo(()=>{const v=new D(a);return v.offsetHSL(s*.1-.05,0,s*.2-.1),v},[a,s]),f=c.useMemo(()=>new T({color:d,flatShading:!0,opacity:t,transparent:o,roughness:.8}),[d,t,o]),x=c.useMemo(()=>new T({color:new D(d).multiplyScalar(.7),flatShading:!0,opacity:t,transparent:o}),[d,t,o]),h=c.useMemo(()=>new T({color:new D(d).multiplyScalar(.5).offsetHSL(0,0,-.1),flatShading:!0,opacity:t,transparent:o}),[d,t,o]),u={castShadow:!0,receiveShadow:!0},M=-.3;return e.jsx("group",{rotation:[0,m,0],position:[0,M,0],children:(()=>{switch(r){case w.Residential:return l<33?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[0,.3,0],scale:[.7,.6,.6]}),e.jsx("mesh",{...u,material:h,geometry:Y,position:[0,.75,0],scale:[.6,.4,.6],rotation:[0,Math.PI/4,0]}),e.jsx(A,{position:[.2,.3,.31],scale:[.15,.2,.05]}),e.jsx(A,{position:[-.2,.3,.31],scale:[.15,.2,.05]}),e.jsx("mesh",{...u,material:x,geometry:N,position:[0,.1,.32],scale:[.15,.2,.05]})]}):l<66?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[-.1,.35,0],scale:[.6,.7,.8]}),e.jsx("mesh",{...u,material:x,geometry:N,position:[.25,.25,.1],scale:[.4,.5,.6]}),e.jsx(A,{position:[-.1,.5,.41],scale:[.4,.2,.05]})]}):e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[0,.5,0],scale:[.5,1,.6]}),e.jsx("mesh",{...u,material:h,geometry:N,position:[0,1.05,0],scale:[.55,.1,.65]}),e.jsx(A,{position:[0,.7,.31],scale:[.3,.2,.05]}),e.jsx(A,{position:[0,.3,.31],scale:[.3,.2,.05]})]});case w.Commercial:if(l<40){const b=1.5+s*1.5;return e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[0,b/2,0],scale:[.7,b,.7]}),Array.from({length:Math.floor(b*3)}).map((p,g)=>e.jsx(A,{position:[0,.2+g*.3,0],scale:[.72,.15,.72]},g)),e.jsx("mesh",{...u,material:x,geometry:N,position:[0,b+.1,0],scale:[.5,.2,.5]})]})}else return l<70?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[0,.4,0],scale:[.9,.8,.8]}),e.jsx(A,{position:[0,.3,.41],scale:[.8,.4,.05]}),e.jsx("mesh",{...u,material:new T({color:s>.5?"#ef4444":"#3b82f6"}),geometry:N,position:[0,.55,.5],scale:[.9,.1,.2],rotation:[Math.PI/6,0,0]})]}):e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[-.2,.5,-.2],scale:[.5,1,.5]}),e.jsx("mesh",{...u,material:x,geometry:N,position:[.1,.3,.1],scale:[.7,.6,.7]}),e.jsx(A,{position:[.1,.3,.46],scale:[.6,.3,.05]}),e.jsx("mesh",{...u,material:new T({color:"#9ca3af"}),geometry:N,position:[.2,.65,.2],scale:[.2,.1,.2]})]});case w.Industrial:return l<50?e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[0,.4,0],scale:[.9,.8,.8]}),e.jsx("mesh",{...u,material:h,geometry:N,position:[-.2,.9,0],scale:[.4,.2,.8],rotation:[0,0,Math.PI/4]}),e.jsx("mesh",{...u,material:h,geometry:N,position:[.2,.9,0],scale:[.4,.2,.8],rotation:[0,0,Math.PI/4]}),e.jsx(He,{position:[.3,.4,.3]})]}):e.jsxs(e.Fragment,{children:[e.jsx("mesh",{...u,material:f,geometry:N,position:[-.2,.3,0],scale:[.5,.6,.9]}),e.jsx("mesh",{...u,material:x,geometry:O,position:[.25,.4,-.2],scale:[.2,.8,.2]}),e.jsx("mesh",{...u,material:x,geometry:O,position:[.25,.4,.25],scale:[.2,.8,.2]}),e.jsx("mesh",{...u,material:new T({color:"#6b7280"}),geometry:N,position:[.25,.7,0],scale:[.05,.05,.5]})]});case w.Park:const v=1+Math.floor(s*3),y=[[-.2,-.2],[.2,.2],[-.2,.2],[.2,-.2]];return e.jsxs("group",{position:[0,-M-.29,0],children:[" ",e.jsxs("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,0],position:[0,.01,0],children:[e.jsx("planeGeometry",{args:[.9,.9]}),e.jsx("meshStandardMaterial",{color:"#86efac"})]}),l<30&&e.jsxs("group",{position:[0,.05,0],children:[e.jsx("mesh",{material:new T({color:"#cbd5e1"}),geometry:O,scale:[.4,.1,.4],castShadow:!0,receiveShadow:!0}),e.jsx("mesh",{material:new T({color:"#3b82f6",roughness:.1}),geometry:O,position:[0,.06,0],scale:[.3,.05,.3]})]}),Array.from({length:v}).map((b,p)=>{const g=y[p%y.length],S=.5+$(n+p,i-p)*.5,j=new D("#166534").offsetHSL(0,0,$(n,i+p)*.2);return e.jsxs("group",{position:[g[0],0,g[1]],scale:S,rotation:[0,$(p,n)*Math.PI,0],children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new T({color:"#78350f"}),geometry:O,position:[0,.15,0],scale:[.1,.3,.1]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new T({color:j,flatShading:!0}),geometry:Y,position:[0,.4,0],scale:[.4,.5,.4]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:new T({color:j,flatShading:!0}),geometry:Y,position:[0,.65,0],scale:[.3,.4,.3]})]},p)})]});case w.Road:return null;default:return null}})()})}),se=["#ef4444","#3b82f6","#eab308","#ffffff","#1f2937","#f97316"],Ve=({grid:r})=>{const a=c.useMemo(()=>{const s=[];return r.forEach(l=>l.forEach(m=>{m.buildingType===w.Road&&s.push({x:m.x,y:m.y})})),s},[r]),n=Math.min(a.length,30),i=c.useRef(null),t=c.useRef(new Float32Array(0)),o=c.useMemo(()=>new le,[]);return c.useMemo(()=>new Float32Array(0),[]),c.useEffect(()=>{if(a.length<2)return;t.current=new Float32Array(n*6);const s=new Float32Array(n*3);for(let l=0;l<n;l++){const m=a[Math.floor(Math.random()*a.length)];t.current[l*6+0]=m.x,t.current[l*6+1]=m.y,t.current[l*6+2]=m.x,t.current[l*6+3]=m.y,t.current[l*6+4]=1,t.current[l*6+5]=E(.01,.03);const d=new D(se[Math.floor(Math.random()*se.length)]);s[l*3]=d.r,s[l*3+1]=d.g,s[l*3+2]=d.b}i.current&&(i.current.instanceColor=new ce(s,3))},[a,n]),F(()=>{if(!(!i.current||a.length<2||t.current.length===0)){for(let s=0;s<n;s++){const l=s*6;let m=t.current[l],d=t.current[l+1],f=t.current[l+2],x=t.current[l+3],h=t.current[l+4];const u=t.current[l+5];if(h+=u,h>=1){m=f,d=x,h=0;const z=a.filter(R=>Math.abs(R.x-m)===1&&R.y===d||Math.abs(R.y-d)===1&&R.x===m);if(z.length>0){const R=z.length>1?z.filter(J=>Math.abs(J.x-t.current[l])>.1||Math.abs(J.y-t.current[l+1])>.1):z,K=R.length>0?R[Math.floor(Math.random()*R.length)]:z[0];f=K.x,x=K.y}else{const R=a[Math.floor(Math.random()*a.length)];m=R.x,d=R.y,f=R.x,x=R.y}}t.current[l]=m,t.current[l+1]=d,t.current[l+2]=f,t.current[l+3]=x,t.current[l+4]=h;const M=X.lerp(m,f,h),v=X.lerp(d,x,h),y=f-m,b=x-d,p=Math.atan2(b,y),g=.15,S=Math.sqrt(y*y+b*b)||1,j=-b/S*g,k=y/S*g,[_,I,G]=L(M+j,v+k);o.position.set(_,-.3+.075,G),o.rotation.set(0,-p,0),o.scale.set(.5,.15,.3),o.updateMatrix(),i.current.setMatrixAt(s,o.matrix)}i.current.instanceMatrix.needsUpdate=!0}}),a.length<2?null:e.jsx("instancedMesh",{ref:i,args:[N,void 0,n],castShadow:!0,children:e.jsx("meshStandardMaterial",{roughness:.5,metalness:.3})})},ae=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#ffffff"],Ye=({population:r,grid:a})=>{const n=Math.min(Math.floor(r/2),300),i=c.useRef(null),t=c.useMemo(()=>{const l=[];return a.forEach(m=>m.forEach(d=>{(d.buildingType===w.Road||d.buildingType===w.Park||d.buildingType===w.None)&&l.push({x:d.x,y:d.y})})),l},[a]),o=c.useRef(new Float32Array(0)),s=c.useMemo(()=>new le,[]);return c.useEffect(()=>{if(n===0||t.length===0)return;o.current=new Float32Array(n*6);const l=new Float32Array(n*3);for(let m=0;m<n;m++){const d=t[Math.floor(Math.random()*t.length)],f=d.x+E(-.4,.4),x=d.y+E(-.4,.4);o.current[m*6+0]=f,o.current[m*6+1]=x;const h=t[Math.floor(Math.random()*t.length)];o.current[m*6+2]=h.x+E(-.4,.4),o.current[m*6+3]=h.y+E(-.4,.4),o.current[m*6+4]=E(.005,.015),o.current[m*6+5]=Math.random()*Math.PI*2;const u=new D(ae[Math.floor(Math.random()*ae.length)]);l[m*3]=u.r,l[m*3+1]=u.g,l[m*3+2]=u.b}i.current&&(i.current.instanceColor=new ce(l,3))},[n,t]),F(l=>{if(!i.current||n===0||o.current.length===0)return;const m=l.clock.elapsedTime;for(let d=0;d<n;d++){const f=d*6;let x=o.current[f],h=o.current[f+1],u=o.current[f+2],M=o.current[f+3];const v=o.current[f+4],y=o.current[f+5],b=u-x,p=M-h,g=Math.sqrt(b*b+p*p);if(g<.1){if(t.length>0){const R=t[Math.floor(Math.random()*t.length)];u=R.x+E(-.4,.4),M=R.y+E(-.4,.4),o.current[f+2]=u,o.current[f+3]=M}}else x+=b/g*v,h+=p/g*v,o.current[f]=x,o.current[f+1]=h;const[S,j,k]=L(x,h),_=Math.abs(Math.sin(m*10+y))*.03,I=.2,G=.08;s.position.set(S,-.35+I/2+_,k),s.rotation.set(0,-Math.atan2(p,b),0),s.scale.set(G,I,G),s.updateMatrix(),i.current.setMatrixAt(d,s.matrix)}i.current.instanceMatrix.needsUpdate=!0}),n===0?null:e.jsx("instancedMesh",{ref:i,args:[N,void 0,n],castShadow:!0,children:e.jsx("meshStandardMaterial",{roughness:.8})})},W=({position:r,scale:a,speed:n})=>{const i=c.useRef(null);F((o,s)=>{i.current&&(i.current.position.x+=n*s,i.current.position.x>P*1.5&&(i.current.position.x=-P*1.5))});const t=c.useMemo(()=>Array.from({length:5+Math.random()*5}).map(()=>({pos:[E(-1,1),E(-.5,.5),E(-1,1)],scale:E(.5,1.2)})),[]);return e.jsx("group",{ref:i,position:r,scale:a,children:t.map((o,s)=>e.jsx("mesh",{geometry:de,position:o.pos,scale:o.scale,castShadow:!0,children:e.jsx("meshStandardMaterial",{color:"white",flatShading:!0,opacity:.9,transparent:!0})},s))})},Z=({position:r,speed:a,offset:n})=>{const i=c.useRef(null);return F(t=>{if(i.current){const o=t.clock.elapsedTime+n;i.current.position.x=r[0]+Math.sin(o*a)*P,i.current.position.z=r[1]+Math.cos(o*a)*P/2,i.current.rotation.y=-o*a+Math.PI,i.current.scale.y=1+Math.sin(o*15)*.3}}),e.jsxs("group",{ref:i,position:[r[0],r[2],r[1]],children:[e.jsx("mesh",{geometry:N,scale:[.2,.05,.05],position:[.1,0,0],rotation:[0,Math.PI/4,0],children:e.jsx("meshBasicMaterial",{color:"#333"})}),e.jsx("mesh",{geometry:N,scale:[.2,.05,.05],position:[-.1,0,0],rotation:[0,-Math.PI/4,0],children:e.jsx("meshBasicMaterial",{color:"#333"})})]})},We=()=>e.jsxs("group",{raycast:()=>null,children:[e.jsx(W,{position:[-12,8,4],scale:1.5,speed:.3}),e.jsx(W,{position:[5,9,-8],scale:1.2,speed:.5}),e.jsx(W,{position:[15,7,10],scale:1.8,speed:.2}),e.jsxs("group",{position:[0,0,0],scale:.8,children:[e.jsx(Z,{position:[0,0,10],speed:.6,offset:0}),e.jsx(Z,{position:[0,0,10],speed:.6,offset:1.2}),e.jsx(Z,{position:[0,0,10],speed:.6,offset:2.5})]}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.6,0],receiveShadow:!0,children:[e.jsx("planeGeometry",{args:[P*4,P*4]}),e.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.1,metalness:.5,opacity:.8,transparent:!0})]})]}),Ze=H.memo(({x:r,y:a,grid:n,yOffset:i})=>{const t=c.useMemo(()=>new T({color:"#fbbf24"}),[]),o=c.useMemo(()=>new Ie(.1,.5),[]),s=a>0&&n[a-1][r].buildingType===w.Road,l=a<P-1&&n[a+1][r].buildingType===w.Road,m=r>0&&n[a][r-1].buildingType===w.Road,d=r<P-1&&n[a][r+1].buildingType===w.Road;return[s,l,m,d].filter(Boolean).length===0?e.jsx("mesh",{rotation:[-Math.PI/2,0,0],position:[0,i,0],geometry:o,material:t}):e.jsxs("group",{rotation:[-Math.PI/2,0,0],position:[0,i,0],children:[(s||l)&&(m||d)&&e.jsx("mesh",{position:[0,0,.005],material:t,children:e.jsx("planeGeometry",{args:[.12,.12]})}),s&&e.jsx("mesh",{position:[0,.25,0],geometry:o,material:t}),l&&e.jsx("mesh",{position:[0,-.25,0],geometry:o,material:t}),m&&e.jsx("mesh",{position:[-.25,0,0],rotation:[0,0,Math.PI/2],geometry:o,material:t}),d&&e.jsx("mesh",{position:[.25,0,0],rotation:[0,0,Math.PI/2],geometry:o,material:t})]})}),Xe=H.memo(({type:r,x:a,y:n,grid:i,onHover:t,onLeave:o,onClick:s})=>{const[l,m,d]=L(a,n);let f="#10b981",x=-.3,h=.5;if(r===w.None){const M=$(a,n);f=M>.7?"#059669":M>.3?"#10b981":"#34d399",x=-.3-M*.1}else r===w.Road?(f="#374151",x=-.29):(f="#d1d5db",x=-.28);const u=x-h/2;return e.jsxs("mesh",{position:[l,u,d],receiveShadow:!0,castShadow:!0,onPointerEnter:M=>{M.stopPropagation(),t(a,n)},onPointerOut:M=>{M.stopPropagation(),o()},onPointerDown:M=>{M.stopPropagation(),M.button===0&&s(a,n)},children:[e.jsx("boxGeometry",{args:[1,h,1]}),e.jsx("meshStandardMaterial",{color:f,flatShading:!0,roughness:1}),r===w.Road&&e.jsx(Ze,{x:a,y:n,grid:i,yOffset:h/2+.001})]})}),qe=({x:r,y:a,color:n})=>{const[i,t,o]=L(r,a);return e.jsxs("mesh",{position:[i,-.25,o],rotation:[-Math.PI/2,0,0],raycast:()=>null,children:[e.jsx("planeGeometry",{args:[1,1]}),e.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:.4,side:Ce,depthTest:!1}),e.jsx(Be,{thickness:.05,color:"white"})]})},Ke=({grid:r,onTileClick:a,hoveredTool:n,population:i})=>{const[t,o]=c.useState(null),s=c.useCallback((h,u)=>{o({x:h,y:u})},[]),l=c.useCallback(()=>{o(null)},[]),m=t&&r[t.y][t.x].buildingType===w.None&&n!==w.None,d=m?U[n].color:"white",f=n===w.None,x=t?L(t.x,t.y):[0,0,0];return e.jsx("div",{className:"absolute inset-0 bg-sky-900 touch-none",children:e.jsxs(he,{shadows:!0,dpr:[1,1.5],gl:{antialias:!0},children:[e.jsx(De,{makeDefault:!0,zoom:45,position:[20,20,20],near:-100,far:200}),e.jsx(Oe,{enableRotate:!0,enableZoom:!0,minZoom:20,maxZoom:120,maxPolarAngle:Math.PI/2.2,minPolarAngle:.1,target:[0,-.5,0]}),e.jsx("ambientLight",{intensity:.5,color:"#cceeff"}),e.jsx("directionalLight",{castShadow:!0,position:[15,20,10],intensity:2,color:"#fffbeb","shadow-mapSize":[2048,2048],"shadow-camera-left":-15,"shadow-camera-right":15,"shadow-camera-top":15,"shadow-camera-bottom":-15}),e.jsx(Te,{preset:"city"}),e.jsx(We,{}),e.jsxs("group",{children:[r.map((h,u)=>h.map((M,v)=>{const[y,b,p]=L(v,u);return e.jsxs(H.Fragment,{children:[e.jsx(Xe,{type:M.buildingType,x:v,y:u,grid:r,onHover:s,onLeave:l,onClick:a}),e.jsx("group",{position:[y,0,p],raycast:()=>null,children:M.buildingType!==w.None&&M.buildingType!==w.Road&&e.jsx(ne,{type:M.buildingType,baseColor:U[M.buildingType].color,x:v,y:u})})]},`${v}-${u}`)})),e.jsxs("group",{raycast:()=>null,children:[e.jsx(Ve,{grid:r}),e.jsx(Ye,{population:i,grid:r}),m&&t&&e.jsx("group",{position:[x[0],0,x[2]],children:e.jsx(Ue,{speed:3,rotationIntensity:0,floatIntensity:.1,floatingRange:[0,.1],children:e.jsx(ne,{type:n,baseColor:d,x:t.x,y:t.y,transparent:!0,opacity:.7})})}),t&&e.jsx(qe,{x:t.x,y:t.y,color:f?"#ef4444":m?"#ffffff":"#000000"})]})]}),e.jsx($e,{size:10,samples:8})]})})},Je=[w.None,w.Road,w.Residential,w.Commercial,w.Industrial,w.Park],Qe=({type:r,isSelected:a,onClick:n,money:i})=>{const t=U[r],o=i>=t.cost,s=r===w.None,l=t.color;return e.jsxs("button",{onClick:n,disabled:!s&&!o,className:`
        relative flex flex-col items-center justify-center rounded-lg border-2 transition-all shadow-lg backdrop-blur-sm shrink-0
        w-14 h-14 md:w-16 md:h-16
        ${a?"border-white bg-white/20 scale-110 z-10":"border-gray-600 bg-gray-900/80 hover:bg-gray-800"}
        ${!s&&!o?"opacity-50 cursor-not-allowed":"cursor-pointer"}
      `,title:t.description,children:[e.jsxs("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded mb-0.5 md:mb-1 border border-black/30 shadow-inner flex items-center justify-center overflow-hidden",style:{backgroundColor:s?"transparent":l},children:[s&&e.jsx("div",{className:"w-full h-full bg-red-600 text-white flex justify-center items-center font-bold text-base md:text-lg",children:"âœ•"}),r===w.Road&&e.jsx("div",{className:"w-full h-2 bg-gray-800 transform -rotate-45"})]}),e.jsx("span",{className:"text-[8px] md:text-[10px] font-bold text-white uppercase tracking-wider drop-shadow-md leading-none",children:t.name}),t.cost>0&&e.jsxs("span",{className:`text-[8px] md:text-[10px] font-mono leading-none ${o?"text-green-300":"text-red-400"}`,children:["$",t.cost]})]})},et=({stats:r,selectedTool:a,onSelectTool:n,newsFeed:i})=>{const t=c.useRef(null);return c.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[i]),e.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between p-2 md:p-4 font-sans z-10",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start pointer-events-auto gap-2 w-full max-w-full",children:e.jsxs("div",{className:"bg-gray-900/90 text-white p-2 md:p-3 rounded-xl border border-gray-700 shadow-2xl backdrop-blur-md flex gap-3 md:gap-6 items-center justify-between md:justify-start w-full md:w-auto",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Treasury"}),e.jsxs("span",{className:"text-lg md:text-2xl font-black text-green-400 font-mono drop-shadow-md",children:["$",r.money.toLocaleString()]})]}),e.jsx("div",{className:"w-px h-6 md:h-8 bg-gray-700"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Citizens"}),e.jsx("span",{className:"text-base md:text-xl font-bold text-blue-300 font-mono drop-shadow-md",children:r.population.toLocaleString()})]}),e.jsx("div",{className:"w-px h-6 md:h-8 bg-gray-700"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Day"}),e.jsx("span",{className:"text-base md:text-lg font-bold text-white font-mono",children:r.day})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:justify-between md:items-end pointer-events-auto mt-auto gap-2 w-full max-w-full",children:[e.jsxs("div",{className:"flex gap-1 md:gap-2 bg-gray-900/80 p-1 md:p-2 rounded-2xl border border-gray-600/50 backdrop-blur-xl shadow-2xl w-full md:w-auto overflow-x-auto no-scrollbar justify-start md:justify-start",children:[e.jsx("div",{className:"flex gap-1 md:gap-2 min-w-max px-1",children:Je.map(o=>e.jsx(Qe,{type:o,isSelected:a===o,onClick:()=>n(o),money:r.money},o))}),e.jsx("div",{className:"text-[8px] text-gray-500 uppercase writing-mode-vertical flex items-center justify-center font-bold tracking-widest border-l border-gray-700 pl-1 ml-1 select-none",children:"Build"})]}),e.jsxs("div",{className:"w-full md:w-80 h-32 md:h-48 bg-black/80 text-white rounded-xl border border-gray-700/80 backdrop-blur-xl shadow-2xl flex flex-col overflow-hidden relative",children:[e.jsxs("div",{className:"bg-gray-800/90 px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest text-gray-300 border-b border-gray-600 flex justify-between items-center",children:[e.jsx("span",{children:"City Feed"}),e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[linear-gradient(to_bottom,rgba(255,255,255,0)_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px] opacity-30 z-20"}),e.jsxs("div",{ref:t,className:"flex-1 overflow-y-auto p-2 md:p-3 space-y-2 text-[10px] md:text-xs font-mono scroll-smooth mask-image-b z-10",children:[i.length===0&&e.jsx("div",{className:"text-gray-500 italic text-center mt-10",children:"No active news stream."}),i.map(o=>e.jsxs("div",{className:`
                border-l-2 pl-2 py-1 transition-all animate-fade-in leading-tight relative
                ${o.type==="positive"?"border-green-500 text-green-200 bg-green-900/20":""}
                ${o.type==="negative"?"border-red-500 text-red-200 bg-red-900/20":""}
                ${o.type==="neutral"?"border-blue-400 text-blue-100 bg-blue-900/20":""}
              `,children:[e.jsx("span",{className:"opacity-70 text-[8px] absolute top-0.5 right-1",children:new Date(Number(o.id.split(".")[0])).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.text]},o.id))]})]})]})]})},tt=({onStart:r})=>e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-white font-sans p-6 bg-black/30 backdrop-blur-sm transition-all duration-1000",children:e.jsxs("div",{className:"max-w-md w-full bg-slate-900/90 p-8 rounded-2xl border border-slate-700 shadow-2xl backdrop-blur-xl relative overflow-hidden animate-fade-in",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-cyan-500/20 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/20 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-5xl font-black mb-2 bg-linear-to-br from-white via-cyan-200 to-blue-400 bg-clip-text text-transparent tracking-tight",children:"SkyMetropolis"}),e.jsx("p",{className:"text-slate-400 mb-8 text-sm font-medium uppercase tracking-widest",children:"Isometric City Builder"}),e.jsx("button",{onClick:r,className:"w-full py-4 bg-linear-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold rounded-xl shadow-lg shadow-cyan-900/20 transform transition-all hover:scale-[1.02] active:scale-[0.98] text-lg tracking-wide",children:"Start Building"})]})]})}),ot=()=>{const r=[];for(let a=0;a<P;a++){const n=[];for(let i=0;i<P;i++)n.push({x:i,y:a,buildingType:w.None});r.push(n)}return r};function rt(){const[r,a]=c.useState(!1),[n,i]=c.useState(ot),[t,o]=c.useState({money:Ge,population:0,day:1}),[s,l]=c.useState(w.Road),[m,d]=c.useState([]),f=c.useRef(n),x=c.useRef(t);c.useEffect(()=>{f.current=n},[n]),c.useEffect(()=>{x.current=t},[t]);const h=c.useCallback(v=>{d(y=>[...y.slice(-12),v])},[]);c.useEffect(()=>{r&&h({id:Date.now().toString(),text:"Welcome to SkyMetropolis. Terrain generation complete.",type:"positive"})},[r,h]),c.useEffect(()=>{if(!r)return;const v=setInterval(()=>{let y=0,b=0,p={};f.current.flat().forEach(j=>{if(j.buildingType!==w.None){const k=U[j.buildingType];y+=k.incomeGen,b+=k.popGen,p[j.buildingType]=(p[j.buildingType]||0)+1}});const g=p[w.Residential]||0,S=g*50;o(j=>{let k=j.population+b;return k>S&&(k=S),g===0&&j.population>0&&(k=Math.max(0,j.population-5)),{money:j.money+y,population:k,day:j.day+1}})},Ee);return()=>clearInterval(v)},[r]);const u=c.useCallback((v,y)=>{if(!r)return;const b=f.current,p=x.current,g=s;if(v<0||v>=P||y<0||y>=P)return;const S=b[y][v],j=U[g];if(g===w.None){if(S.buildingType!==w.None)if(p.money>=5){const _=b.map(I=>[...I]);_[y][v]={...S,buildingType:w.None},i(_),o(I=>({...I,money:I.money-5}))}else h({id:Date.now().toString(),text:"Cannot afford demolition costs.",type:"negative"});return}if(S.buildingType===w.None)if(p.money>=j.cost){o(_=>({..._,money:_.money-j.cost}));const k=b.map(_=>[..._]);k[y][v]={...S,buildingType:g},i(k)}else h({id:Date.now().toString()+Math.random(),text:`Treasury insufficient for ${j.name}.`,type:"negative"})},[s,h,r]),M=()=>{a(!0)};return e.jsxs("div",{className:"relative w-screen h-screen overflow-hidden selection:bg-transparent selection:text-transparent bg-sky-900",children:[e.jsx(Ke,{grid:n,onTileClick:u,hoveredTool:s,population:t.population}),!r&&e.jsx(tt,{onStart:M}),r&&e.jsx(et,{stats:t,selectedTool:s,onSelectTool:l,newsFeed:m}),e.jsx("style",{children:`
        @keyframes fade-in { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .animate-fade-in { animation: fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        .mask-image-b { -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%); mask-image: linear-gradient(to bottom, transparent 0%, black 15%); }
        
        /* Vertical text for toolbar label */
        .writing-mode-vertical { writing-mode: vertical-rl; text-orientation: mixed; }
        
        /* Custom scrollbar for news */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }
        `})]})}const lt={fullscreen:!0};function ct(){return[{title:"Sky Metropolis"},{property:"og:title",content:"Sky Metropolis"},{name:"description",content:"Sky Metropolis - A city building simulation game with isometric 3D graphics."}]}const dt=ue(rt);export{dt as default,lt as handle,ct as meta};
