import{w as u,a as v,p as h}from"./chunk-4WY6JWTD-NS4yDDl0.js";import{S as m}from"./stats.esm-IRX7mck_.js";class f{options;x;y;vx;vy;radius;color;candrod;constructor(t){this.options=t;const{x:s,y:o,r:n,color:e}=t;this.x=s,this.y=o,this.vx=0,this.vy=0,this.radius=n,this.color=e,this.candrod=!0}paint(t){t.beginPath(),t.arc(this.x,this.y,this.radius-1,0,Math.PI*2),t.fillStyle=this.color,t.fill()}run(t,s){const o=t.getContext("2d");if(!o)throw new Error("Canvas context is null");if(!this.candrod)return this.paint(o);const n=12,e=9.8,i=.5,a=.8,r=t.width/20;this.vx+=this.vx>0?-i*s:i*s,this.vy=this.vy+e*s,this.x+=s*this.vx*r,this.y+=s*this.vy*r,(this.y>t.height-n||this.y<n)&&(this.y=this.y<n?n:t.height-n,this.vy=-this.vy*a),(this.x>t.width-n||this.x<n)&&(this.x=this.x<n?n:t.width-n,this.vx=-this.vx*a),this.paint(o)}setSpeed(t,s){this.vx=t,this.vy=s}}class w{balls=[];canvas;stats;constructor(){this.stats=new m,this.stats.setMode(0),this.renderStats(),this.init(),this.animate(),this.setListener()}renderStats(){this.stats.dom.style.position="absolute",this.stats.dom.style.left="unset",this.stats.dom.style.right="0",this.stats.dom.style.top="0",document.body.appendChild(this.stats.dom)}init(){const t=document.querySelector("#cas");if(!t)throw new Error("Canvas element not found");t.width=window.innerWidth,t.height=window.innerHeight,this.canvas=t;const s=12;for(let o=0;o<100;o++){let n=new f({x:this.getRandom(s,t.width-s),y:this.getRandom(s,t.height-s),r:s,color:`rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 1)`});this.balls.push(n)}}RAF=(window.requestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}).bind(window);animate=()=>{if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas,s=t.getContext("2d");if(!s)throw new Error("Canvas context is null");s.clearRect(0,0,t.width,t.height),s.save(),s.fillStyle="rgba(255,255,255,0.2)",s.fillRect(0,0,t.width,t.height),s.restore();let o=16/1e3;return this.collision(),this.balls.forEach(n=>{n.run(t,o)}),this.stats.update(),this.RAF(this.animate)};collision(){const t=this.balls,s=.8;for(let o=0;o<t.length;o++)for(let n=0;n<t.length;n++){let e=t[o],i=t[n];if(e!==i){let a=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2));if(Math.ceil(a)<e.radius+i.radius+2){let r=((e.vx-i.vx)*Math.pow(e.x-i.x,2)+(e.vy-i.vy)*(e.x-i.x)*(e.y-i.y))/Math.pow(a,2),c=((e.vy-i.vy)*Math.pow(e.y-i.y,2)+(e.vx-i.vx)*(e.x-i.x)+(e.y-i.y))/Math.pow(a,2);e.vx=(e.vx-r)*s,e.vy=(e.vy-c)*s,i.vx=(i.vx+r)*s,i.vy=(i.vy+c)*s;let d=(e.radius+i.radius+2-a)/2,y=d*(e.x-i.x)/a,x=d*(e.y-i.y)/a;e.x=e.x+y,e.y=e.y+x,i.x=i.x-y,i.y=i.y-x}}}}setListener(){if(!this.canvas)throw new Error("Canvas element not found");const t=this.canvas;t.addEventListener("click",s=>{let o=s.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-t.offsetLeft,n=s.clientY+document.body.scrollTop+document.documentElement.scrollTop-t.offsetTop;this.balls.forEach(function(e){e.vx=(o-e.x)/40,e.vy=(n-e.y)/40})})}getRandom(t,s){return Math.random()*(s-t)+t}}function b(){return[{title:"Shotball"},{property:"og:title",content:"Shotball"},{name:"description",content:"Use Canvas to creat gravity core"}]}const M=u(function(){return v.useEffect(()=>{const t=s=>{s.preventDefault()};return document.body.addEventListener("contextmenu",t),new w,()=>{document.body.removeEventListener("contextmenu",t)}},[]),h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"tips",children:"Left click to create a gravity point"}),h.jsx("canvas",{id:"cas",className:"bg-[#0A3136]"})]})});export{M as default,b as meta};
