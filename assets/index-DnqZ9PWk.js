import{a as f,p as t,w as Se,L as Ce}from"./chunk-WWGJGFF6-B6u1Qf49.js";import{g as Ee,s as $e}from"./index-Cpx2NyP8.js";import{c as b}from"./createLucideIcon-DTDhPEOD.js";import{A as he}from"./arrow-left-BA1BmZXV.js";import{I as z}from"./image-2teTneuk.js";import{X as xe}from"./x-BoKuTvzl.js";import{W as Re,D as Me,L as Ie,K as Te,E as X,G as Ae,T as P}from"./index-8YokrI8v.js";import{C as Pe}from"./clock-BYjh2l7s.js";import{U as ze,M as Le}from"./upload-CByFdqjz.js";import{T as De}from"./trash-2-SEUNApwH.js";import{a as _e,C as Fe}from"./circle-alert-B20IJCRP.js";import{E as Ge}from"./external-link-BF62H1Sc.js";import{E as J}from"./eye-DFgWAxyC.js";const Ve=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Oe=b("battery",Ve);const Ue=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],U=b("chevron-left",Ue);const He=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Y=b("ellipsis-vertical",He);const Be=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Q=b("ellipsis",Be);const We=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],D=b("mic",We);const qe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Z=b("phone",qe);const Ke=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ee=b("play",Ke);const Xe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Je=b("plus",Xe);const Ye=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qe=b("refresh-cw",Ye);const Ze=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],et=b("save",Ze);const tt=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],st=b("signal",tt);const rt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],H=b("smile",rt);const at=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nt=b("sparkles",at);const it=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],lt=b("type",it);const ct=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ot=b("video",ct);const dt=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ut=b("wifi",dt);function ht(e,s){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),i=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(i),s&&(a.href=s),i.href=e,i.href}const xt=(()=>{let e=0;const s=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${s()}${e}`)})();function R(e){const s=[];for(let r=0,a=e.length;r<a;r++)s.push(e[r]);return s}let T=null;function me(e={}){return T||(e.includeStyleProperties?(T=e.includeStyleProperties,T):(T=R(window.getComputedStyle(document.documentElement)),T))}function _(e,s){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(s);return a?parseFloat(a.replace("px","")):0}function mt(e){const s=_(e,"border-left-width"),r=_(e,"border-right-width");return e.clientWidth+s+r}function ft(e){const s=_(e,"border-top-width"),r=_(e,"border-bottom-width");return e.clientHeight+s+r}function fe(e,s={}){const r=s.width||mt(e),a=s.height||ft(e);return{width:r,height:a}}function pt(){let e,s;try{s=process}catch{}const r=s&&s.env?s.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const k=16384;function gt(e){(e.width>k||e.height>k)&&(e.width>k&&e.height>k?e.width>e.height?(e.height*=k/e.width,e.width=k):(e.width*=k/e.height,e.height=k):e.width>k?(e.height*=k/e.width,e.width=k):(e.width*=k/e.height,e.height=k))}function F(e){return new Promise((s,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>s(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function bt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(s=>`data:image/svg+xml;charset=utf-8,${s}`)}async function yt(e,s,r){const a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),n=document.createElementNS(a,"foreignObject");return i.setAttribute("width",`${s}`),i.setAttribute("height",`${r}`),i.setAttribute("viewBox",`0 0 ${s} ${r}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),i.appendChild(n),n.appendChild(e),bt(i)}const v=(e,s)=>{if(e instanceof s)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===s.name||v(r,s)};function wt(e){const s=e.getPropertyValue("content");return`${e.cssText} content: '${s.replace(/'|"/g,"")}';`}function jt(e,s){return me(s).map(r=>{const a=e.getPropertyValue(r),i=e.getPropertyPriority(r);return`${r}: ${a}${i?" !important":""};`}).join(" ")}function vt(e,s,r,a){const i=`.${e}:${s}`,n=r.cssText?wt(r):jt(r,a);return document.createTextNode(`${i}{${n}}`)}function te(e,s,r,a){const i=window.getComputedStyle(e,r),n=i.getPropertyValue("content");if(n===""||n==="none")return;const l=xt();try{s.className=`${s.className} ${l}`}catch{return}const c=document.createElement("style");c.appendChild(vt(l,r,i,a)),s.appendChild(c)}function Nt(e,s,r){te(e,s,":before",r),te(e,s,":after",r)}const se="application/font-woff",re="image/jpeg",kt={woff:se,woff2:se,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:re,jpeg:re,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function St(e){const s=/\.([^./]*?)$/g.exec(e);return s?s[1]:""}function q(e){const s=St(e).toLowerCase();return kt[s]||""}function Ct(e){return e.split(/,/)[1]}function W(e){return e.search(/^(data:)/)!==-1}function Et(e,s){return`data:${s};base64,${e}`}async function pe(e,s,r){const a=await fetch(e,s);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const i=await a.blob();return new Promise((n,l)=>{const c=new FileReader;c.onerror=l,c.onloadend=()=>{try{n(r({res:a,result:c.result}))}catch(h){l(h)}},c.readAsDataURL(i)})}const B={};function $t(e,s,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),s?`[${s}]${a}`:a}async function K(e,s,r){const a=$t(e,s,r.includeQueryParams);if(B[a]!=null)return B[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const n=await pe(e,r.fetchRequestInit,({res:l,result:c})=>(s||(s=l.headers.get("Content-Type")||""),Ct(c)));i=Et(n,s)}catch(n){i=r.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;n&&(l=typeof n=="string"?n:n.message),l&&console.warn(l)}return B[a]=i,i}async function Rt(e){const s=e.toDataURL();return s==="data:,"?e.cloneNode(!1):F(s)}async function Mt(e,s){if(e.currentSrc){const n=document.createElement("canvas"),l=n.getContext("2d");n.width=e.clientWidth,n.height=e.clientHeight,l?.drawImage(e,0,0,n.width,n.height);const c=n.toDataURL();return F(c)}const r=e.poster,a=q(r),i=await K(r,a,s);return F(i)}async function It(e,s){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await G(e.contentDocument.body,s,!0)}catch{}return e.cloneNode(!1)}async function Tt(e,s){return v(e,HTMLCanvasElement)?Rt(e):v(e,HTMLVideoElement)?Mt(e,s):v(e,HTMLIFrameElement)?It(e,s):e.cloneNode(ge(e))}const At=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",ge=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Pt(e,s,r){var a,i;if(ge(s))return s;let n=[];return At(e)&&e.assignedNodes?n=R(e.assignedNodes()):v(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?n=R(e.contentDocument.body.childNodes):n=R(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),n.length===0||v(e,HTMLVideoElement)||await n.reduce((l,c)=>l.then(()=>G(c,r)).then(h=>{h&&s.appendChild(h)}),Promise.resolve()),s}function zt(e,s,r){const a=s.style;if(!a)return;const i=window.getComputedStyle(e);i.cssText?(a.cssText=i.cssText,a.transformOrigin=i.transformOrigin):me(r).forEach(n=>{let l=i.getPropertyValue(n);n==="font-size"&&l.endsWith("px")&&(l=`${Math.floor(parseFloat(l.substring(0,l.length-2)))-.1}px`),v(e,HTMLIFrameElement)&&n==="display"&&l==="inline"&&(l="block"),n==="d"&&s.getAttribute("d")&&(l=`path(${s.getAttribute("d")})`),a.setProperty(n,l,i.getPropertyPriority(n))})}function Lt(e,s){v(e,HTMLTextAreaElement)&&(s.innerHTML=e.value),v(e,HTMLInputElement)&&s.setAttribute("value",e.value)}function Dt(e,s){if(v(e,HTMLSelectElement)){const a=Array.from(s.children).find(i=>e.value===i.getAttribute("value"));a&&a.setAttribute("selected","")}}function _t(e,s,r){return v(s,Element)&&(zt(e,s,r),Nt(e,s,r),Lt(e,s),Dt(e,s)),s}async function Ft(e,s){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let n=0;n<r.length;n++){const c=r[n].getAttribute("xlink:href");if(c){const h=e.querySelector(c),m=document.querySelector(c);!h&&m&&!a[c]&&(a[c]=await G(m,s,!0))}}const i=Object.values(a);if(i.length){const n="http://www.w3.org/1999/xhtml",l=document.createElementNS(n,"svg");l.setAttribute("xmlns",n),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const c=document.createElementNS(n,"defs");l.appendChild(c);for(let h=0;h<i.length;h++)c.appendChild(i[h]);e.appendChild(l)}return e}async function G(e,s,r){return!r&&s.filter&&!s.filter(e)?null:Promise.resolve(e).then(a=>Tt(a,s)).then(a=>Pt(e,a,s)).then(a=>_t(e,a,s)).then(a=>Ft(a,s))}const be=/url\((['"]?)([^'"]+?)\1\)/g,Gt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Vt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ot(e){const s=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${s})(['"]?\\))`,"g")}function Ut(e){const s=[];return e.replace(be,(r,a,i)=>(s.push(i),r)),s.filter(r=>!W(r))}async function Ht(e,s,r,a,i){try{const n=r?ht(s,r):s,l=q(s);let c;return i||(c=await K(n,l,a)),e.replace(Ot(s),`$1${c}$3`)}catch{}return e}function Bt(e,{preferredFontFormat:s}){return s?e.replace(Vt,r=>{for(;;){const[a,,i]=Gt.exec(r)||[];if(!i)return"";if(i===s)return`src: ${a};`}}):e}function ye(e){return e.search(be)!==-1}async function we(e,s,r){if(!ye(e))return e;const a=Bt(e,r);return Ut(a).reduce((n,l)=>n.then(c=>Ht(c,l,s,r)),Promise.resolve(a))}async function A(e,s,r){var a;const i=(a=s.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(i){const n=await we(i,null,r);return s.style.setProperty(e,n,s.style.getPropertyPriority(e)),!0}return!1}async function Wt(e,s){await A("background",e,s)||await A("background-image",e,s),await A("mask",e,s)||await A("-webkit-mask",e,s)||await A("mask-image",e,s)||await A("-webkit-mask-image",e,s)}async function qt(e,s){const r=v(e,HTMLImageElement);if(!(r&&!W(e.src))&&!(v(e,SVGImageElement)&&!W(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,i=await K(a,q(a),s);await new Promise((n,l)=>{e.onload=n,e.onerror=s.onImageErrorHandler?(...h)=>{try{n(s.onImageErrorHandler(...h))}catch(m){l(m)}}:l;const c=e;c.decode&&(c.decode=n),c.loading==="lazy"&&(c.loading="eager"),r?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Kt(e,s){const a=R(e.childNodes).map(i=>je(i,s));await Promise.all(a).then(()=>e)}async function je(e,s){v(e,Element)&&(await Wt(e,s),await qt(e,s),await Kt(e,s))}function Xt(e,s){const{style:r}=e;s.backgroundColor&&(r.backgroundColor=s.backgroundColor),s.width&&(r.width=`${s.width}px`),s.height&&(r.height=`${s.height}px`);const a=s.style;return a!=null&&Object.keys(a).forEach(i=>{r[i]=a[i]}),e}const ae={};async function ne(e){let s=ae[e];if(s!=null)return s;const a=await(await fetch(e)).text();return s={url:e,cssText:a},ae[e]=s,s}async function ie(e,s){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,n=(r.match(/url\([^)]+\)/g)||[]).map(async l=>{let c=l.replace(a,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),pe(c,s.fetchRequestInit,({result:h})=>(r=r.replace(l,`url(${h})`),[l,h]))});return Promise.all(n).then(()=>r)}function le(e){if(e==null)return[];const s=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const h=i.exec(a);if(h===null)break;s.push(h[0])}a=a.replace(i,"");const n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(l,"gi");for(;;){let h=n.exec(a);if(h===null){if(h=c.exec(a),h===null)break;n.lastIndex=c.lastIndex}else c.lastIndex=n.lastIndex;s.push(h[0])}return s}async function Jt(e,s){const r=[],a=[];return e.forEach(i=>{if("cssRules"in i)try{R(i.cssRules||[]).forEach((n,l)=>{if(n.type===CSSRule.IMPORT_RULE){let c=l+1;const h=n.href,m=ne(h).then(x=>ie(x,s)).then(x=>le(x).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?c+=1:i.cssRules.length)}catch(j){console.error("Error inserting rule from remote css",{rule:p,error:j})}})).catch(x=>{console.error("Error loading remote css",x.toString())});a.push(m)}})}catch(n){const l=e.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&a.push(ne(i.href).then(c=>ie(c,s)).then(c=>le(c).forEach(h=>{l.insertRule(h,l.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",n)}}),Promise.all(a).then(()=>(e.forEach(i=>{if("cssRules"in i)try{R(i.cssRules||[]).forEach(n=>{r.push(n)})}catch(n){console.error(`Error while reading CSS rules from ${i.href}`,n)}}),r))}function Yt(e){return e.filter(s=>s.type===CSSRule.FONT_FACE_RULE).filter(s=>ye(s.style.getPropertyValue("src")))}async function Qt(e,s){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=R(e.ownerDocument.styleSheets),a=await Jt(r,s);return Yt(a)}function ve(e){return e.trim().replace(/["']/g,"")}function Zt(e){const s=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(n=>{s.add(ve(n))}),Array.from(a.children).forEach(n=>{n instanceof HTMLElement&&r(n)})}return r(e),s}async function es(e,s){const r=await Qt(e,s),a=Zt(e);return(await Promise.all(r.filter(n=>a.has(ve(n.style.fontFamily))).map(n=>{const l=n.parentStyleSheet?n.parentStyleSheet.href:null;return we(n.cssText,l,s)}))).join(`
`)}async function ts(e,s){const r=s.fontEmbedCSS!=null?s.fontEmbedCSS:s.skipFonts?null:await es(e,s);if(r){const a=document.createElement("style"),i=document.createTextNode(r);a.appendChild(i),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function ss(e,s={}){const{width:r,height:a}=fe(e,s),i=await G(e,s,!0);return await ts(i,s),await je(i,s),Xt(i,s),await yt(i,r,a)}async function rs(e,s={}){const{width:r,height:a}=fe(e,s),i=await ss(e,s),n=await F(i),l=document.createElement("canvas"),c=l.getContext("2d"),h=s.pixelRatio||pt(),m=s.canvasWidth||r,x=s.canvasHeight||a;return l.width=m*h,l.height=x*h,s.skipAutoScale||gt(l),l.style.width=`${m}`,l.style.height=`${x}`,s.backgroundColor&&(c.fillStyle=s.backgroundColor,c.fillRect(0,0,l.width,l.height)),c.drawImage(n,0,0,l.width,l.height),l}async function as(e,s={}){return(await rs(e,s)).toDataURL()}const ce={time:"12:34",batteryLevel:85,partnerName:"Babe â¤ï¸",partnerAvatar:"https://picsum.photos/100/100",myAvatar:"https://picsum.photos/101/101"},oe=[{id:"1",text:"Hey! What do you want for dinner tonight?",isSender:!1,timestamp:"12:30",isRead:!0},{id:"2",text:"I want hot pot ðŸ²",isSender:!0,timestamp:"12:31",isRead:!0}],ns=[{id:"instagram",name:"Instagram",icon:"camera"},{id:"line",name:"LINE",icon:"message-circle"},{id:"telegram",name:"Telegram",icon:"send"},{id:"tiktok",name:"TikTok",icon:"music"}],is=["â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ˜¡","ðŸ‘"],de=e=>{const s=Math.floor(e/60),r=e%60;return`${s}:${r.toString().padStart(2,"0")}`},Ne=f.forwardRef(({platform:e,messages:s,settings:r,onUpdateMessage:a},i)=>{const[n,l]=f.useState(null),[c,h]=f.useState(null),m=o=>{if(e!=="instagram")return;const u=setTimeout(()=>{l(o)},500);h(u)},x=()=>{c&&(clearTimeout(c),h(null))},p=o=>{if(n){const y=s.find(w=>w.id===n)?.reaction===o?void 0:o;a(n,{reaction:y}),l(null)}};f.useEffect(()=>{const o=u=>{n&&!u.target.closest(".reaction-picker")&&l(null)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n]);const j=()=>{switch(e){case"instagram":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-100 text-black",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(U,{size:28}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:r.partnerAvatar,alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-200"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold leading-tight",children:r.partnerName}),t.jsx("p",{className:"text-[10px] text-gray-400 leading-tight",children:"Active now"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-5 text-black",children:[t.jsx(Z,{size:24}),t.jsx(ot,{size:26})]})]});case"line":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-[#202732] text-white",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(U,{size:24}),t.jsx("h3",{className:"text-lg font-medium",children:r.partnerName})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Z,{size:20}),t.jsx(Y,{size:20})]})]});case"telegram":return t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[#517da2] text-white",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(he,{size:24}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:r.partnerAvatar,alt:"avatar",className:"w-9 h-9 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold leading-tight",children:r.partnerName}),t.jsx("p",{className:"text-[11px] text-gray-200 opacity-80 leading-tight",children:"last seen recently"})]})]})]}),t.jsx(Y,{size:22})]});case"tiktok":return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black text-white border-b border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(U,{size:24}),t.jsx("div",{className:"text-center",children:t.jsx("h3",{className:"text-sm font-bold",children:r.partnerName})})]}),t.jsx(Q,{size:24})]})}},S=()=>{switch(e){case"line":return"bg-[#9BB8DB]";case"telegram":return"bg-[#89a2b5]";case"tiktok":return"bg-black";case"instagram":default:return"bg-white"}},C=(o,u,y="bars")=>y==="line"?t.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[t.jsx("div",{className:`p-1.5 rounded-full ${o?"bg-black/20":"bg-gray-200"}`,children:t.jsx(ee,{size:12,fill:"currentColor"})}),t.jsx("div",{className:"flex-1 h-1 bg-gray-300 rounded-full relative overflow-hidden",children:t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 bg-current opacity-50"})}),t.jsx("span",{className:"text-xs font-medium",children:de(u)})]}):t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-1 rounded-full ${o?"text-white":"text-black"}`,children:t.jsx(ee,{size:14,fill:"currentColor"})}),t.jsx("div",{className:"flex items-end gap-0.5 h-4",children:[...Array(15)].map((w,V)=>t.jsx("div",{className:`w-0.5 rounded-full ${o?"bg-white/80":"bg-black/40"}`,style:{height:`${Math.max(20,Math.random()*100)}%`}},V))}),t.jsx("span",{className:"text-xs",children:de(u)})]}),E=o=>{const u=o.isSender;if(e==="instagram"){const y=n===o.id;return t.jsxs("div",{className:`flex w-full mb-3 relative group ${u?"justify-end":"justify-start items-end gap-2"}`,children:[!u&&t.jsx("img",{src:r.partnerAvatar,className:"w-7 h-7 rounded-full object-cover mb-1"}),t.jsxs("div",{className:"relative",children:[y&&t.jsx("div",{className:`reaction-picker absolute -top-14 ${u?"right-0":"left-0"} bg-[#262626] rounded-full px-2 py-1.5 flex gap-1 z-30 shadow-xl animate-in zoom-in duration-200`,children:is.map(w=>t.jsx("button",{onClick:()=>p(w),className:"w-8 h-8 flex items-center justify-center text-xl hover:scale-125 transition-transform",children:w},w))}),t.jsxs("div",{onMouseDown:()=>m(o.id),onMouseUp:x,onMouseLeave:x,onTouchStart:()=>m(o.id),onTouchEnd:x,onContextMenu:w=>w.preventDefault(),className:`max-w-60 px-4 py-2.5 text-[15px] leading-snug rounded-3xl relative select-none cursor-pointer transition-transform active:scale-95 ${u?"bg-[#3797f0] text-white rounded-br-md":"bg-[#efefef] text-black rounded-bl-md"}`,children:[o.image?t.jsx("img",{src:o.image,className:"rounded-lg max-w-full"}):o.audioDuration?C(u,o.audioDuration,"bars"):o.text,t.jsx("div",{className:`text-[9px] mt-1 text-right ${u?"text-blue-100/80":"text-gray-400"}`,children:o.timestamp})]}),o.reaction&&t.jsx("div",{className:`absolute -bottom-2 ${u?"-left-1":"-right-1"} bg-white border-2 border-white rounded-full p-0.5 w-[22px] h-[22px] flex items-center justify-center shadow-sm z-10 text-[12px]`,children:o.reaction})]})]},o.id)}if(e==="line")return t.jsxs("div",{className:`flex w-full mb-4 ${u?"justify-end":"justify-start items-start gap-2"}`,children:[!u&&t.jsx("img",{src:r.partnerAvatar,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{className:`flex flex-col ${u?"items-end":"items-start"}`,children:[!u&&t.jsx("span",{className:"text-xs text-gray-600 mb-1 ml-1",children:r.partnerName}),t.jsxs("div",{className:"flex items-end gap-1.5",children:[u&&t.jsxs("div",{className:"flex flex-col items-end text-[10px] text-gray-600 min-w-[30px]",children:[o.isRead&&t.jsx("span",{children:"Read"}),t.jsx("span",{children:o.timestamp})]}),t.jsx("div",{className:`max-w-[220px] px-3 py-2 text-[14px] rounded-2xl shadow-sm relative leading-relaxed wrap-break-words ${u?"bg-[#85E249] text-black after:absolute after:top-2 after:-right-1 after:w-3 after:h-3 after:bg-[#85E249] after:rotate-45":"bg-white text-black after:absolute after:top-2 after:-left-1 after:w-3 after:h-3 after:bg-white after:rotate-45"}`,children:o.image?t.jsx("img",{src:o.image,className:"rounded-lg max-w-full"}):o.audioDuration?C(u,o.audioDuration,"line"):o.text}),!u&&t.jsx("span",{className:"text-[10px] text-gray-600 self-end",children:o.timestamp})]})]})]},o.id);if(e==="telegram")return t.jsxs("div",{className:`flex w-full mb-2 ${u?"justify-end":"justify-start gap-2"}`,children:[!u&&t.jsx("img",{src:r.partnerAvatar,className:"w-8 h-8 rounded-full object-cover self-end mb-1"}),t.jsxs("div",{className:`max-w-[75%] px-3 py-1.5 rounded-lg text-[15px] shadow-sm relative min-w-[60px] ${u?"bg-[#eeffde] text-black":"bg-white text-black"}`,children:[t.jsx("div",{className:"wrap-break-words mb-1",children:o.image?t.jsx("img",{src:o.image,className:"rounded-lg max-w-full"}):o.audioDuration?C(u,o.audioDuration,"line"):o.text}),t.jsxs("div",{className:`text-[11px] flex items-center justify-end gap-1 ${u?"text-[#55a060]":"text-gray-400"}`,children:[t.jsx("span",{children:o.timestamp}),u&&t.jsx("span",{className:"font-bold text-[10px]",children:"âœ“âœ“"})]})]})]},o.id);if(e==="tiktok")return t.jsxs("div",{className:`flex w-full mb-3 ${u?"justify-end":"justify-start items-end gap-2"}`,children:[!u&&t.jsx("img",{src:r.partnerAvatar,className:"w-8 h-8 rounded-full object-cover mb-1"}),t.jsxs("div",{className:`max-w-[70%] px-4 py-2.5 text-[15px] rounded-2xl ${u?"bg-[#2CB6D3] text-white rounded-br-sm":"bg-[#383838] text-white rounded-bl-sm"}`,children:[o.image?t.jsx("img",{src:o.image,className:"rounded-lg max-w-full"}):o.audioDuration?C(u,o.audioDuration,"bars"):o.text,t.jsx("div",{className:`text-[9px] mt-1 text-right ${u?"text-white/70":"text-gray-400"}`,children:o.timestamp})]})]},o.id)},$=()=>{switch(e){case"instagram":return t.jsx("div",{className:"px-4 py-3 bg-white flex items-center gap-3 border-t border-gray-100",children:t.jsxs("div",{className:"bg-[#efefef] flex-1 rounded-full px-4 py-2.5 flex items-center gap-2",children:[t.jsx("div",{className:"bg-blue-500 rounded-full p-1 text-white",children:t.jsx(z,{size:12,fill:"white"})}),t.jsx("span",{className:"text-gray-400 text-sm",children:"Message..."}),t.jsxs("div",{className:"ml-auto flex gap-3 text-gray-500",children:[t.jsx(D,{size:20}),t.jsx(z,{size:20}),t.jsx(H,{size:20})]})]})});case"line":return t.jsxs("div",{className:"px-3 py-2 bg-white flex items-center gap-3",children:[t.jsx(Q,{size:24,className:"text-gray-400"}),t.jsx(z,{size:24,className:"text-gray-400"}),t.jsx("div",{className:"flex-1 bg-gray-100 rounded-2xl px-3 py-2 text-sm text-gray-400",children:"Aa"}),t.jsx(D,{size:20,className:"text-gray-400"})]});case"telegram":return t.jsxs("div",{className:"px-2 py-2 bg-white flex items-center gap-2",children:[t.jsx(H,{size:28,className:"text-gray-400 p-1"}),t.jsx("div",{className:"flex-1 text-lg text-gray-400 pl-1",children:"Message"}),t.jsx(z,{size:28,className:"text-gray-400 p-1"}),t.jsx(D,{size:28,className:"text-gray-400 p-1"})]});case"tiktok":return t.jsxs("div",{className:"px-4 py-3 bg-black border-t border-gray-800 flex items-center gap-3",children:[t.jsx("div",{className:"flex-1 bg-[#252525] rounded-full px-4 py-2.5 flex items-center",children:t.jsx("span",{className:"text-gray-500 text-sm",children:"Send a message..."})}),t.jsx("div",{className:"text-gray-400",children:t.jsx(H,{size:24})})]})}},g=e==="line"?"bg-[#202732] text-white":e==="tiktok"?"bg-black text-white":e==="telegram"?"bg-[#517da2] text-white":"bg-white text-black";return t.jsx("div",{className:"w-full flex justify-center py-4 bg-gray-100 min-h-full",children:t.jsxs("div",{ref:i,className:"relative w-[375px] h-[812px] bg-white shadow-2xl overflow-hidden flex flex-col font-sans",style:{fontFamily:e==="line"?"sans-serif":"inherit"},children:[t.jsxs("div",{className:`px-5 py-2 flex justify-between items-end text-sm font-semibold h-11 ${g} z-10`,children:[t.jsx("div",{className:"tracking-wide",children:r.time}),t.jsxs("div",{className:"flex gap-1.5 items-center",children:[t.jsx(st,{size:16,className:"fill-current"}),t.jsx(ut,{size:16}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:"text-xs font-normal",children:[r.batteryLevel,"%"]}),t.jsx(Oe,{size:18,className:"fill-current"})]})]})]}),t.jsx("div",{className:"z-10",children:j()}),t.jsx("div",{className:`flex-1 overflow-y-auto no-scrollbar p-4 flex flex-col ${r.backgroundImage?"bg-no-repeat bg-cover bg-center":S()}`,style:r.backgroundImage?{backgroundImage:`url(${r.backgroundImage})`}:{},children:s.map(E)}),t.jsxs("div",{className:"z-10 relative",children:[$(),t.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-32 h-1 rounded-full ${e==="tiktok"||e==="line"?"bg-white/20":"bg-black/20"}`})]})]})})});Ne.displayName="ChatPreview";const ls=({settings:e,setSettings:s,messages:r,setMessages:a,platform:i,setPlatform:n,onGenerateAI:l,onDownload:c,onReset:h})=>{const[m,x]=f.useState("text"),[p,j]=f.useState(""),[S,C]=f.useState(10),[E,$]=f.useState(!0),[g,o]=f.useState(null),[u,y]=f.useState(e.time);f.useEffect(()=>{g||y(e.time)},[e.time,g]);const w=()=>{if(!(m==="text"&&!p.trim()))if(g)a(r.map(d=>{if(d.id===g){const N={id:d.id,isSender:E,timestamp:u,isRead:d.isRead,reaction:d.reaction};return d.image,m==="text"?N.text=p:N.audioDuration=S,N}return d})),L();else{const d={id:Date.now().toString(),isSender:E,timestamp:u,isRead:!0};m==="text"?(d.text=p,j("")):d.audioDuration=S,a([...r,d])}},V=d=>{o(d.id),$(d.isSender),y(d.timestamp),d.audioDuration?(x("voice"),C(d.audioDuration),j("")):(x("text"),j(d.text||""))},L=()=>{o(null),j(""),C(10),x("text"),$(!0),y(e.time)},O=(d,N)=>{if(d.target.files&&d.target.files[0]){const M=URL.createObjectURL(d.target.files[0]);if(N==="message")if(g)a(r.map(I=>I.id===g?{id:I.id,isSender:E,image:M,timestamp:u,isRead:I.isRead,reaction:I.reaction}:I)),L();else{const I={id:Date.now().toString(),image:M,isSender:E,timestamp:u,isRead:!0};a([...r,I])}else N==="partner"?s({...e,partnerAvatar:M}):N==="me"?s({...e,myAvatar:M}):N==="background"&&s({...e,backgroundImage:M})}},ke=(d,N)=>{d.stopPropagation(),a(r.filter(M=>M.id!==N)),g===N&&L()};return t.jsxs("div",{className:"h-full flex flex-col gap-6 p-4 sm:p-6 overflow-y-auto bg-slate-900/50 text-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-white",children:"Chat Editor"}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:h,className:"p-2 hover:bg-white/10 rounded-full text-slate-400 hover:text-white transition-colors",title:"Reset",children:t.jsx(Qe,{size:18})})})]}),t.jsx("div",{className:"flex p-1 bg-slate-800/50 rounded-xl border border-white/5",children:ns.map(d=>t.jsx("button",{onClick:()=>n(d.id),className:`flex-1 py-2 text-sm font-medium rounded-lg transition-all ${i===d.id?"bg-tech-500/20 text-tech-400 border border-tech-500/30":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:d.name},d.id))}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wider",children:"Settings"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Time"}),t.jsx("input",{type:"time",value:e.time,onChange:d=>s({...e,time:d.target.value}),className:"w-full p-2 bg-slate-800/50 border border-white/10 rounded-lg text-sm text-white focus:ring-2 focus:ring-tech-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Battery %"}),t.jsx("input",{type:"number",min:"1",max:"100",value:e.batteryLevel,onChange:d=>s({...e,batteryLevel:parseInt(d.target.value)}),className:"w-full p-2 bg-slate-800/50 border border-white/10 rounded-lg text-sm text-white focus:ring-2 focus:ring-tech-500 outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Partner Name"}),t.jsx("input",{type:"text",value:e.partnerName,onChange:d=>s({...e,partnerName:d.target.value}),className:"w-full p-2 bg-slate-800/50 border border-white/10 rounded-lg text-sm text-white focus:ring-2 focus:ring-tech-500 outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Partner Avatar"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:e.partnerAvatar,className:"w-10 h-10 rounded-full object-cover border border-white/10"}),t.jsxs("label",{className:"cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 px-3 py-1.5 rounded-md text-xs border border-white/10 transition",children:["Change",t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d=>O(d,"partner")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Chat Background"}),t.jsxs("div",{className:"flex items-center gap-3",children:[e.backgroundImage?t.jsxs("div",{className:"relative w-10 h-10",children:[t.jsx("img",{src:e.backgroundImage,className:"w-full h-full rounded-lg object-cover border border-white/10"}),t.jsx("button",{onClick:()=>s({...e,backgroundImage:void 0}),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 hover:bg-red-600",children:t.jsx(xe,{size:10})})]}):t.jsx("div",{className:"w-10 h-10 rounded-lg border border-dashed border-white/20 flex items-center justify-center bg-slate-800/50",children:t.jsx(z,{size:16,className:"text-slate-500"})}),t.jsxs("label",{className:"cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 px-3 py-1.5 rounded-md text-xs border border-white/10 transition",children:["Upload",t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d=>O(d,"background")})]})]})]})]})]}),t.jsx("hr",{className:"border-white/10"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wider",children:g?"Editing Message":"Messages"}),t.jsxs("button",{onClick:l,className:"flex items-center gap-1.5 text-xs font-medium text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-full transition-colors border border-purple-500/20",children:[t.jsx(Re,{size:14}),"AI Generate"]})]}),t.jsxs("div",{className:`p-4 rounded-xl border space-y-3 transition-colors ${g?"bg-tech-500/10 border-tech-500/30":"bg-slate-800/50 border-white/10"}`,children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1 bg-slate-900/50 p-1 rounded-lg flex gap-1 border border-white/10",children:[t.jsx("button",{onClick:()=>$(!1),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${E?"text-slate-400 hover:bg-slate-800":"bg-slate-700 shadow text-white"}`,children:"Them"}),t.jsx("button",{onClick:()=>$(!0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition ${E?"bg-tech-500/20 shadow text-tech-400":"text-slate-400 hover:bg-slate-800"}`,children:"Me"})]}),t.jsxs("div",{className:"w-24 relative",children:[t.jsx("input",{type:"time",value:u,onChange:d=>y(d.target.value),className:"w-full h-full p-1.5 pl-7 text-xs bg-slate-800/50 border border-white/10 rounded-lg outline-none focus:border-tech-500 text-white"}),t.jsx(Pe,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 border-b pb-2 ${g?"border-tech-500/30":"border-white/10"}`,children:[t.jsxs("button",{onClick:()=>x("text"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition ${m==="text"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx(lt,{size:14})," Text"]}),t.jsxs("button",{onClick:()=>x("voice"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition ${m==="voice"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx(D,{size:14})," Voice"]})]}),m==="text"?t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{value:p,onChange:d=>j(d.target.value),placeholder:"Type a message...",className:"w-full p-3 bg-slate-900/50 border border-white/10 rounded-lg text-sm text-white placeholder-slate-500 focus:ring-2 focus:ring-tech-500 outline-none resize-none h-20",onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),w())}}),t.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] text-slate-500",children:[p.length," chars"]})]}):t.jsxs("div",{className:"h-20 flex flex-col justify-center px-2 space-y-2",children:[t.jsx("div",{className:"flex justify-between text-xs text-slate-400",children:t.jsxs("span",{children:["Duration: ",S,"s"]})}),t.jsx("input",{type:"range",min:"1",max:"60",value:S,onChange:d=>C(parseInt(d.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-tech-500"})]}),t.jsxs("div",{className:"flex justify-between items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer text-slate-400 hover:text-white p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Upload Image",children:[t.jsx(ze,{size:18}),t.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d=>O(d,"message")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[g&&t.jsx("button",{onClick:L,className:"text-slate-400 hover:text-white px-3 py-2 text-sm font-medium transition",children:"Cancel"}),t.jsxs("button",{onClick:w,disabled:m==="text"&&!p.trim(),className:"bg-tech-600 hover:bg-tech-700 text-white px-4 py-2 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[g?t.jsx(et,{size:16}):t.jsx(Je,{size:16}),g?"Update":m==="voice"?"Add Voice":"Add Message"]})]})]})]}),t.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:[r.map(d=>t.jsxs("div",{onClick:()=>V(d),className:`group flex items-center justify-between p-2 rounded-lg border transition cursor-pointer ${g===d.id?"bg-tech-500/10 border-tech-500/30 ring-1 ring-tech-500/30":"hover:bg-white/5 border-transparent hover:border-white/10"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${d.isSender?"bg-tech-500/20 text-tech-400":"bg-slate-700 text-slate-300"}`,children:d.isSender?"Me":"Them"}),t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("p",{className:"text-sm text-slate-300 truncate max-w-[150px]",children:d.image?"ðŸ“· [Image]":d.audioDuration?`ðŸŽ¤ Voice (${d.audioDuration}s)`:d.text}),g===d.id&&t.jsx("span",{className:"text-[10px] text-tech-400 font-medium",children:"Editing..."})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("button",{onClick:N=>ke(N,d.id),className:"p-1.5 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-full transition opacity-0 group-hover:opacity-100",title:"Delete",children:t.jsx(De,{size:14})})})]},d.id)),r.length===0&&t.jsx("p",{className:"text-center text-xs text-slate-500 py-4",children:"No messages yet."})]})]}),t.jsx("div",{className:"mt-auto pt-6",children:t.jsxs("button",{onClick:c,className:"w-full bg-tech-600 hover:bg-tech-700 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2 shadow-lg shadow-tech-900/30 transition transform active:scale-95 border border-tech-500/30",children:[t.jsx(Me,{size:20}),"Download Screenshot"]})})]})},cs=({isOpen:e,onClose:s,onGenerate:r,isLoading:a,hasApiKey:i})=>{const[n,l]=f.useState(""),[c,h]=f.useState("Casual");if(!e)return null;const m=x=>{x.preventDefault(),n.trim()&&r(n,c)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-900 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 border border-white/10",children:[t.jsxs("div",{className:"bg-linear-to-r from-purple-600 to-tech-600 p-6 text-white flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[t.jsx(nt,{size:20}),"AI Script Generator"]}),t.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Powered by Google Gemini"})]}),t.jsx("button",{onClick:s,className:"text-white/80 hover:text-white transition",children:t.jsx(xe,{size:24})})]}),t.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[!i&&t.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 flex items-start gap-3 text-amber-200",children:[t.jsx(_e,{className:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-amber-400",children:"API Key Required"}),t.jsx("p",{className:"text-sm text-amber-300/70 mt-1",children:"Please configure your Gemini API key in the settings above before generating."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"What is the conversation about?"}),t.jsx("textarea",{value:n,onChange:x=>l(x.target.value),placeholder:"e.g., Breaking up over text, planning a surprise party, complaining about work...",className:"w-full p-3 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none h-24 resize-none",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tone / Mood"}),t.jsxs("select",{value:c,onChange:x=>h(x.target.value),className:"w-full p-3 bg-slate-800/50 border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-purple-500 outline-none",children:[t.jsx("option",{children:"Casual & Funny"}),t.jsx("option",{children:"Romantic"}),t.jsx("option",{children:"Angry / Argument"}),t.jsx("option",{children:"Formal / Business"}),t.jsx("option",{children:"Sad / Emotional"}),t.jsx("option",{children:"Sarcastic"})]})]}),t.jsx("button",{type:"submit",disabled:a||!n.trim()||!i,className:"w-full bg-tech-600 text-white py-3 rounded-xl font-medium hover:bg-tech-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition border border-tech-500/30",children:a?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"animate-spin",size:20}),"Generating Magic..."]}):"Generate Script"})]})]})})},os=({apiKey:e,onApiKeyChange:s})=>{const[r,a]=f.useState(!1),[i,n]=f.useState(e),[l,c]=f.useState(!e);f.useEffect(()=>{n(e),c(!e)},[e]);const h=()=>{s(i.trim()),c(!1)},m=()=>{n(""),s(""),c(!0)},x=e?`${e.slice(0,8)}${"â€¢".repeat(20)}${e.slice(-4)}`:"";return t.jsx("div",{className:"w-full mb-6",children:t.jsxs("div",{className:"rounded-xl p-4 bg-dark-card/30 border border-white/5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Te,{className:"w-4 h-4 text-tech-400"}),t.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Gemini API Key"}),e&&!l&&t.jsxs("span",{className:"flex items-center gap-1 text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[t.jsx(Fe,{className:"w-3 h-3"}),"Configured"]})]}),t.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-slate-500 hover:text-tech-400 transition-colors",children:["Get API Key",t.jsx(Ge,{className:"w-3 h-3"})]})]}),l||!e?t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("input",{type:r?"text":"password",value:i,onChange:p=>n(p.target.value),placeholder:"Enter your Gemini API key...",className:"w-full bg-slate-800/50 border border-white/10 rounded-lg px-4 py-2.5 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-tech-500/50 focus:ring-1 focus:ring-tech-500/20 transition-all pr-10"}),t.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 transition-colors",children:r?t.jsx(X,{className:"w-4 h-4"}):t.jsx(J,{className:"w-4 h-4"})})]}),t.jsx("button",{onClick:h,disabled:!i.trim(),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i.trim()?"bg-tech-500 text-white hover:bg-tech-600":"bg-slate-800/50 text-slate-500 cursor-not-allowed"}`,children:"Save"})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex-1 bg-slate-800/50 border border-white/10 rounded-lg px-4 py-2.5 text-sm text-slate-400 font-mono truncate",children:r?e:x}),t.jsx("button",{type:"button",onClick:()=>a(!r),className:"p-2.5 bg-slate-800/50 border border-white/10 rounded-lg text-slate-400 hover:text-white hover:border-tech-500/30 transition-all",children:r?t.jsx(X,{className:"w-4 h-4"}):t.jsx(J,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{n(e),c(!0)},className:"px-3 py-2 bg-slate-800/50 border border-white/10 rounded-lg text-sm text-slate-400 hover:text-white hover:border-tech-500/30 transition-all",children:"Edit"}),t.jsx("button",{onClick:m,className:"px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-lg text-sm text-red-400 hover:bg-red-500/20 hover:border-red-500/30 transition-all",children:"Clear"})]}),t.jsx("p",{className:"mt-3 text-xs text-slate-500",children:"Your API key is stored locally in your browser and never sent to any server other than Google's Gemini API."})]})})},ds=async(e,s,r,a)=>{const i=new Ae({apiKey:a}),n="gemini-2.5-flash",l=`Generate a realistic chat conversation script in Traditional Chinese (Taiwanese style) between two people.
  Platform style: ${s}.
  Topic: ${e}.
  Mood: ${r}.
  Length: 5-8 messages.
  Include emojis appropriate for the platform.
  Return a JSON array where each item has 'text' (string), 'isSender' (boolean, true for 'Me', false for 'Partner'), and 'timeOffset' (minutes from start).`;try{const c=await i.models.generateContent({model:n,contents:l,config:{responseMimeType:"application/json",responseSchema:{type:P.ARRAY,items:{type:P.OBJECT,properties:{text:{type:P.STRING},isSender:{type:P.BOOLEAN},timeOffset:{type:P.INTEGER}},required:["text","isSender","timeOffset"]}}}}),h=JSON.parse(c.text||"[]"),m=new Date;return m.setHours(12,0,0,0),h.map((x,p)=>{const S=new Date(m.getTime()+x.timeOffset*6e4).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return{id:`gen-${Date.now()}-${p}`,text:x.text,isSender:x.isSender,timestamp:S,isRead:!0}})}catch(c){throw console.error("Gemini Generation Error:",c),new Error("Failed to generate conversation.")}},ue="fakechat_gemini_api_key",us=()=>{const[e,s]=f.useState("instagram"),[r,a]=f.useState(oe),[i,n]=f.useState(ce),[l,c]=f.useState(!1),[h,m]=f.useState(!1),[x,p]=f.useState(""),j=f.useRef(null);f.useEffect(()=>{const o=Ee(ue);o&&p(o)},[]);const S=o=>{p(o),$e(ue,o||null)},C=async()=>{if(j.current)try{const o=await as(j.current,{pixelRatio:2,skipAutoScale:!0}),u=document.createElement("a");u.download=`fakechat-${e}-${Date.now()}.png`,u.href=o,u.click()}catch(o){console.error("Failed to generate image",o),alert("Could not generate image. Please try again.")}},E=async(o,u)=>{if(!x){alert("Please enter your Gemini API key first.");return}m(!0);try{const y=await ds(o,e,u,x);a(y),c(!1)}catch{alert("AI Generation failed. Please check your API key or try again.")}finally{m(!1)}},$=(o,u)=>{a(y=>y.map(w=>w.id===o?{...w,...u}:w))},g=()=>{confirm("Reset all messages and settings?")&&(a(oe),n(ce))};return t.jsxs("div",{className:"animate-slide-up",children:[t.jsxs(Ce,{to:"/tools",className:"inline-flex items-center gap-2 text-slate-400 hover:text-tech-400 transition-colors mb-8 group",children:[t.jsx(he,{size:16,className:"group-hover:-translate-x-1 transition-transform"}),t.jsx("span",{className:"text-sm font-medium",children:"Back to Tools"})]}),t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("div",{className:"p-3 bg-tech-500/10 rounded-xl text-tech-400 border border-tech-500/20",children:t.jsx(Le,{size:28})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Fake Chat"}),t.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Create realistic chat screenshots for mockups"})]})]}),t.jsx("div",{className:"rounded-2xl overflow-hidden border border-white/10 bg-dark-card/30",children:t.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[700px]",children:[t.jsx("div",{className:"w-full lg:w-[420px] lg:shrink-0 border-b lg:border-b-0 lg:border-r border-white/10",children:t.jsx(ls,{settings:i,setSettings:n,messages:r,setMessages:a,platform:e,setPlatform:s,onGenerateAI:()=>c(!0),onDownload:C,onReset:g})}),t.jsxs("div",{className:"flex-1 bg-slate-900/50 flex items-center justify-center p-4 lg:p-8 relative min-h-[500px] lg:min-h-0",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(rgba(56,189,248,0.03)_1px,transparent_1px)] bg-size-[16px_16px] pointer-events-none"}),t.jsx(Ne,{ref:j,platform:e,messages:r,settings:i,onUpdateMessage:$})]})]})}),t.jsx("div",{className:"mt-8",children:t.jsx(os,{apiKey:x,onApiKeyChange:S})}),t.jsx(cs,{isOpen:l,onClose:()=>c(!1),onGenerate:E,isLoading:h,hasApiKey:!!x})]})};function Ss(){return[{title:"Fake Chat | Carry"},{property:"og:title",content:"Fake Chat"},{name:"description",content:"Fake Chat - Create realistic fake chat screenshots for Instagram, LINE, and Messenger."}]}const Cs=Se(us);export{Cs as default,Ss as meta};
